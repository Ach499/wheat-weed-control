<!DOCTYPE html>
<html dir="rtl" lang="fa">
<head>
    <meta charset="UTF-8">
	    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2e7d32">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <link rel="manifest" href="manifest.json">
    <meta name="theme-color" content="#2e7d32">
    <meta name="apple-mobile-web-app-capable" content="yes">
    <title>ุณุณุชู ููุดููุฏ ูุฏุฑุช ูุตุฑู ู ุชูุงูุจ ุนููฺฉุดโูุง ฺฏูุฏู ู ุฌู</title>
    <link rel="stylesheet" type="text/css" href="styles.css"></style>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
</head>
<body>
    <div class="container">
        <div class="header">
            <h1><i class="fas fa-robot"></i> ุณุณุชู ููุดููุฏ ูุฏุฑุช ูุตุฑู ู ุชูุงูุจ ุนููฺฉุดโูุง ฺฏูุฏู ู ุฌู</h1>
            <p class="subtitle">ุจุฑ ุงุณุงุณ ุฏุณุชูุฑุงูุนูู ุงุฌุฑุง ูุฏุฑุช ุดูุง ุนูููุง ูุฑุฒ ุฒุฑุงุนุช ฺฏูุฏู ู ุฌู ููุฑูุงู 1404</p>
        </div>
        
        <div class="app-container">
            <div class="sidebar">
                <div class="section">
                    <div class="section-header">
                        <i class="fas fa-edit"></i> ูพุงุฑุงูุชุฑูุง ูุฑูุฏ ุณุณุชู
                    </div>
                    <div class="section-content">
                        <div id="error-alert" class="alert alert-danger" style="display: none;">
                            <strong><i class="fas fa-exclamation-triangle"></i> ุฎุทุง:</strong> <span id="error-message"></span>
                        </div>
                        
                        <div class="form-group">
                            <label for="product"><i class="fas fa-wheat"></i> ูุญุตูู ูุฏู</label>
                            <select id="product" class="form-control">
                                <option value="ฺฏูุฏู">ฺฏูุฏู</option>
                                <option value="ุฌู">ุฌู</option>
                            </select>
                        </div>
                        
                        <div class="weed-group-section">
                            <h3><i class="fas fa-leaf"></i> ุงูุชุฎุงุจ ุนููโูุง ูุฑุฒ (ถฑ ููุฑุฏ ฺฉุงูู)</h3>
                            <div class="search-box">
                                <input type="text" id="weed-search" placeholder="ุฌุณุชุฌู ุนูู ูุฑุฒ...">
                            </div>
                            
                            <div class="weed-category-filter">
                                <button class="category-filter-btn active" data-category="all">ููู</button>
                                <button class="category-filter-btn" data-category="broadleaf">ูพููโุจุฑฺฏ</button>
                                <button class="category-filter-btn" data-category="narrowleaf">ูุงุฒฺฉโุจุฑฺฏ</button>
                                <button class="category-filter-btn" data-category="specific">ุนููโูุง ุฎุงุต</button>
                            </div>
                            
                            <div class="checkbox-grid" id="all-weeds-container">
                                <!-- All weeds will be populated by JavaScript -->
                            </div>
                            <div class="weed-selection-info">
                                <p id="all-selected-count">ฐ ููุฑุฏ ุงูุชุฎุงุจ ุดุฏู</p>
                            </div>
                        </div>
                        
                        <div id="weed-selection-summary" class="weed-selection-summary" style="display: none;">
                            <h4><i class="fas fa-clipboard-list"></i> ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ:</h4>
                            <div id="selected-weeds-list"></div>
                        </div>
                        
                        <div class="form-group">
                            <label for="herbicide_history"><i class="fas fa-history"></i> ุณุงุจูู ูุตุฑู ุนููฺฉุด ุฏุฑ ณ ุณุงู ฺฏุฐุดุชู (ุงุฎุชุงุฑ)</label>
                            <input type="text" id="herbicide_history" 
                                   placeholder="ูุซุงู: ุขุชูุงูุชุณุ ฺฏุฑุงูุณุชุงุฑุ ุขฺฉุณุงู" 
                                   class="form-control">
                        </div>
                        
                        <div class="form-group">
                            <label for="resistance_report"><i class="fas fa-exclamation-triangle"></i> ุงุณุชุงู ุจุง ฺฏุฒุงุฑุด ููุงููุช (ุงุฎุชุงุฑ)</label>
                            <select id="resistance_report" class="form-control">
                                <option value="">ุจุฏูู ฺฏุฒุงุฑุด ููุงููุช</option>
                                <option value="ุฎูุฒุณุชุงู">ุฎูุฒุณุชุงู</option>
                                <option value="ฺฉุฑูุงู">ฺฉุฑูุงู</option>
                                <option value="ูุงุฑุณ">ูุงุฑุณ</option>
                                <option value="ุงูุงู">ุงูุงู</option>
                                <option value="ฺฉุฑูุงูุดุงู">ฺฉุฑูุงูุดุงู</option>
                                <option value="ฺฏูุณุชุงู">ฺฏูุณุชุงู</option>
                                <option value="ุงุฑุฏุจู">ุงุฑุฏุจู</option>
                            </select>
                        </div>
                        
                        <div class="advanced-filter">
                            <h4 style="color: var(--primary-green); margin-bottom: 1rem;">
                                <i class="fas fa-sliders-h"></i> ุชูุธูุงุช ูพุดุฑูุชู ุชูุงูุจ
                            </h4>
                            
                            <div class="form-group">
                                <label for="rotation_years"><i class="fas fa-calendar-alt"></i> ุชุนุฏุงุฏ ุณุงูโูุง ุจุฑูุงูู ุชูุงูุจ</label>
                                <select id="rotation_years" class="form-control">
                                    <option value="3">3 ุณุงู</option>
                                    <option value="4" selected>4 ุณุงู</option>
                                    <option value="5">5 ุณุงู</option>
                                    <option value="6">6 ุณุงู</option>
                                </select>
                            </div>
                            
                            <div class="form-group">
                                <label for="rotation_strategy"><i class="fas fa-chess-board"></i> ุงุณุชุฑุงุชฺ ุชูุงูุจ</label>
                                <select id="rotation_strategy" class="form-control">
                                    <option value="efficiency-first" selected>ุงูููุช ฺฉุงุฑุง (ฺฉูุชุฑู ุนุงู)</option>
                                    <option value="resistance-management">ูุฏุฑุช ููุงููุช (ุชูุงูุจ ฺฏุฑููโูุง)</option>
                                    <option value="balanced">ูุชูุงุฒู (ฺฉุงุฑุง + ูุฏุฑุช ููุงููุช)</option>
                                    <option value="cost-effective">ููุฑูู ุจู ุตุฑูู (ฺฉูุชุฑู ูุฒูู)</option>
                                </select>
                            </div>
                            
                            <div class="filter-options">
                                <div class="filter-group">
                                    <input type="checkbox" id="include_dual_purpose" checked>
                                    <label for="include_dual_purpose">ุดุงูู ุนููฺฉุดโูุง ุฏู ููุธูุฑู</label>
                                </div>
                                
                                <div class="filter-group">
                                    <input type="checkbox" id="avoid_same_hrac" checked>
                                    <label for="avoid_same_hrac">ูพุฑูุฒ ุงุฒ ุชฺฉุฑุงุฑ ฺฏุฑูู HRAC</label>
                                </div>
                                
                                <div class="filter-group">
                                    <input type="checkbox" id="prioritize_low_risk" checked>
                                    <label for="prioritize_low_risk">ุงูููุช ฺฏุฑููโูุง ฺฉูโุฎุทุฑ</label>
                                </div>
                            </div>
                        </div>
                        
                        <button class="btn" id="calculate-btn">
                            <i class="fas fa-calculator"></i> ูุญุงุณุจู ุจุฑูุงูู ุชูุงูุจ ููุดููุฏ
                        </button>
                        
                        <button class="btn" id="optimize-btn" style="background: linear-gradient(135deg, #9C27B0, #7B1FA2); margin-top: 0.5rem;">
                            <i class="fas fa-magic"></i> ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ
                        </button>
                        
                        <button class="btn" id="reset-btn" style="background: linear-gradient(135deg, #757575, #424242); margin-top: 0.5rem;">
                            <i class="fas fa-redo"></i> ุจุงุฒูุดุงู ูุฑู
                        </button>
                    </div>
                </div>
                
                <div class="alert alert-info">
                    <h4><i class="fas fa-info-circle"></i> ูฺฺฏโูุง ุณุณุชู ุชูุงูุจ ุงุฎุชุตุงุต:</h4>
                    <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
                        <li><strong>ุชูุงูุจ ุจุฑุง ูุฑ ุนูู ูุฑุฒ:</strong> ุจุฑูุงูู ุฌุฏุงฺฏุงูู ุจุฑุง ูุฑ ุนูู ูุฑุฒ</li>
                        <li><strong>ุณููู ููุซุฑ ุงุฎุชุตุงุต:</strong> ููุท ุณููู ููุซุฑ ุจุฑ ูุฑ ุนูู ูุฑุฒ ููุงุด ุฏุงุฏู ูโุดูุฏ</li>
                        <li><strong>ุชูุงูุจ ููุดููุฏ:</strong> ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุณููู ููโุฎุงููุงุฏู</li>
                        <li><strong>ุชูฺฉฺฉ ฺฉุงูู ฺฏูุฏู/ุฌู:</strong> ุญุฐู ุฎูุฏฺฉุงุฑ ุนููฺฉุดโูุง ุบุฑูุฌุงุฒ</li>
                        <li><strong>ุณุณุชู ุงูุชุงุฒุฏู:</strong> ุงูุชุฎุงุจ ุจูุชุฑู ุชูุงู ุนููฺฉุดโูุง</li>
                    </ul>
                </div>
                
                <div id="weed-details-panel" class="weed-details-panel" style="display:none;">
                    <div class="weed-details-header">
                        <h4 id="selected-weed-name"></h4>
                        <button id="close-weed-details" class="category-filter-btn" style="padding: 0.3rem 0.8rem;">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                    <div id="weed-details-content">
                        <!-- Weed details will be populated here -->
                    </div>
                </div>
                
                <div id="rotation-history-panel" class="rotation-history-panel" style="display: none;">
                    <h4><i class="fas fa-history"></i> ุชุงุฑุฎฺู ุชูุงูุจ ุจุฑุง ุนูู ูุฑุฒ ุงูุชุฎุงุจ ุดุฏู</h4>
                    <div id="rotation-history-content">
                        <!-- Rotation history will be populated here -->
                    </div>
                </div>
            </div>
            
            <div class="main-content">
                <div class="loading" id="loading">
                    <div class="loading-spinner"></div>
                    <p>ุฏุฑ ุญุงู ุชุญูู ุฏุงุฏูโูุง ู ูุญุงุณุจู ุชูุงูุจ ููุดููุฏ...</p>
                    <p>ูุทูุงู ููุชุธุฑ ุจูุงูุฏ</p>
                </div>
                
                <div class="result-section" id="result-section">
                    <div class="tab-container">
                        <div class="tab active" data-tab="recommendations">ุชูุตูโูุง ุนููฺฉุด</div>
                        <div class="tab" data-tab="rotation">ุจุฑูุงูู ุชูุงูุจ ุฌุฏุฏ</div>
                        <div class="tab" data-tab="specific-rotation">ุชูุงูุจโูุง ุงุฎุชุตุงุต</div>
                        <div class="tab" data-tab="efficiency">ุฌุฒุฆุงุช ฺฉุงุฑุง</div>
                        <div class="tab" data-tab="hrac">ฺฏุฑููโูุง HRAC</div>
                        <div class="tab" data-tab="calculator">ูุญุงุณุจู ุณู ูุตุฑู</div>
                    </div>
                    <div class="tab-content" id="optimization-tab">
    <div class="result-header">
        <h3><i class="fas fa-magic"></i> ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ</h3>
    </div>
    <div class="result-content">
        <div class="optimization-result" id="optimization-result" style="display: none;">
            <h4 style="color: var(--primary-green); margin-bottom: 1rem;">
                <i class="fas fa-chart-line"></i> ูุชุงุฌ ุจูููโุณุงุฒ ุชูุงูุจ
            </h4>
            
            <div class="optimization-metrics" id="optimization-metrics">
                <!-- Optimization metrics will be populated here -->
            </div>
            
            <div id="optimized-rotation-plan" style="margin-top: 1.5rem;">
                <!-- Optimized rotation plan will be populated here -->
            </div>
        </div>
        
        <div id="optimization-placeholder">
            <div class="alert alert-info">
                <h4><i class="fas fa-cogs"></i> ุณุณุชู ุจูููโุณุงุฒ ุชูุงูุจ</h4>
                <p>ุจุฑุง ุจูููโุณุงุฒ ุชูุงูุจุ ูุทูุงู:</p>
                <ol style="margin-top: 0.5rem; padding-right: 1.5rem;">
                    <li>ุนููโูุง ูุฑุฒ ููุฌูุฏ ุฏุฑ ูุฒุฑุนู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</li>
                    <li>ูุญุตูู (ฺฏูุฏู ุง ุฌู) ุฑุง ูุดุฎุต ฺฉูุฏ</li>
                    <li>ุฑู ุฏฺฉูู "ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ" ุฏุฑ ุณูุช ฺูพ ฺฉูฺฉ ฺฉูุฏ</li>
                </ol>
                <p style="margin-top: 1rem;"><strong>ุงูุฏุงู ุจูููโุณุงุฒ:</strong></p>
                <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
                    <li>โข ุญุฏุงฺฉุซุฑ ฺฉุฑุฏู ฺฉุงุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ</li>
                    <li>โข ุญุฏุงูู ฺฉุฑุฏู ุฎุทุฑ ุงุฌุงุฏ ููุงููุช</li>
                    <li>โข ุงุณุชูุงุฏู ุจููู ุงุฒ ฺฏุฑููโูุง ูุฎุชูู HRAC</li>
                    <li>โข ฺฉุงูุด ูุฒููโูุง ฺฉูุชุฑู ุฏุฑ ุจููุฏูุฏุช</li>
                </ul>
            </div>
        </div>
    </div>
</div>
                    <div class="tab-content active" id="recommendations-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-chart-bar"></i> ูุชุงุฌ ุชุญูู ู ุชูุตูโูุง ุจููู</h3>
                            <div id="status-badge" class="status-badge status-recommendation"></div>
                        </div>
                        
                        <div class="result-content">
                            <div class="alert alert-warning" id="general-warnings" style="display: none;">
                                <h4><i class="fas fa-exclamation-triangle"></i> ูุดุฏุงุฑูุง ู ูฺฉุงุช ููู:</h4>
                                <div id="warnings-list"></div>
                            </div>
                            
                            <div id="control-type-info" style="display: none; margin-bottom: 1.5rem; padding: 1rem; background: var(--primary-green-25); border-radius: var(--radius-md);">
                                <h4><i class="fas fa-info-circle"></i> ููุน ฺฉูุชุฑู ููุฑุฏ ูุงุฒ</h4>
                                <p id="control-type-text"></p>
                            </div>
                            
                            <div class="result-grid">
                                <div class="result-card recommended">
                                    <div class="result-card-header">
                                        <i class="fas fa-check-circle"></i> ุจูุชุฑู ุนููฺฉุดโูุง ุชฺฉ
                                        <span id="recommended-count" class="weed-count">0</span>
                                    </div>
                                    <div class="result-card-body" id="recommended-list">
                                        <!-- Recommended herbicides will be populated here -->
                                    </div>
                                </div>
                                
                                <div class="result-card warnings">
                                    <div class="result-card-header">
                                        <i class="fas fa-exclamation-triangle"></i> ุนููฺฉุดโูุง ุจุง ูุญุฏูุฏุช
                                        <span id="limited-count" class="weed-count">0</span>
                                    </div>
                                    <div class="result-card-body" id="limited-list">
                                        <!-- Limited herbicides will be populated here -->
                                    </div>
                                </div>
                            </div>
                            
                            <div class="result-card rotation" style="margin-top: 1.5rem;">
                                <div class="result-card-header">
                                    <i class="fas fa-vial"></i> ุนููฺฉุดโูุง ุฏู ููุธูุฑู
                                </div>
                                <div class="result-card-body" id="dual-purpose-list">
                                    <!-- Dual-purpose herbicides will be populated here -->
                                </div>
                            </div>
                            
                            <div id="rotation-summary" style="display: none; margin-top: 2rem;">
                                <div class="alert alert-success">
                                    <h4><i class="fas fa-clipboard-check"></i> ุฎูุงุตู ุชูุงูุจ ูพุดููุงุฏ</h4>
                                    <div id="rotation-summary-content"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="rotation-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-sync-alt"></i> ุจุฑูุงูู ุชูุงูุจ ุฌุฏุฏ ุจุฑ ุงุณุงุณ ฺฉุงุฑุง</h3>
                        </div>
                        <div class="result-content">
                            <div class="alert alert-success">
                                <h4><i class="fas fa-lightbulb"></i> ุงุณุชุฑุงุชฺ ุชูุงูุจ ุงูุชุฎุงุจ ุดุฏู:</h4>
                                <div id="rotation-strategy-display">
                                    <!-- Rotation strategy will be populated here -->
                                </div>
                            </div>
                            
                            <div id="rotation-plan-container">
                                <!-- Rotation plan will be populated here -->
                            </div>
                            
                            <div class="alert alert-warning" style="margin-top: 1.5rem;">
                                <h4><i class="fas fa-exclamation-triangle"></i> ุงุตูู ุชูุงูุจ ูพุดุฑูุชู:</h4>
                                <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
                                    <li>โข ุชูุงูุจ ุจุฑ ุงุณุงุณ ฺฉุงุฑุง ุนููฺฉุดโูุง ุจุฑ ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ</li>
                                    <li>โข ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ููุท ุณููู ููุซุฑ ุขู ููุงุด ุฏุงุฏู ูโุดูุฏ</li>
                                    <li>โข ุงูููุช ุจุง ฺฏุฑููโูุง HRAC ุจุง ุฎุทุฑ ููุงููุช ฺฉูุชุฑ</li>
                                    <li>โข ูพุฑูุฒ ุงุฒ ุชฺฉุฑุงุฑ ฺฏุฑูู HRAC ุฏุฑ ุณุงูโูุง ูุชูุงู</li>
                                    <li>โข ุงุณุชูุงุฏู ุงุฒ ุนููฺฉุดโูุง ุฏู ููุธูุฑู ุฏุฑ ุณุงู ุงูู (ุฏุฑ ุตูุฑุช ููุงุณุจ ุจูุฏู)</li>
                                    <li>โข ุญุฐู ุฎูุฏฺฉุงุฑ ุนููฺฉุดโูุง ุบุฑูุฌุงุฒ ุฏุฑ ุฌู</li>
                                </ul>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="specific-rotation-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-calendar-check"></i> ุชูุงูุจโูุง ุงุฎุชุตุงุต ุจุฑุง ูุฑ ุนูู ูุฑุฒ</h3>
                        </div>
                        <div class="result-content">
                            <div class="alert alert-info">
                                <h4><i class="fas fa-info-circle"></i> ุฑุงูููุง ุงุณุชูุงุฏู:</h4>
                                <p>ุฏุฑ ุงู ุจุฎุดุ ุชูุงูุจโูุง ุงุฎุชุตุงุต ุจุฑุง <strong>ูุฑ ุนูู ูุฑุฒ ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู</strong> ููุงุด ุฏุงุฏู ูโุดูุฏ. ุจุฑุง ูุดุงูุฏู ุชูุงูุจ ุงุฎุชุตุงุต ฺฉ ุนูู ูุฑุฒุ ุขู ุฑุง ุฏุฑ ูุณูุช ูุฑูุฏ ุงูุชุฎุงุจ ฺฉูุฏ.</p>
                                <p style="margin-top: 0.5rem;"><strong>ุชูุฌู:</strong> ุชูุงูุจ ุจุฑุง ูุญุตูู ุงูุชุฎุงุจ ุดุฏู (ฺฏูุฏู ุง ุฌู) ุจู ุตูุฑุช ุฌุฏุงฺฏุงูู ูุญุงุณุจู ูโุดูุฏ.</p>
                            </div>
                            
                            <div id="specific-rotation-container">
                                <!-- Specific rotation schemes will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="optimization-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-magic"></i> ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ</h3>
                        </div>
                        <div class="result-content">
                            <div class="optimization-result" id="optimization-result" style="display: none;">
                                <h4 style="color: var(--primary-green); margin-bottom: 1rem;">
                                    <i class="fas fa-chart-line"></i> ูุชุงุฌ ุจูููโุณุงุฒ ุชูุงูุจ
                                </h4>
                                
                                <div class="optimization-metrics" id="optimization-metrics">
                                    <!-- Optimization metrics will be populated here -->
                                </div>
                                
                                <div id="optimized-rotation-plan" style="margin-top: 1.5rem;">
                                    <!-- Optimized rotation plan will be populated here -->
                                </div>
                            </div>
                            
                            <div id="optimization-placeholder">
                                <div class="alert alert-info">
                                    <h4><i class="fas fa-cogs"></i> ุณุณุชู ุจูููโุณุงุฒ ุชูุงูุจ</h4>
                                    <p>ุจุฑุง ุจูููโุณุงุฒ ุชูุงูุจุ ูุทูุงู:</p>
                                    <ol style="margin-top: 0.5rem; padding-right: 1.5rem;">
                                        <li>ุนููโูุง ูุฑุฒ ููุฌูุฏ ุฏุฑ ูุฒุฑุนู ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</li>
                                        <li>ูุญุตูู (ฺฏูุฏู ุง ุฌู) ุฑุง ูุดุฎุต ฺฉูุฏ</li>
                                        <li>ุฑู ุฏฺฉูู "ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ" ุฏุฑ ุณูุช ฺูพ ฺฉูฺฉ ฺฉูุฏ</li>
                                    </ol>
                                    <p style="margin-top: 1rem;"><strong>ุงูุฏุงู ุจูููโุณุงุฒ:</strong></p>
                                    <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
                                        <li>โข ุญุฏุงฺฉุซุฑ ฺฉุฑุฏู ฺฉุงุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ</li>
                                        <li>โข ุญุฏุงูู ฺฉุฑุฏู ุฎุทุฑ ุงุฌุงุฏ ููุงููุช</li>
                                        <li>โข ุงุณุชูุงุฏู ุจููู ุงุฒ ฺฏุฑููโูุง ูุฎุชูู HRAC</li>
                                        <li>โข ฺฉุงูุด ูุฒููโูุง ฺฉูุชุฑู ุฏุฑ ุจููุฏูุฏุช</li>
                                    </ul>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="efficiency-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-table"></i> ุฌุฒุฆุงุช ฺฉุงุฑุง ุนููฺฉุดโูุง</h3>
                        </div>
                        <div class="result-content">
                            <div class="alert alert-info">
                                <h4><i class="fas fa-info-circle"></i> ุฑุงูููุง ููุงุด ฺฉุงุฑุง:</h4>
                                <p>*** = ฺฉูุชุฑู ุนุงู | ** = ฺฉูุชุฑู ุฎูุจ | * = ฺฉูุชุฑู ุถุนู | - = ุจุฏูู ุชุฃุซุฑ | ? = ุงุทูุงุนุงุช ูุงูุดุฎุต</p>
                            </div>
                            
                            <div id="efficiency-details-container">
                                <!-- Efficiency details will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    
                    <div class="tab-content" id="hrac-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-flask"></i> ฺฏุฑููโูุง HRAC ู ุงุทูุงุนุงุช ุขููุง</h3>
                        </div>
                        <div class="result-content">
                            <div class="alert alert-success">
                                <h4><i class="fas fa-book"></i> ุณุณุชู HRAC:</h4>
                                <p>ุทุจููโุจูุฏ ุจูโุงูููู ุนููฺฉุดโูุง ุจุฑ ุงุณุงุณ ูฺฉุงูุฒู ุนูู ู ููุงููุช</p>
                            </div>
                            
                            <div id="hrac-groups-container">
                                <!-- HRAC groups will be populated here -->
                            </div>
                        </div>
                    </div>
                    
                    <div class="tab-content" id="calculator-tab">
                        <div class="result-header">
                            <h3><i class="fas fa-calculator"></i> ูุญุงุณุจู ูุฒุงู ุณู ูุตุฑู</h3>
                        </div>
                        <div class="result-content">
                            <div class="calculator">
                                <h3><i class="fas fa-calculator"></i> ูุญุงุณุจู ูุฒุงู ุณู ูุตุฑู</h3>
                                
                                <div class="calculator-grid">
                                    <div class="calculator-input">
                                        <label for="calculationType"><i class="fas fa-seedling"></i> ููุน ูุญุงุณุจู</label>
                                        <div class="calculator-unit">
                                            <select id="calculationType" onchange="updateCalculationType()">
                                                <option value="farm">ุฒุฑุงุน</option>
                                                <option value="garden">ุจุงุบ</option>
                                            </select>
                                        </div>
                                    </div>
                                    
                                    <div class="calculator-input">
                                        <label for="area"><i class="fas fa-ruler-combined"></i> ูุณุงุญุช ุฒูู</label>
                                        <div class="calculator-unit">
                                            <input type="number" id="area" min="0.1" step="0.1" value="1" placeholder="ูุซุงู: 1">
                                            <span id="areaUnit">ูฺฉุชุงุฑ</span>
                                        </div>
                                    </div>
                                    
                                    <div class="calculator-input">
                                        <label for="herbicideRate"><i class="fas fa-flask"></i> ุฏูุฒ ุชูุตู ุดุฏู</label>
                                        <div class="calculator-unit">
                                            <input type="number" id="herbicideRate" min="0.1" step="0.1" value="1" placeholder="ูุซุงู: 1">
                                            <span id="herbicideUnit">ูุชุฑ/ูฺฉุชุงุฑ</span>
                                        </div>
                                    </div>
                                    
                                    <div class="calculator-input">
                                        <label for="waterRate"><i class="fas fa-tint"></i> ุญุฌู ุขุจ ูุตุฑู</label>
                                        <div class="calculator-unit">
                                            <input type="number" id="waterRate" min="50" step="10" value="300" placeholder="ูุซุงู: 300">
                                            <span id="waterUnit">ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ</span>
                                        </div>
                                    </div>
                                    
                                    <div class="calculator-input">
                                        <label for="tankCapacity"><i class="fas fa-gas-pump"></i> ุธุฑูุช ูุฎุฒู ุณููพุงุด</label>
                                        <div class="calculator-unit">
                                            <input type="number" id="tankCapacity" min="100" step="50" value="1000" placeholder="ูุซุงู: 1000">
                                            <span>ูุชุฑ</span>
                                        </div>
                                    </div>
                                </div>
                                
                                <button class="calculator-button" onclick="calculateSpraying()">
                                    <i class="fas fa-calculator"></i> ูุญุงุณุจู ููุงุฏุฑ
                                </button>
                                
                                <div class="calculator-result" id="calculatorResult">
                                    <h4>๐ ูุชุงุฌ ูุญุงุณุจู</h4>
                                    <div class="result-grid">
                                        <div class="result-item">
                                            <div class="result-value" id="totalHerbicide">0</div>
                                            <div class="result-label">ููุฏุงุฑ ฺฉู ุณู ููุฑุฏ ูุงุฒ</div>
                                        </div>
                                        <div class="result-item">
                                            <div class="result-value" id="totalWater">0</div>
                                            <div class="result-label">ููุฏุงุฑ ฺฉู ุขุจ ููุฑุฏ ูุงุฒ</div>
                                        </div>
                                        <div class="result-item">
                                            <div class="result-value" id="tankFills">0</div>
                                            <div class="result-label">ุชุนุฏุงุฏ ูพุฑ ฺฉุฑุฏู ุฏูุนุงุช ูุฎุฒู</div>
                                        </div>
                                        <div class="result-item">
                                            <div class="result-value" id="herbicidePerTank">0</div>
                                            <div class="result-label">ููุฏุงุฑ ุณู ุฏุฑ ูุฑ ูุฎุฒู</div>
                                        </div>
                                    </div>
                                    
                                    <div style="margin-top: 2rem; padding: 1.5rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--primary-green-50);">
                                        <h5 style="color: var(--primary-green); margin-bottom: 1rem;">๐ ุฏุณุชูุฑุงูุนูู ุณูโูพุงุด:</h5>
                                        <div style="margin-bottom: 1rem; padding: 0.5rem; background: var(--primary-green-25); border-radius: var(--radius-sm);">
                                            <strong id="instructionType" style="color: var(--primary-green);">ุจุฑุง ุฒุฑุงุน:</strong>
                                        </div>
                                        <ol style="line-height: 1.8; padding-right: 1.5rem;">
                                            <li>ููุฏุงุฑ <span id="herbicideInstruction" style="font-weight: bold; color: var(--primary-green);">0</span> <span id="instructionUnit" style="font-weight: bold; color: var(--primary-green);">ูุชุฑ</span> ุงุฒ ุนููฺฉุด ุฑุง ุจุง <span id="waterInstruction" style="font-weight: bold; color: var(--primary-green);">0</span> ูุชุฑ ุขุจ ูุฎููุท ฺฉูุฏ</li>
                                            <li>ูุญููู ุฑุง ุจู ุฎูุจ ูู ุจุฒูุฏ ุชุง ฺฉุงููุงู ุญู ุดูุฏ</li>
                                            <li>ุณูโูพุงุด ุฑุง ุฏุฑ ุณุงุนุชโูุง ุฎูฺฉ ุฑูุฒ (ุตุจุญ ุฒูุฏ ุง ุนุตุฑ) ุงูุฌุงู ุฏูุฏ</li>
                                            <li>ุงุฒ ุณูโูพุงุด ุฏุฑ ุดุฑุงุท ูุฒุด ุจุงุฏ ุดุฏุฏ ุฎูุฏุฏุงุฑ ฺฉูุฏ</li>
                                            <li>ูพุณ ุงุฒ ุณูโูพุงุดุ ุฏุณุชฺฏุงู ุณูโูพุงุด ุฑุง ุจู ุฎูุจ ุดุณุชุดู ุฏูุฏ</li>
                                        </ol>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <div class="section" id="default-content">
                    <div class="section-header">
                        <i class="fas fa-home"></i> ุฑุงูููุง ุงุณุชูุงุฏู ุงุฒ ุณุณุชู ููุดููุฏ ุชูุงูุจ ุงุฎุชุตุงุต
                    </div>
                    <div class="section-content">
                        <div class="alert alert-success">
                            <h4><i class="fas fa-graduation-cap"></i> ูุฑุงุญู ุงุณุชูุงุฏู ุงุฒ ุณุณุชู:</h4>
                            <ol style="margin-top: 0.5rem; padding-right: 1.5rem;">
                                <li>ูุญุตูู ุฎูุฏ (ฺฏูุฏู ุง ุฌู) ุฑุง ุงูุชุฎุงุจ ฺฉูุฏ</li>
                                <li>ุนููโูุง ูุฑุฒ ุฎุงุต ููุฌูุฏ ุฏุฑ ูุฒุฑุนู ุฑุง ุงุฒ ูุณุช ถฑ ููุฑุฏ ุงูุชุฎุงุจ ฺฉูุฏ</li>
                                <li>ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ุณููู ููุซุฑ ุจู ุทูุฑ ุงุฎุชุตุงุต ููุงุด ุฏุงุฏู ูโุดูุฏ</li>
                                <li>ุฏุฑ ุตูุฑุช ุชูุงูุ ุงุทูุงุนุงุช ุชฺฉูู ุฑุง ูุงุฑุฏ ููุงุฏ</li>
                                <li>ุชูุธูุงุช ูพุดุฑูุชู ุชูุงูุจ ุฑุง ูุดุฎุต ฺฉูุฏ</li>
                                <li>ุฑู ุฏฺฉูู "ูุญุงุณุจู ุจุฑูุงูู ุชูุงูุจ ููุดููุฏ" ฺฉูฺฉ ฺฉูุฏ</li>
                                <li>ุจุฑุง ุจูููโุณุงุฒ ูพุดุฑูุชูุ ุงุฒ ุฏฺฉูู "ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ" ุงุณุชูุงุฏู ฺฉูุฏ</li>
                                <li>ุงุฒ ุชุจโูุง ูุฎุชูู ุจุฑุง ูุดุงูุฏู ูุชุงุฌ ุงุณุชูุงุฏู ฺฉูุฏ</li>
                            </ol>
                        </div>
                        
                        <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 1.5rem; margin-top: 1.5rem;">
                            <div style="background: linear-gradient(135deg, #E3F2FD, #BBDEFB); padding: 1.5rem; border-radius: var(--radius-md); border: 2px solid var(--secondary-blue);">
                                <h4 style="color: var(--secondary-blue); margin-bottom: 1rem;"><i class="fas fa-leaf"></i> ุชูุงูุจ ุจุฑุง ูุฑ ุนูู ูุฑุฒ</h4>
                                <p>ุณุณุชู ุจุฑุง <strong>ูุฑ ุนูู ูุฑุฒ ุจู ุตูุฑุช ุงุฎุชุตุงุต</strong> ุจุฑูุงูู ุชูุงูุจ ุชููุฏ ูโฺฉูุฏ</p>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #F3E5F5, #E1BEE7); padding: 1.5rem; border-radius: var(--radius-md); border: 2px solid var(--purple);">
                                <h4 style="color: var(--purple); margin-bottom: 1rem;"><i class="fas fa-check-double"></i> ุณููู ููุซุฑ ุงุฎุชุตุงุต</h4>
                                <p>ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ููุท ุณููู ููุซุฑ ุจุฑ ุขู ููุงุด ุฏุงุฏู ูโุดูุฏ</p>
                            </div>
                            
                            <div style="background: linear-gradient(135deg, #E8F5E8, #C8E6C9); padding: 1.5rem; border-radius: var(--radius-md); border: 2px solid var(--primary-green);">
                                <h4 style="color: var(--primary-green-dark); margin-bottom: 1rem;"><i class="fas fa-shield-alt"></i> ุชูฺฉฺฉ ฺฉุงูู ฺฏูุฏู/ุฌู</h4>
                                <p>ุญุฐู ุฎูุฏฺฉุงุฑ ุนููฺฉุดโูุง ุบุฑูุฌุงุฒ ุฏุฑ ูุฑ ูุญุตูู. ุชูุงูุจ ุฌุฏุงฺฏุงูู ุจุฑุง ฺฏูุฏู ู ุฌู</p>
                            </div>
                        </div>
                        
                        <div class="alert alert-info" style="margin-top: 1.5rem;">
                            <h4><i class="fas fa-database"></i> ูพุงฺฏุงู ุฏุงุฏู ฺฉุงูู ุณุณุชู:</h4>
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(150px, 1fr)); gap: 1rem; margin-top: 1rem;">
                                <div style="text-align: center; padding: 1rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--primary-green);">
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--primary-green);">61</div>
                                    <div>ุนูู ูุฑุฒ ฺฉุงูู</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--secondary-blue);">
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--secondary-blue);">33</div>
                                    <div>ุนููฺฉุด ุซุจุช ุดุฏู</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--purple);">
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--purple);">11</div>
                                    <div>ุชุฑฺฉุจ ุชุฃุฏ ุดุฏู</div>
                                </div>
                                <div style="text-align: center; padding: 1rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--warning-orange);">
                                    <div style="font-size: 2rem; font-weight: bold; color: var(--warning-orange);">61</div>
                                    <div>ุชูุงูุจ ุงุฎุชุตุงุต</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        
        <div class="section" style="margin: 0; border-radius: 0; border: none; border-top: 3px solid var(--primary-green);">
            <div class="section-content" style="text-align: center; color: #666; font-size: 0.9rem;">
                <p><i class="fas fa-copyright"></i> ุณุณุชู ููุดููุฏ ูุฏุฑุช ูุตุฑู ู ุชูุงูุจ ุนููฺฉุดโูุง ฺฏูุฏู ู ุฌู - ุจุฑ ุงุณุงุณ ุฏุณุชูุฑุงูุนูู ุงุฌุฑุง ูุฏุฑุช ุดูุง ุนูููุง ูุฑุฒ ุฒุฑุงุนุช ฺฏูุฏู ู ุฌู ููุฑูุงู 1404</p>
                <p>ูุณุฎู 3.0 - ุดุงูู ุชูุงูุจ ุงุฎุชุตุงุต ุจุฑุง ูุฑ ุนูู ูุฑุฒ ุจู ุตูุฑุช ูุฌุฒุง</p>
                <p>ุขุฎุฑู ุจูโุฑูุฒุฑุณุงู: ุฏ ูุงู 1404</p>
                
                <p><strong>ุชูู ฺฉููุฏฺฏุงู:</strong>
                    <ul style="line-height: 1.8; padding-right: 1rem;">
                        <li> <strong>ุนูุงุฑ ฺูุจูู ฺฉุงุฑุดูุงุณ ูุณุฆูู ุญูุธ ูุจุงุชุงุช ูุฏุฑุช ุฌูุงุฏ ฺฉุดุงูุฑุฒ ุดูุฑุณุชุงู ููุณูุ</strong></li>
                        <li> <strong>  ูุฏุฑุช ุญูุธ ูุจุงุชุงุช ุณุงุฒูุงู ุฌูุงุฏ ฺฉุดุงูุฑุฒ ุงุณุชุงู ูุงุฑุณ</strong></li>
                    </ul>
                </p>
                <div style="margin-top: 2rem; padding: 2rem; background: rgba(255,255,255,0.15); border-radius: var(--radius-lg);">
                    <p style="font-size: 1.1rem; margin-bottom: 1rem;"><strong>ุชูุฌู:</strong></p>
                    <p>ุงู ุฑุงูููุง ุจุฑุง ุงุณุชูุงุฏู ฺฉุงุฑุดูุงุณุงู ู ฺฉุดุงูุฑุฒุงู ุชูู ุดุฏู ุงุณุช. ูุจู ุงุฒ ูุฑ ุงูุฏุงู ุจุง ฺฉุงุฑุดูุงุณุงู ฺฏุงููพุฒุดฺฉ ูุดูุฑุช ููุงุฏ.</p>
                </div>
            </div>
        </div>
    </div>

    
<script>
/* ===== GLOBAL SAFE EFFICIENCY SYMBOL (v24) ===== */
function getEfficiencySymbol(herbicide, weedName) {
    try {
        if (!herbicide) return null;
        // ุญุงูุช 1: ุณุงุฎุชุงุฑ efficiency ุจูโุตูุฑุช ุขุจุฌฺฉุช
        if (herbicide.efficiency && typeof herbicide.efficiency === 'object') {
            return herbicide.efficiency[weedName] || null;
        }
        // ุญุงูุช 2: ุณุงุฎุชุงุฑ weed_efficiency
        if (herbicide.weed_efficiency && typeof herbicide.weed_efficiency === 'object') {
            return herbicide.weed_efficiency[weedName] || null;
        }
        return null;
    } catch (e) {
        return null;
    }
}
/* ===== END GLOBAL SAFE EFFICIENCY SYMBOL ===== */

        // ==================== ูพุงฺฏุงู ุฏุงุฏู ฺฉุงูู ู ุชุตุญุญ ุดุฏู ====================
        const COMPLETE_DATASET = {
            // ูุณุช ฺฉุงูู ุนููโูุง ูุฑุฒ ุจุง ุงุทูุงุนุงุช ูุฑุจูุทู
            weeds: [
                {
                    id: 1,
                    name: "ุชูุฎู",
                    fullName: "ุชูุฎู (Acroptilon repens)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 20, 22, 23, 27, 28, 29, 31, 32, 33], // ุณููู ููุซุฑ
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ ุจุง ุฑุดูโูุง ุนูู",
                    priority: 1
                },
                {
                    id: 2,
                    name: "ุขุฏูููุณ",
                    fullName: "ุขุฏูููุณ (Adonis aestivalis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 15, 16, 18, 22, 28, 29, 31],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 3,
                    name: "ุณูุงู ุฏุงูู",
                    fullName: "ุณูุงู ุฏุงูู (Agrostemma githago)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 22, 28, 29, 31, 32, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 4,
                    name: "ูุงู",
                    fullName: "ูุงู (Ammi majus)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 15, 16, 18, 22, 28, 29, 31],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 5,
                    name: "ุณููฺฉ ุจุฑฺฏ ูพูุงู",
                    fullName: "ุณููฺฉ ุจุฑฺฏ ูพูุงู (Atriplex hastata)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 6,
                    name: "ฺุบูุฏุฑ ูุญุด",
                    fullName: "ฺุบูุฏุฑ ูุญุด (Beta maritima)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 17, 18, 19, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 7,
                    name: "ููุณู ูุดูุด",
                    fullName: "ููุณู ูุดูุด (Capsella bursa-pastoris)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 22, 28, 29, 31, 32, 33],
                    specificNotes: "",
                    priority: 1
                },
                {
                    id: 8,
                    name: "ุงุฒูฺฉ",
                    fullName: "ุงุฒูฺฉ (Cardaria draba)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 20, 22, 28, 29, 31],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ ุจุง ุฑุฒูู",
                    priority: 1
                },
                {
                    id: 9,
                    name: "ฺฏูุฑูฺฏ ูุญุดู",
                    fullName: "ฺฏูุฑูฺฏ ูุญุดู (Carthamus oxyacantha)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 28, 29, 31, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 10,
                    name: "ฺฏู ฺฏูุฏู",
                    fullName: "ฺฏู ฺฏูุฏู (Centaurea depressa)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 28, 29, 31, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 11,
                    name: "ุณุฑ ุดฺฉุงูุชู",
                    fullName: "ุณุฑ ุดฺฉุงูุชู (Cephalaria syriaca)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 12,
                    name: "ุฏุงูู ูุฑุบ",
                    fullName: "ุฏุงูู ูุฑุบ (Cerastium perfoliatum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 13,
                    name: "ุณููฺฉ",
                    fullName: "ุณููฺฉ (Chenopodium album)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุจุณุงุฑ ุดุงุน",
                    priority: 1
                },
                {
                    id: 14,
                    name: "ููฺฏุฑ ูุญุดู",
                    fullName: "ููฺฏุฑ ูุญุดู (Cirsium arvense)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 21, 22, 28, 29, 31],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ ุจุง ุฑุดูโูุง ุนูู",
                    priority: 1
                },
                {
                    id: 15,
                    name: "ฺฏูุด ุฎุฑฺฏูุด",
                    fullName: "ฺฏูุด ุฎุฑฺฏูุด (Conringia orientalis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 16,
                    name: "ุฒุจุงู ุฏุฑ ููุง",
                    fullName: "ุฒุจุงู ุฏุฑ ููุง (Consolida orientalis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 15, 16, 18, 28, 29, 31],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 17,
                    name: "ูพูฺฺฉ ุตุญุฑุงู",
                    fullName: "ูพูฺฺฉ ุตุญุฑุงู (Convolvulus arvensis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 20, 21, 22, 23, 28, 29, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุจุณุงุฑ ุณูุฌ ุจุง ุณุงููโูุง ุฎุฒูุฏู",
                    priority: 1
                },
                {
                    id: 18,
                    name: "ุฎุงูุดูุฑ ูุนูููู",
                    fullName: "ุฎุงูุดูุฑ ูุนูููู (Descurania sophia)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 21, 22, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "",
                    priority: 1
                },
                {
                    id: 19,
                    name: "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ",
                    fullName: "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ (Erodium cicutarium)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 20,
                    name: "ุดุงู ุชุฑู",
                    fullName: "ุดุงู ุชุฑู (Fumaria spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 21, 23, 27, 28, 29, 31, 32, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 21,
                    name: "ุจู ุชู ุฑุงุฎ",
                    fullName: "ุจู ุชู ุฑุงุฎ (Galium spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 16, 20, 21, 22, 23, 28, 29, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุจุณุงุฑ ุณูุฌุ ฺฉูุชุฑู ุณุฎุช",
                    priority: 1
                },
                {
                    id: 22,
                    name: "ุดูุฑูู ุจูุงู",
                    fullName: "ุดูุฑูู ุจูุงู (Glycyrrhiza glabra)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 28, 29, 31],
                    specificNotes: "ุนูู ูุฑุฒ ุจุง ุฑุดูโูุง ุนูู",
                    priority: 1
                },
                {
                    id: 23,
                    name: "ูุงุฎูู",
                    fullName: "ูุงุฎูู (Goldbachia laevigata)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 22, 27, 28, 29, 30, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 24,
                    name: "ุบุฑุจููู",
                    fullName: "ุบุฑุจููู (Lamium amplexicaule)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 21, 22, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 25,
                    name: "ุฎูุฑ",
                    fullName: "ุฎูุฑ (Lathyrus inconspicuous)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 15, 16, 18, 19, 22, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 26,
                    name: "ุงุฑุดุชู ุฎุทุงู",
                    fullName: "ุงุฑุดุชู ุฎุทุงู (Lepirodiclis holosteoides)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [15, 16, 18, 19, 20, 21, 22, 27, 31],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌุ ุขุชูุงูุชุณ ุจุฑ ุขู ููุซุฑ ูุณุช",
                    priority: 1
                },
                {
                    id: 27,
                    name: "ูุงููุดุงู",
                    fullName: "ูุงููุดุงู (Malcolmia africana)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 22, 27, 28, 29, 31, 32, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 28,
                    name: "ูพููุฑู",
                    fullName: "ูพููุฑู (Malva spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 21, 23, 27, 28, 29, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ",
                    priority: 1
                },
                {
                    id: 29,
                    name: "ูููุฌู ุฒุฑุฏ",
                    fullName: "ูููุฌู ุฒุฑุฏ (Melilotus officinalis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 21, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 30,
                    name: "ูููุฏ",
                    fullName: "ูููุฏ (Myagrum perfoliatum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 27, 28, 29, 30, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 31,
                    name: "ุดูุงู",
                    fullName: "ุดูุงู (Papaver spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 32,
                    name: "ููุช ุจูุฏ",
                    fullName: "ููุช ุจูุฏ (Polygonum aviculare)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 23, 27, 28, 29, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุดุงุน",
                    priority: 1
                },
                {
                    id: 33,
                    name: "ููุช ุจูุฏ ูพูฺ",
                    fullName: "ููุช ุจูุฏ ูพูฺ (Polygonum convolvulus)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 17, 18, 19, 20, 21, 27, 28, 29, 31, 32],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 34,
                    name: "ุชุฑุจฺู ูุญุดู",
                    fullName: "ุชุฑุจฺู ูุญุดู (Raphanus raphanistrum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 19, 20, 21, 22, 27, 28, 29, 30, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 35,
                    name: "ุชุฑุดู",
                    fullName: "ุชุฑุดู (Rumex spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 15, 16, 20, 21, 22],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ ุจุง ุฑุดูโูุง ุนูู",
                    priority: 1
                },
                {
                    id: 36,
                    name: "ููฺฏุฑ ุงุจูู",
                    fullName: "ููฺฏุฑ ุงุจูู (Silybum marianum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 18, 28, 29, 30, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 37,
                    name: "ุดููู",
                    fullName: "ุดููู (Rapistrum rugosum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "",
                    priority: 1
                },
                {
                    id: 38,
                    name: "ุฎุฑุฏู ูุญุดู",
                    fullName: "ุฎุฑุฏู ูุญุดู (Sinapis arvensis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "",
                    priority: 1
                },
                {
                    id: 39,
                    name: "ุฎุงูุดูุฑ ุชูุฎ",
                    fullName: "ุฎุงูุดูุฑ ุชูุฎ (Sisymbrium officinale)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 27, 28, 29, 30, 31, 32],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 40,
                    name: "ุดูุฑ ุชูุบู",
                    fullName: "ุดูุฑ ุชูุบู (Sonchus spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 19, 20, 21, 22, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุณูุฌ ุจุง ุดุฑุงุจู",
                    priority: 1
                },
                {
                    id: 41,
                    name: "ฺฏูุฏูู",
                    fullName: "ฺฏูุฏูู (Stellaria media)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 18, 20, 21, 22, 23, 27, 28, 29, 30, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ุจุณุงุฑ ุดุงุน",
                    priority: 1
                },
                {
                    id: 42,
                    name: "ูุงุณุชููู",
                    fullName: "ูุงุณุชููู (Turgenia latifolia)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 14, 15, 16, 22, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 43,
                    name: "ุฌุบุฌุบู",
                    fullName: "ุฌุบุฌุบู (Vaccaria spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 14, 15, 16, 22, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 44,
                    name: "ุณูุฒุงุจ",
                    fullName: "ุณูุฒุงุจ (Veronica persica)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 14, 15, 16, 20, 21, 22, 23, 27, 28, 29, 31, 32, 33],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 45,
                    name: "ูุงุดู",
                    fullName: "ูุงุดู (Vicia spp)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [11, 12, 13, 15, 16, 17, 18, 19, 20, 21, 27, 28, 29, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 46,
                    name: "ุดุงู ุชุฑู ุง",
                    fullName: "ุดุงู ุชุฑู ุง (Hypecum pendulum)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 47,
                    name: "ุฎุฑุฏู ูุงุฐุจ",
                    fullName: "ุฎุฑุฏู ูุงุฐุจ (Hirschfeldia incana)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 48,
                    name: "ุฎุฑุฏู ุงุจ ูุงู",
                    fullName: "ุฎุฑุฏู ุงุจ ูุงู (Chorispora tenella)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 49,
                    name: "ุขูุงุบุงููุณ",
                    fullName: "ุขูุงุบุงููุณ (Anagalis arvensis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 50,
                    name: "ุฏู ุนูุฑุจู",
                    fullName: "ุฏู ุนูุฑุจู (Scorpiurus muricatus)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                {
                    id: 51,
                    name: "ุขูุงูู ูุญุดู",
                    fullName: "ุขูุงูู ูุญุดู (Ranunculus arvensis)",
                    type: "broadleaf",
                    category: "ูพููโุจุฑฺฏ",
                    effectiveHerbicides: [23, 32, 33],
                    specificNotes: "",
                    priority: 3
                },
                // ุนููโูุง ูุฑุฒ ูุงุฒฺฉโุจุฑฺฏ
                {
                    id: 52,
                    name: "ููุงู ูุญุด",
                    fullName: "ููุงู ูุญุด (Avena spp)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [1, 2, 3, 4, 5, 8, 9, 10, 27, 28, 29, 30, 31, 32],
                    specificNotes: "ุนูู ูุฑุฒ ููู ุจุงุฑฺฉโุจุฑฺฏ",
                    priority: 1
                },
                {
                    id: 53,
                    name: "ุฏู ุฑูุจุงู ูุดูุฏู",
                    fullName: "ุฏู ุฑูุจุงู ูุดูุฏู (Alopecurus spp)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [1, 2, 3, 4, 8, 28, 29, 31, 32],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 54,
                    name: "ุนูู ูพุดูฺฉ",
                    fullName: "ุนูู ูพุดูฺฉ (Bromus spp)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [27, 29],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 55,
                    name: "ุฌูุฏุฑู",
                    fullName: "ุฌูุฏุฑู (Hordeum spontaneum)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [27, 29],
                    specificNotes: "ููุท ุขูพุฑูุณ ู ุชูุชุงู ููุซุฑ ูุณุชูุฏ",
                    priority: 1
                },
                {
                    id: 56,
                    name: "ุฌู ููุด",
                    fullName: "ุฌู ููุด (Hordeum murinum)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [27, 29],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 57,
                    name: "ฺฺู",
                    fullName: "ฺฺู (Lolium spp)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [1, 3, 4, 6, 8, 28, 29, 31, 32, 33],
                    specificNotes: "ุนูู ูุฑุฒ ููุงูู ุจู ุจุฑุฎ ุณููู",
                    priority: 1
                },
                {
                    id: 58,
                    name: "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)",
                    fullName: "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด) (Phalaris spp)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [1, 2, 3, 4, 8, 9, 27, 28, 29, 30, 31],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 59,
                    name: "ุนูู ฺูู",
                    fullName: "ุนูู ฺูู (Poa annua)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [2, 3, 4, 8, 27, 28, 29, 31, 32],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 60,
                    name: "ฺูู ูุนููู",
                    fullName: "ฺูู ูุนููู (Poa trivialis)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [2, 3, 4, 8, 28, 29, 31, 32],
                    specificNotes: "",
                    priority: 2
                },
                {
                    id: 61,
                    name: "ฺุงูุฏุงุฑ",
                    fullName: "ฺุงูุฏุงุฑ (Secale cereale)",
                    type: "narrowleaf",
                    category: "ูุงุฒฺฉโุจุฑฺฏ",
                    effectiveHerbicides: [],
                    specificNotes: "ูฺ ุนููฺฉุด ููุซุฑ ุจุฑุง ุงู ุนูู ูุฑุฒ ุฏุฑ ฺฏูุฏู ู ุฌู ุซุจุช ูุดุฏู ุงุณุช",
                    priority: 3
                }
            ],

            hrac_groups: {
                "A": { 
                    name: "ุจุงุฒุฏุงุฑูุฏู ACCase", 
                    risk: "ุฒุงุฏ", 
                    risk_level: 4,
                    max_consecutive_years: 3, 
                    color: "#E91E63",
                    usage: "35%",
                    description: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชู-CoA ฺฉุฑุจูฺฉุณูุงุฒ (ACCase)",
                    examples: ["ุงููฺฉุณุงู (ุฏฺฉูููููพ ูุชู)", "ูพููุงุณููพุฑ (ูููฺฉุณุงูพุฑููพ)", "ุชุฑุงฺฉุณูุณ (ูพููฺฉุณุงุฏู + ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู)","ุชุงูพฺฉ (ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู)", "ุขฺฉุณุงู (ูพููฺฉุณุงุฏู)", "ูพุฑุงูพฺฉ(ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู)"],
                    mechanism: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชู-CoA ฺฉุฑุจูฺฉุณูุงุฒ(ACCase)",
                    resistance_status: "ููุงููุช ฺฏุณุชุฑุฏูุ ูุงุฒ ุจู ุงุญุชุงุท",
                    application: "ุนููฺฉุดโูุง ุจุงุฑฺฉโุจุฑฺฏ"
                },
                "B": { 
                    name: "ุจุงุฒุฏุงุฑูุฏู ALS", 
                    risk: "ุฎู ุฒุงุฏ", 
                    risk_level: 5,
                    max_consecutive_years: 2, 
                    color: "#9C27B0",
                    usage: "25%",
                    description: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชููุงฺฉุชุงุช ุณูุชุงุฒ (ALS)",
                    examples: [ "ฺฉุงุณฺฉ", "ุงุชููู", "ฺฏุฑุงูุณุชุงุฑ (ุชุฑ ุจููุฑูู ูุชู)", "ูุฒููุงฺฉุณ (ูุฒูุณููููุฑูู)", "ุขุชูุงูุชุณ", "ุชูุณ", "ูููุฑฺฉุณ", "ููุชูุฑ"],
                    mechanism: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชููุงฺฉุชุงุช ุณูุชุงุฒ (ALS)",
                    resistance_status: "ููุงููุช ุจุณุงุฑ ุจุงูุง ุฏุฑ ุจุฑุฎ ููุงุทู",
                    application: "ุจุงุฑฺฉโุจุฑฺฏโูุง ู ุจุฑุฎ ูพููโุจุฑฺฏโูุง"
                },
                "C": { 
                    name: "ุจุงุฒุฏุงุฑูุฏู PSII", 
                    risk: "ฺฉู", 
                    risk_level: 2,
                    max_consecutive_years: 10, 
                    color: "#4CAF50",
                    usage: "15%",
                    description: "ููุงุฑ ุงูุชูุงู ุงูฺฉุชุฑูู ุฏุฑ ููุชูุณุณุชู II",
                    examples: ["ูพุงุฑุฏูุฑ (ุจุฑูููฺฉุณูู)" ],
                    mechanism: "ููุงุฑ ุงูุชูุงู ุงูฺฉุชุฑูู ุฏุฑ ููุชูุณุณุชู II",
                    resistance_status: "ููุงููุช ฺฉูุ ฺฏุฒูู ููุงุณุจ ุชูุงูุจ",
                    application: "ุนููฺฉุดโูุง ูพููโุจุฑฺฏ"
                },
                "F1": { 
                    name: "ุจุงุฒุฏุงุฑูุฏู PDS", 
                    risk: "ูุชูุณุท", 
                    risk_level: 3,
                    max_consecutive_years: 5, 
                    color: "#FF9800",
                    usage: "12%",
                    description: "ุจุงุฒุฏุงุฑูุฏู ูุง ุจูุณูุชุฒ ฺฉุงุฑุชููุฆุฏ",
                    examples: ["ุฏฺฉููููฺฉุงู", "ูููุฑฺฉุณ ูพุฑ", "ูพูุชุฑ"],
                    mechanism: "ุจุงุฒุฏุงุฑูุฏู ูุง ุจูุณูุชุฒ ฺฉุงุฑุชููุฆุฏ",
                    resistance_status: "ููุงููุช ฺฉูุ ฺฉุงุฑุง ุจุงูุง",
                    application: "ุนููฺฉุดโูุง ุจุงุฑฺฉโุจุฑฺฏ ู ุฏู ููุธูุฑู"
                },
                "K3": { 
                    name: "ุจุงุฒุฏุงุฑูุฏู VLCFA", 
                    risk: "ูุชูุณุท", 
                    risk_level: 3,
                    max_consecutive_years: 5, 
                    color: "#2196F3",
                    usage: "8%",
                    description: "ุจุงุฒุฏุงุฑูุฏู ูุง ุณูุชุฒ ุงุณุฏูุง ฺุฑุจ ุฒูุฌุฑู ุจููุฏ",
                    examples: ["ุงูุงุชู-ุณุงฺฉูุฑุง (ูพุฑูฺฉุณุงุณููููู)"],
                    mechanism: "ุจุงุฒุฏุงุฑูุฏู ูุง ุณูุชุฒ ุงุณุฏูุง ฺุฑุจ ุฒูุฌุฑู ุจููุฏ",
                    resistance_status: "ููุงููุช ุจุณุงุฑ ฺฉูุ ฺฏุฒูู ุงุฏูโุขู",
                    application: "ุนููฺฉุดโูุง ุจุงุฑฺฉโุจุฑฺฏุ ูพุด ุฑูุด"
                },
                "O": { 
                    name: "ุงฺฉุณูโูุง ูุตููุน", 
                    risk: "ูุชูุณุท", 
                    risk_level: 3,
                    max_consecutive_years: 5, 
                    color: "#4CAF50",
                    usage: "5%",
                    description: "ุงฺฉุณู ูุง ูุตููุน (ุดุจู ููุฑููู IAA) ุชุญุฑฺฉ ุบุฑุทุจุน ุฑุดุฏ ฺฏุงู",
                    examples: ["ู46 ุฏูููุฆุฏ (ุชูููุฑุฏ)", "ู46 ฺฉูุจ ูููุฆุฏ", "ุฏููพูุณุงู ุณููพุฑ", "ุฏุงูู ุณููพุฑ", "ฺฉุงูู ูููุฑฺฉุณ", "MCPA", "ุฏุงฺฉุงูุจุง", "ููููพุฑููพ ูพ"],
                    mechanism: "ุงฺฉุณู ูุง ูุตููุน (ุดุจู ููุฑููู IAA) ุชุญุฑฺฉ ุบุฑุทุจุน ุฑุดุฏ ฺฏุงู",
                    resistance_status: "ููุงููุช ูุงุฏุฑุ ฺฏุฒูู ุงูู",
                    application: "ุนููฺฉุดโูุง ูพููโุจุฑฺฏ"
                },
                "N": { 
                    name: "ูุงุดูุงุฎุชู", 
                    risk: "ฺฉู", 
                    risk_level: 1,
                    max_consecutive_years: 10, 
                    color: "#4CAF50",
                    usage: "5%",
                    description: "ูุงุดูุงุฎุชู",
                    examples: ["ุณุงูฺฉุณ BW"],
                    mechanism: "ูุงุดูุงุฎุชู",
                    resistance_status: "ููุงููุช ูุงุฏุฑุ ฺฏุฒูู ุงูู",
                    application: "ุนููฺฉุด ูุง ูุงุฒฺฉ ุจุฑฺฏ (ููุงู)"
                },
                "A+B": { 
                    name: "ุชุฑฺฉุจ A ู B", 
                    risk: "ุฎู ุฒุงุฏ", 
                    risk_level: 5,
                    max_consecutive_years: 2, 
                    color: "#7B1FA2",
                    usage: "3%",
                    description: "ุชุฑฺฉุจ ุจุงุฒุฏุงุฑูุฏูโูุง ACCase ู ALS",
                    examples: ["ุขฺฉุณุงู ูุงู"],
                    mechanism: "ุฏู ูฺฉุงูุฒู ุนูู ูุฎุชูู",
                    resistance_status: "ุฎุทุฑ ููุงููุช ุจุงูุง",
                    application: "ุนููฺฉุดโูุง ุฏู ููุธูุฑู"
                },
                "B+O": { 
                    name: "ุชุฑฺฉุจ B ู O", 
                    risk: "ุฒุงุฏ", 
                    risk_level: 4,
                    max_consecutive_years: 3, 
                    color: "#5C6BC0",
                    usage: "4%",
                    description: "ุชุฑฺฉุจ ุจุงุฒุฏุงุฑูุฏู ALS ู ุงฺฉุณู ูุตููุน",
                    examples: ["ุณุฒุงุฑ", "ุฒููฺฏโู"],
                    mechanism: "ุฏู ูฺฉุงูุฒู ุนูู ูุฎุชูู",
                    resistance_status: "ุฎุทุฑ ููุงููุช ูุชูุณุท ุจู ุจุงูุง",
                    application: "ุนููฺฉุดโูุง ุฏู ููุธูุฑู"
                },
                "C+O": { 
                    name: "ุชุฑฺฉุจ C ู O", 
                    risk: "ูุชูุณุท", 
                    risk_level: 3,
                    max_consecutive_years: 5, 
                    color: "#26A69A",
                    usage: "6%",
                    description: "ุชุฑฺฉุจ ุจุงุฒุฏุงุฑูุฏู PSII ู ุงฺฉุณู ูุตููุน",
                    examples: ["ุจุฑููุงุณุฏ ุงู ุข", "ุจูฺฉุชุฑู ูููุฑุณุงู"],
                    mechanism: "ุฏู ูฺฉุงูุฒู ุนูู ูุฎุชูู",
                    resistance_status: "ุฎุทุฑ ููุงููุช ฺฉู",
                    application: "ุนููฺฉุดโูุง ูพููโุจุฑฺฏ"
                },
                "F1+B": { 
                    name: "ุชุฑฺฉุจ F1 ู B", 
                    risk: "ุฎู ุฒุงุฏ", 
                    risk_level: 5,
                    max_consecutive_years: 2, 
                    color: "#FF7043",
                    usage: "3%",
                    description: "ุชุฑฺฉุจ ุจุงุฒุฏุงุฑูุฏู PDS ู ALS",
                    examples: ["ุงุชููู", "ฺฉุงุณฺฉ"],
                    mechanism: "ุฏู ูฺฉุงูุฒู ุนูู ูุฎุชูู",
                    resistance_status: "ุฎุทุฑ ููุงููุช ุจุงูุง",
                    application: "ุนููฺฉุดโูุง ุฏู ููุธูุฑู"
                },
                "C+F1": { 
                    name: "ุชุฑฺฉุจ C ู F1", 
                    risk: "ูุชูุณุท", 
                    risk_level: 3,
                    max_consecutive_years: 5, 
                    color: "#8D6E63",
                    usage: "2%",
                    description: "ุชุฑฺฉุจ ุจุงุฒุฏุงุฑูุฏู PSII ู PDS",
                    examples: ["ูพูุชุฑ"],
                    mechanism: "ุฏู ูฺฉุงูุฒู ุนูู ูุฎุชูู",
                    resistance_status: "ุฎุทุฑ ููุงููุช ฺฉู",
                    application: "ุนููฺฉุดโูุง ุฏู ููุธูุฑู"
                }
            },
            
            herbicides: [
                // ==================== ุจุงุฑฺฉโุจุฑฺฏโฺฉุดโูุง ====================
                {
                    id: 1,
                    trade_name: "ุงููฺฉุณุงู",
                    common_name: "ุฏฺฉูููููพ ูุชู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 36%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "**",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "-",
                        "ฺูู ูุนููู": "-"
                    },
                    notes: "ุจุฑุง ููุชุฑู ููุงู ูุญุดู ู ฺฺู ุชูุตูู ููุดูุฏ. ุชุงุซูุฑ ุขู ุจุฑ ุฎููู ูุงุด ูุชูุณุท ููุจุงุดุฏ. ูุงุจู ูุตุฑู ุฏุฑ ูุฒุงุฑุน ุฌู ููุจุงุดุฏ. ุจูุด ุงุฒ ุณู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 2,
                    trade_name: "ูพููุงุณููพุฑ",
                    common_name: "ูููฺฉุณุงูพุฑููพ-ูพ ุงุชู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "0.8-1 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EW 7.5%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ุนูู ฺูู": "***",
                        "ฺูู ูุนููู": "**",
                        "ฺฺู": "-",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-"
                    },
                    notes: "ุจุฑุง ููุชุฑู ููุงู ูุญุดูุ ุฎููู ูุงุด ู ุฏู ุฑูุจุงูู ุชูุตูู ููุดูุฏ. ุชุงุซูุฑ ุขู ุจุฑ ฺฺู ูพุงูู ููุจุงุดุฏ. ุจูุด ุงุฒ ุณู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 3,
                    trade_name: "ุชุงูพฺฉ",
                    common_name: "ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "0.8-1 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 8%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ฺฺู": "**",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "**",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-"
                    },
                    notes: "ุงููุฏุงู ุฏุฑ ูุฒุงุฑุน ุฌู ูุตุฑู ูุดูุฏ. ุจุง ฺฏุฑุงูุณุชุงุฑ ูุงุจู ุงุฎุชูุงุท ููุจุงุดุฏ. ุจูุด ุงุฒ ุณู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 4,
                    trade_name: "ุขฺฉุณุงู",
                    common_name: "ูพููฺฉุณุงุฏู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "1.2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 5%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ฺูู ูุนููู": "***",
                        "ุนูู ฺูู": "**",	
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-"
                    },
                    notes: "ุจูุดุชุฑู ุชุงุซูุฑ ุฏุฑ ููุง ฺฏุฑู ู ูุฑุทูุจ ููุจุงุดุฏ. ุจุง ุจุฑููููุณูููู ู ฺฏุฑุงูุณุชุงุฑ ูุงุจู ุงุฎุชูุงุท ููุจุงุดุฏ. ูุงุฑุจุฑุฏ ุฏุฑ ูุฒุงุฑุนู ูู ุงูููู ุนูุงุฆู ููุงููุช ุนูู ูุง ูุฑุฒ ุจู ุณุงุฑ ุนูููุดูุง ุจุงุฒุฏุงุฑูุฏู ACCase ูุดุงูุฏู ุดุฏู."
                },
                {
                    id: 5,
                    trade_name: "ุณุงูฺฉุณ BW",
                    common_name: "ููู ูพุฑููพ-ุงู ุงูุฒููพุฑููพู",
                    hrac_group: "ูุงุดูุงุฎุชู",
                    resistance_level: "ฺฉู",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "3 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 20%",
                    application_time: "ุงุฒ ุณู ุจุฑฺฏ ุชุง ุณุงูู ุฑูุชู ฺฏูุฏู",
                    chemical_family: "Unknown",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "-",
                        "ฺฺู": "-",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "-",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "-",
                        "ฺูู ูุนููู": "-"
                    },
                    notes: "ููุท ุจุฑุง ููุชุฑู ููุงู ูุญุดู ุชูุตูู ููฺฏุฑุฏุฏ. ุฑู ุฎููู ูุงุด ู ฺฺู ุชุงุซูุฑ ูุฏุงุฑุฏ. ุจูุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 6,
                    trade_name: "ุงูุงุชู-ุณุงฺฉูุฑุง",
                    common_name: "ูพุฑูฺฉุณุงุณููููู",
                    hrac_group: "K3",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "200 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WG 85%",
                    application_time: "ูพุด ุฑูุด (ูพุด ุงุฒ ุณุจุฒ ุดุฏู ุนูู ูุง ูุฑุฒ)",
                    chemical_family: "VLCFA",
                    efficiency: {
                        "ฺฺู": "***",
                        "ููุงู ูุญุด": "*",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "?",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "?",
                        "ุนูู ูพุดูฺฉ": "?",
                        "ุฌูุฏุฑู": "?",
                        "ุฌู ููุด": "?",
                        "ฺุงูุฏุงุฑ": "?",
                        "ุนูู ฺูู": "?",
                        "ฺูู ูุนููู": "?"
                    },
                    notes: "ุจุฑุง ููุชุฑู ฺฺู (ุญุณุงุณ ู ููุงูู ุจู ุจุงุฒุฏุงุฑูุฏู ูุง ACCase ู ALS) ุชูุตูู ููุดูุฏ. ุจูุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 7,
                    trade_name: "ูุฒููุงฺฉุณ",
                    common_name: "ูุฒูุณููููุฑูู ูุชู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "1.25 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "OD 3%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ฺฺู": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "?",
                        "ุนูู ูพุดูฺฉ": "?",
                        "ุฌูุฏุฑู": "?",
                        "ุฌู ููุด": "?",
                        "ฺุงูุฏุงุฑ": "?",
                        "ุนูู ฺูู": "?",
                        "ฺูู ูุนููู": "?"
                    },
                    notes: "ุชููุง ุฏุฑ ูุฒุงุฑุน ูุดฺฉูฺฉ ุจู ููุงููุช ุนูู ูุง ูุฑุฒ ุจู ุนูููุด ูุง ุจุงุฒุฏุงุฑูุฏู ACCase ุจู ุตูุฑุช ุชูุงูุจู ุงุณุชูุงุฏู ุดูุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 8,
                    trade_name: "ุชุฑุงฺฉุณูุณ",
                    common_name: "ูพููฺฉุณุงุฏู + ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "1.2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 5%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "**",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "**",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-"
                    },
                    notes: "ุจุฑุง ูุจุงุฑุฒู ุจุง ุนููโูุง ูุฑุฒ ููุงู ูุญุดุ ฺฺู ู ุฏุงูู ููุงุฑ(ุฎูู ูุงุด) ุชูุตู ูโฺฏุฑุฏุฏ. ุงุฒ ูุตุฑู ุขู ุฏุฑ ูุฒุงุฑุน ุฌู ุฎูุฏุฏุงุฑ ฺฏุฑุฏุฏ. ุจุด ุงุฒ ุณู ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 9,
                    trade_name: "ูพุฑุงูพฺฉ",
                    common_name: "ฺฉููุฏูุงูููพ ูพุฑููพุงุฑฺู",
                    hrac_group: "A",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "300 ูู ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 24%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ACCase",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ฺฺู": "**",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "**",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-"
                    },
                    notes: "ุจุฑุง ฺฉูุชุฑู ููุงู ูุญุด ู ฺฺู ุชูุตู ูโุดูุฏ. ุชุงุซุฑ ุขู ุจุฑ ุฏุงูู ููุงุฑ(ุฎูู ูุงุด) ูุชูุณุท ูโุจุงุดุฏ. ุจุด ุงุฒ ุณู ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 10,
                    trade_name: "ูพุฑุงูฺฉุณ",
                    common_name: "ุจูุฒูุฆู ูพุฑููพ - ุงุชู",
                    hrac_group: "ูุงุดูุงุฎุชู",
                    resistance_level: "ฺฉู",
                    max_consecutive_years: 10,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูุงุฒฺฉโุจุฑฺฏ"],
                    dosage: "5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 20%",
                    application_time: "ุงุฒ ุณู ุจุฑฺฏ ุชุง ุณุงูู ุฑูุชู ฺฏูุฏู",
                    chemical_family: "Unknown",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "*",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "-",
                        "ฺฺู": "-",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "-",
                        "ฺูู ูุนููู": "-"
                    },
                    notes: "ููุท ุจุฑุง ููุชุฑู ููุงู ูุญุดู ุชูุตูู ููฺฏุฑุฏุฏ. ุฑู ุฎููู ูุงุด ู ฺฺู ุชุงุซูุฑ ูุฏุงุฑุฏ. ุจูุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },

                // ==================== ูพููโุจุฑฺฏโฺฉุดโูุง ====================
                {
                    id: 11,
                    trade_name: "ู46 ุฏูููุฆุฏ",
                    common_name: "ุชูููุฑุฏ",
                    hrac_group: "O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "1-1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 72%",
                    application_time: "ุงุฒ ูพูุฌูโุฒู ุชุง ุชุดฺฉู ุณุงูู",
                    chemical_family: "Auxin",
                    efficiency: {
                        "ุชูุฎู": "***",
                        "ุขุฏูููุณ": "***",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "***",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "***",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "*",
                        "ููฺฏุฑ ุงุจูู": "**",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "**",
                        "ูุงุณุชููู": "***",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "*",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจู ุฏููู ุงุญุชูุงู ุจุงุฏุจุฑุฏฺฏูุ ุฏุฑ ุดุฑุงุท ุจุฏูู ุจุงุฏ ุณููพุงุดู ุดูุฏ. ุจูุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 12,
                    trade_name: "ู46 ฺฉูุจ ูููุฆุฏ",
                    common_name: "ุชูููุฑุฏ + ุงู ุณ ูพ ุข",
                    hrac_group: "O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "1-1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 67.5%",
                    application_time: "ุงุฒ ูพูุฌูโุฒู ุชุง ุชุดฺฉู ุณุงูู ฺฏูุฏู",
                    chemical_family: "Auxin",
                    efficiency: {
                        "ุชูุฎู": "***",
                        "ุขุฏูููุณ": "***",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "***",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "***",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "***",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "***",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "*",
                        "ููฺฏุฑ ุงุจูู": "**",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "**",
                        "ูุงุณุชููู": "***",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "*",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ููุงุฑุฏ ฺฉู ุฏุฑ ู46 ฺฉูุจ ูููุฆุฏ ฺฏูุชู ุดุฏู ุฏุฑ ููุฑุฏ ุงู ุนููฺฉุด ูุฒ ุตุงุฏู ุงุณุช. ุจุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 13,
                    trade_name: "ฺฏุฑุงูุณุชุงุฑ",
                    common_name: "ุชุฑ ุจููุฑูู ูุชู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "20-25 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "DF 75%",
                    application_time: "ุงุฒ ุงุจุชุฏุง ุชุง ุงูุชูุง ูพูุฌูโุฒู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ุชูุฎู": "*",
                        "ุขุฏูููุณ": "*",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "**",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "**",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "*",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "-",
                        "ูพูฺฺฉ ุตุญุฑุงู": "*",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "*",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "*",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "*",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "*",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "-",
                        "ููฺฏุฑ ุงุจูู": "*",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "**",
                        "ูุงุณุชููู": "**",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "**",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุฏุฑ ุงุณุชุงูโูุง ุจุง ฺฏุฒุงุฑุด ููุงููุช ุจุง ุงุญุชูุงุท ูุตุฑู ุดูุฏ. ููุท ุฏุฑ ููุฏุงุฑ ุชูุตูู ุดุฏู ูุตุฑู ุดูุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 14,
                    trade_name: "ูพุงุฑุฏูุฑ-ุจุฑูููุงู",
                    common_name: "ุจุฑูููฺฉุณูู",
                    hrac_group: "C",
                    resistance_level: "ฺฉู",
                    max_consecutive_years: 10,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 22.5%",
                    application_time: "ุงุฒ ุงุจุชุฏุง ุชุง ุงูุชูุง ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "PSII",
                    efficiency: {
                        "ุชูุฎู": "*",
                        "ุขุฏูููุณ": "**",
                        "ุณูุงู ุฏุงูู": "*",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "*",
                        "ุณุฑ ุดฺฉุงูุชู": "*",
                        "ุฏุงูู ูุฑุบ": "*",
                        "ุณููฺฉ": "**",
                        "ููฺฏุฑ ูุญุดู": "*",
                        "ฺฏูุด ุฎุฑฺฏูุด": "*",
                        "ุฒุจุงู ุฏุฑ ููุง": "*",
                        "ูพูฺฺฉ ุตุญุฑุงู": "*",
                        "ุฎุงูุดูุฑ ูุนูููู": "*",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "*",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "*",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "*",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "*",
                        "ูููุฌู ุฒุฑุฏ": "*",
                        "ูููุฏ": "*",
                        "ุดูุงู": "*",
                        "ููุช ุจูุฏ": "*",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "**",
                        "ุชุฑุดู": "-",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "**",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "*",
                        "ูุงุณุชููู": "**",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "**",
                        "ูุงุดู": "*",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ูุงุจู ุงุฎุชูุงุท ุจุง ุณููู ุจุงุฑฺฉ ุจุฑฺฏ ูุด ุงุณุช. ุฏุฑ ูุญู ูุง ุจุง ุงุญุชูุงู ุจุงุฏุจุฑุฏฺฏู ู ููฺููู ูุฒุงุฑุน ุชุญุช ุชูุด ูุง ุขุจู ูุตุฑู ูุดูุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 15,
                    trade_name: "ุจุฑููุงุณุฏ ุงู ุข",
                    common_name: "ุจุฑูููฺฉุณูู + ุงู ุณ ูพ ุข",
                    hrac_group: "C+O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 40%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ุชูุฎู": "***",
                        "ุขุฏูููุณ": "***",
                        "ุณูุงู ุฏุงูู": "***",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "*",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "***",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "*",
                        "ููฺฏุฑ ุงุจูู": "*",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "*",
                        "ูุงุณุชููู": "**",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "*",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ูุงุจู ุงุฎุชูุงุท ุจุง ูุดูุฏู ุจุฑฺฏ ูุด ูุง ฺฏูุฏู ุฑุง ุฏุงุฑุฏ. ุจุฑุง ููุชุฑู ุงุฑุดุชู ุฎุทุงู ููุงุณุจ ุงุณุช. ุจูุด ุงุฒ ูพูุฌ ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 16,
                    trade_name: "ุฏููพูุณุงู ุณููพุฑ",
                    common_name: "ููููพุฑููพ ูพ + ฺฉูุฑูููููพุฑููพ + ุงู ุณ ูพ ุข",
                    hrac_group: "O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 60%",
                    application_time: "ุงุฒ ูพูุฌ-ุดุด ุจุฑฺฏ ุชุง ุณุงูู ุฑูุชู ฺฏูุฏู",
                    chemical_family: "Auxin",
                    efficiency: {
                        "ุชูุฎู": "**",
                        "ุขุฏูููุณ": "***",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "***",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "**",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "*",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "***",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "***",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "*",
                        "ููฺฏุฑ ุงุจูู": "**",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "**",
                        "ูุงุณุชููู": "**",
                        "ุฌุบุฌุบู": "**",
                        "ุณูุฒุงุจ": "**",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุฏุฑ ูุฒุงุฑุน ฺฏูุฏู ููุฌูุงุฑ ุจุง ูุญุตููุงุช ุญุณุงุณ ูุงููุฏ ุฏุฑุฎุชุงู ุงูฺฏูุฑุ ฺฏูุฌู ูุฑูฺฏ ู ูพูุจูุ ุณููพุงุด ุฏุฑ ุดุฑุงุท ุจุฏูู ุจุงุฏ ุตูุฑุช ฺฏุฑุฏ. ุฏุณุชฺฏุงู ุณููพุงุด ูพุณ ุงุฒ ุงุณุชูุงุฏู ุจุง ุดููุฏูโูุง ุดุณุชุดู ุดูุฏ."
                },
                {
                    id: 17,
                    trade_name: "ููฺฏุฑุงู ุงฺฉุณุชุฑุง",
                    common_name: "ุชุฑุจูุชูุฑูู + ุฏูุณููููุฑูู",
                    hrac_group: "B+C",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "200-250 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WG 64%",
                    application_time: "ุงุฒ ูุจู ุงุฒ ฺฉุงุดุช ุชุง ุงูุงุณุท ูพูุฌูโุฒู (ูพุด ุฑูุด ู ูพุณ ุฑูุด)",
                    chemical_family: "ALS",
                    efficiency: {
                        "ุชูุฎู": "*",
                        "ุขุฏูููุณ": "*",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "*",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "**",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "*",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "*",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "**",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "**",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "*",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "**",
                        "ุดุงู ุชุฑู": "*",
                        "ุจู ุชู ุฑุงุฎ": "-",
                        "ุดูุฑูู ุจูุงู": "*",
                        "ูุงุฎูู": "**",
                        "ุบุฑุจููู": "*",
                        "ุฎูุฑ": "*",
                        "ุงุฑุดุชู ุฎุทุงู": "**",
                        "ูุงููุดุงู": "**",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "*",
                        "ูููุฏ": "**",
                        "ุดูุงู": "*",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "***",
                        "ุชุฑุจฺู ูุญุดู": "**",
                        "ุชุฑุดู": "?",
                        "ฺฉูฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจูุชุฑู ูุชุฌู ุฒูุงู ุญุงุตู ู ุดูุฏ ฺฉู ุฏุฑ ูุฑุงุญู ูุจู ุง ุจุนุฏ ุงุฒ ุณููพุงุดุ ุฎุงฺฉ ูุฑุทูุจ ุจุงุดุฏ. ฺฉุงุฑุจุฑุฏ ุขู ุฏุฑ ุฎุงฺฉ ุบุฑูุงุจ ุดุฏู ุชูุตู ูู ุดูุฏ."
                },
                {
                    id: 18,
                    trade_name: "ุฏุงูู ุณููพุฑ",
                    common_name: "ุฏฺฉุงูุจุง + ุชูููุฑุฏ",
                    hrac_group: "O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "0.8 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 46.4%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Auxin",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "***",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "**",
                        "ุณุฑ ุดฺฉุงูุชู": "***",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "***",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "***",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ฺฉูฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุชุงุซุฑ ููุงุณุจ ุฏุฑ ฺฉูุชุฑู ุงุฑุดุชู ุฎุทุง ุฏุงุฑุฏ. ุฏุฑ ูุฒุงุฑุน ฺฏูุฏู ููุฌูุงุฑ ุจุง ฺฉุดุชโูุง ุญุณุงุณุ ุฏุฑ ุดุฑุงุท ุจุฏูู ุจุงุฏ ุณููพุงุด ุดูุฏ. ุดุณุชุดู ุณููพุงุด ูพุณ ุงุฒ ูุตุฑู ุจุง ุดููุฏู ุถุฑูุฑ ุงุณุช."
                },
                {
                    id: 19,
                    trade_name: "ููุชูุฑ",
                    common_name: "ุฏฺฉุงูุจุง + ุชุฑุงุณููููุฑูู",
                    hrac_group: "B+O",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "165 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WG 70%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "**",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "**",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "*",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "**",
                        "ูพููุฑู": "*",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "*",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ฺฉูฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจุง ุชูุฌู ุจู ุฎุงููุงุฏู ุดูุง ูุชูุงูุช ุจุง ฺฏุฑุงูุณุชุงุฑุ ูโุชูุงูุฏ ุฌุงฺฏุฒู ุจุฑุง ุงู ุนููฺฉุด ุจุงุดุฏ. ุจุด ุงุฒ ุฏู ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 20,
                    trade_name: "ุจูฺฉุชุฑู ูููุฑุณุงู",
                    common_name: "ุชูููุฑุฏ + ุจุฑูููฺฉุณูู",
                    hrac_group: "C+O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "1.25-1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 56%",
                    application_time: "ุงุฒ ุฏู ุจุฑฺฏ ุชุง ุณุงูู ุฑูุชู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "?",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "?",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "***",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "?",
                        "ฺฏูุด ุฎุฑฺฏูุด": "?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "***",
                        "ุฎุงูุดูุฑ ูุนูููู": "?",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "***",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "***",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบฺฉ": "***",
                        "ฺฏูุฏูู": "***",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "***",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจุง ุฏุฒ ูุตุฑู 1.25 ุชุง 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ ูุงุฏุฑ ุจู ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ูพููโุจุฑฺฏ ูโุจุงุดุฏ. ุจุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ุณูุฌ ูุธุฑ ุงุฑุดุชู ุฎุทุงุ ูพฺฺฉ ุตุญุฑุงุ ุจโุช ุฑุงุฎ ููุฏุงุฑ 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ ุชูุตู ูโุดูุฏ."
                },
                {
                    id: 21,
                    trade_name: "ุจุงุฒุงฺฏุฑุงู ุฏ ูพ",
                    common_name: "ุจูุชุงุฒูู + ุฏฺฉูููพุฑููพ",
                    hrac_group: "C+O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SL 56.6%",
                    application_time: "ุงุฒ ุฏู ุจุฑฺฏ ุชุง ุณุงูู ุฑูุชู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "?",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "*?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "***",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "***",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "***",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "",
                        "ูููุฌู ุฒุฑุฏ": "***",
                        "ูููุฏ": "?",
                        "ุดูุงู": "***",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "***",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "***",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "**",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "***",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "***",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจุง ุฏุฒ ูุตุฑู 2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ ูุงุฏุฑ ุจู ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ูพููโุจุฑฺฏ ูโุจุงุดุฏ. ุฏุฑ ุตูุฑุช ูุฌูุฏ ุนููโูุง ูุฑุฒ ุณูุฌ ูโุชูุงู ููุฏุงุฑ ุงู ุนููฺฉุด ุฑุง ุชุง 2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ ุงูุฒุงุด ุฏุงุฏ. ุชุงุซุฑ ููุงุณุจ ุฏุฑ ฺฉูุชุฑู ุงุฑุดุชู ุฎุทุง ุฏุงุฑุฏ."
                },
                {
                    id: 22,
                    trade_name: "ฺฉุงูู ูููุฑฺฉุณ",
                    common_name: "ูููุฑูฺฉุณ ูพุฑ",
                    hrac_group: "O",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "2-2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 20%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Auxin",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "***",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "***",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "***",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "?",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "***",
                        "ฺฏูุด ุฎุฑฺฏูุด": "?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "?",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "***",
                        "ุฎูุฑ": "***",
                        "ุงุฑุดุชู ุฎุทุงู": "***",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "***",
                        "ููุช ุจูุฏ": "?",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "***",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "***",
                        "ูุงุณุชููู": "***",
                        "ุฌุบุฌุบะบ": "***",
                        "ุณูุฒุงุจ": "***",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุชุงุซุฑ ููุงุณุจ ุฑู ุจุฑุฎ ุนููโูุง ูุฑุฒ ุณูุฌ ูุงููุฏ ุจโุช ุฑุงุฎ ู ูพฺฺฉ ุตุญุฑุง ุฏุงุฑุฏ. ุจุง ุชูุฌู ุจู ุฎุงููุงุฏู ุดูุง ูุชูุงูุช ุจุง ฺฏุฑุงูุณุชุงุฑุ ูโุชูุงูุฏ ุฌุงฺฏุฒู ุจุฑุง ุงู ุนููฺฉุด ุจุงุดุฏ."
                },
                {
                    id: 23,
                    trade_name: "ูููุฑฺฉุณ",
                    common_name: "ูููุฑุงุณููุงู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "85 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WP 10%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ุชูุฎู": "**",
                        "ุขุฏูููุณ": "",
                        "ุณูุงู ุฏุงูู": "",
                        "ูุงู": "",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "",
                        "ฺุบูุฏุฑ ูุญุด": "",
                        "ููุณู ูุดูุด": "",
                        "ุงุฒูฺฉ": "",
                        "ฺฏูุฑูฺฏ ูุญุดู": "",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "",
                        "ุฏุงูู ูุฑุบ": "",
                        "ุณููฺฉ": "",
                        "ููฺฏุฑ ูุญุดู": "",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "",
                        "ูพูฺฺฉ ุตุญุฑุงู": "***",
                        "ุฎุงูุดูุฑ ูุนูููู": "-",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "",
                        "ุดุงู ุชุฑู": "*",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "**",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "-",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "-",
                        "ฺฏูุฏูู": "***",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "**",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "***",
                        "ุฏู ุนูุฑุจู": "***",
                        "ุขูุงูู ูุญุดู": "***"
                    },
                    notes: "ุชุงุซูุฑ ููุงุณุจ ุฑู ุจุฑุฎู ุนูู ูุง ูุฑุฒ ุณูุฌ ูุงููุฏ ุจู ุชู ุฑุงุฎ ู ูพูฺฺฉ ุตุญุฑุงู ุฏุงุฑุฏ. ุจุง ุชูุฌู ุจู ุฎุงููุงุฏู ุดูููุงู ูุชูุงูุช ุจุง ฺฏุฑุงูุณุชุงุฑุ ููุชูุงูุฏ ุฌุงฺฏุฒูู ุจุฑุง ุงู ุนูููุด ุจุงุดุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 24,
                    trade_name: "ุณุฒุงุฑ",
                    common_name: "ูููุฑุงุณููุงู + ุชูููุฑุฏ",
                    hrac_group: "B+O",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "0.8 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SC 45.9%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "?",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "?",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "?",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "?",
                        "ููฺฏุฑ ูุญุดู": "?",
                        "ฺฏูุด ุฎุฑฺฏูุด": "?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "?",
                        "ุฎุงูุดูุฑ ูุนูููู": "?",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "?",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "?",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "?",
                        "ุฎุฑุฏู ูุญุดู": "?",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจู ุฏูู ุงุญุชูุงู ุจุงุฏุจุฑุฏฺฏุ ุฏุฑ ูุฒุงุฑุน ฺฏูุฏู ููุฌูุงุฑ ุจุง ูุญุตููุงุช ุญุณุงุณุ ุฏุฑ ุดุฑุงุท ุจุฏูู ุจุงุฏ ุณููพุงุด ุดูุฏ. ูพุณ ุงุฒ ุณููพุงุดุ ุดุณุชุดู ุณููพุงุด ุทุจู ุฏุณุชูุฑุงูุนููโูุง ูุฑุจูุทู ุถุฑูุฑ ุงุณุช."
                },
                {
                    id: 25,
                    trade_name: "ูุงฺฉุณู",
                    common_name: "ููููุชุณููุงู + ูููุฑุงุณููุงู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "60 ููโูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SC 17.5%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "?",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "?",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "?",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "?",
                        "ููฺฏุฑ ูุญุดู": "?",
                        "ฺฏูุด ุฎุฑฺฏูุด": "?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "?",
                        "ุฎุงูุดูุฑ ูุนูููู": "?",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "?",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "?",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "?",
                        "ุฎุฑุฏู ูุญุดู": "?",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจุง ุชูุฌู ุจู ุฎุงููุงุฏู ุดูุง ูุชูุงูุช ุจุง ฺฏุฑุงูุณุชุงุฑุ ูโุชูุงูุฏ ุฌุงฺฏุฒู ุจุฑุง ุงู ุนููฺฉุด ุจุงุดุฏ. ุจุด ุงุฒ ุฏู ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 26,
                    trade_name: "ุฒููฺฏโู",
                    common_name: "ูููุฑุงุณููุงู + ุงู ุณ ูพ ุข",
                    hrac_group: "B+O",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ูพููโุจุฑฺฏ"],
                    dosage: "500-600 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WP 42%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "?",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "?",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "?",
                        "ฺฏู ฺฏูุฏู": "?",
                        "ุณุฑ ุดฺฉุงูุชู": "?",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "?",
                        "ููฺฏุฑ ูุญุดู": "?",
                        "ฺฏูุด ุฎุฑฺฏูุด": "?",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "?",
                        "ุฎุงูุดูุฑ ูุนูููู": "?",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "?",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "?",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "?",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "?",
                        "ุฎุฑุฏู ูุญุดู": "?",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุดุจู ุงฺฉุณู + ุจุงุฒุฏุงุฑูุฏู ALS. ุจุด ุงุฒ ุฏู ุณุงู ูุชูุงู ุฏุฑ ฺฉ ูุฒุฑุนู ุงุณุชูุงุฏู ูุดูุฏ."
                },

                // ==================== ุนููฺฉุดโูุง ุฏู ููุธูุฑู ====================
                {
                    id: 27,
                    trade_name: "ุขูพุฑูุณ",
                    common_name: "ุณููููุณููููุฑูู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "26.6 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WG 75%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู (ุจุฑุง ฺฉูุชุฑู ุฌูุฏุฑู ุฏุฑ ูุฑุญูู ฺฏุฑู ุฏูู ุณุงูู ุฌูุฏุฑู)",
                    chemical_family: "ALS",
                    efficiency: {
                        "ููุงู ูุญุด": "**",
                        "ฺฺู": "-",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "*",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "*",
                        "ุนูู ูพุดูฺฉ": "***",
                        "ุฌูุฏุฑู": "**",
                        "ุฌู ููุด": "***",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "*",
                        "ุชูุฎู": "*",
                        "ุขุฏูููุณ": "*",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "*",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "**",
                        "ููุณู ูุดูุด": "**",
                        "ุงุฒูฺฉ": "*",
                        "ฺฏูุฑูฺฏ ูุญุดู": "*",
                        "ฺฏู ฺฏูุฏู": "*",
                        "ุณุฑ ุดฺฉุงูุชู": "*",
                        "ุฏุงูู ูุฑุบ": "*",
                        "ุณููฺฉ": "**",
                        "ููฺฏุฑ ูุญุดู": "*",
                        "ฺฏูุด ุฎุฑฺฏูุด": "**",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "*",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "**",
                        "ุดุงู ุชุฑู": "*",
                        "ุจู ุชู ุฑุงุฎ": "*",
                        "ุดูุฑูู ุจูุงู": "*",
                        "ูุงุฎูู": "**",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "-",
                        "ูุงููุดุงู": "**",
                        "ูพููุฑู": "-",
                        "ูููุฌู ุฒุฑุฏ": "*",
                        "ูููุฏ": "*",
                        "ุดูุงู": "*",
                        "ููุช ุจูุฏ": "*",
                        "ููุช ุจูุฏ ูพูฺ": "*",
                        "ุชุฑุจฺู ูุญุดู": "**",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "*",
                        "ุดููู": "**",
                        "ุฎุฑุฏู ูุญุดู": "**",
                        "ุฎุงูุดูุฑ ุชูุฎ": "**",
                        "ุดูุฑ ุชูุบู": "**",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "**",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุฏุฑ ููุงุฑุฏ ฺฉู ุนูู ูุฑุฒ ุบุงูุจ ูุฒุฑุนู ููุงู ูุญุด ู ุฌูุฏุฑู ุจุงุดุฏุ ุชูุตู ฺฏุฑุฏุฏ. ุงุฒ ูุตุฑู ุฏุฑ ูุฒุงุฑุน ุฌู ุฌุฏุงู ุฎูุฏุฏุงุฑ ุดูุฏ. ุงุฒ ูุตุฑู ูุชูุงู ุจุด ุงุฒ ุฏู ุณุงู/ุจุงุฑ ุจุฏูู ุฎุทุฑ ุจุฑูุฒ ููุงููุช ุงุฌุชูุงุจ ุดูุฏ."
                },
                {
                    id: 28,
                    trade_name: "ุขุชูุงูุชุณ",
                    common_name: "ูุฒูุณููููุฑูู + ุฏูุณููููุฑูู ูุชู ุณุฏู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "OD 1.2%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "ALS",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "**",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "***",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "**",
                        "ุชูุฎู": "**",
                        "ุขุฏูููุณ": "*",
                        "ุณูุงู ุฏุงูู": "**",
                        "ูุงู": "***",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "**",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "**",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "***",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "**",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "***",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "**",
                        "ุฎุงูุดูุฑ ุชูุฎ": "**",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ููุท ุฏุฑ ููุงุฑุฏ ูู ููุงููุช ุนูู ูุง ูุฑุฒ ุจุงุฑฺฉ ุจุฑฺฏ ุจู ุนูููุด ูุง ุจุงุฒุฏุงุฑูุฏู ACCase ูุฌูุฏ ุฏุงุฑุฏุ ุจุง ุฑุนุงุช ุชูุงูุจ ุนูููุด ูุง ูุตุฑู ุดูุฏ. ุงุฒ ูุตุฑู ุฏุฑ ูุฒุงุฑุน ุฌู ู ุบูุฑ ฺฏูุฏู ุฎูุฏุฏุงุฑ ฺฏุฑุฏุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 29,
                    trade_name: "ุชูุชุงู",
                    common_name: "ูุฒูุณููููุฑูู + ุณููููุณููููุฑูู",
                    hrac_group: "B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "40-50 ฺฏุฑู + 1250 ููโูุชุฑ ูุงุฏู ููุฑุงู ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "WG 80%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู (ุจุฑุง ฺฉูุชุฑู ุฌูุฏุฑู ุฏุฑ ูุฑุญูู ฺฏุฑู ุฏูู ุณุงูู ุฌูุฏุฑู)",
                    chemical_family: "ALS",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "**",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "**",
                        "ุนูู ูพุดูฺฉ": "***",
                        "ุฌูุฏุฑู": "**",
                        "ุฌู ููุด": "***",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "*",
                        "ุชูุฎู": "*",
                        "ุขุฏูููุณ": "*",
                        "ุณูุงู ุฏุงูู": "***",
                        "ูุงู": "**",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "**",
                        "ฺุบูุฏุฑ ูุญุด": "**",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "**",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "**",
                        "ุฏุงูู ูุฑุบ": "*",
                        "ุณููฺฉ": "**",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "**",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "**",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "**",
                        "ุดุงู ุชุฑู": "*",
                        "ุจู ุชู ุฑุงุฎ": "**",
                        "ุดูุฑูู ุจูุงู": "*",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "**",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "**",
                        "ูพููุฑู": "*",
                        "ูููุฌู ุฒุฑุฏ": "**",
                        "ูููุฏ": "**",
                        "ุดูุงู": "**",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "***",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "***",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุฏุฑ ููุงุฑุฏ ฺฉู ุนูู ูุฑุฒ ุบุงูุจ ูุฒุฑุนู ููุงู ูุญุด ู ุฌูุฏุฑู ุจุงุดุฏ ุชูุตู ฺฏุฑุฏุฏ. ุงุฒ ูุตุฑู ุฏุฑ ูุฒุงุฑุน ุฌู ุฌุฏุงู ุฎูุฏุฏุงุฑ ฺฏุฑุฏุฏ. ุฏุงุฑุง ุญุฑฺฉุช ุฒุงุฏ ุฏุฑ ุฎุงฺฉ ุจูุฏูุ ูุฐุง ุฏุฑ ุดุฑุงุท ุฎุงุต ุณุจุจ ุงุฌุงุฏ ุฎุณุงุฑุช ุจู ูุญุตููุงุช ุญุณุงุณ ุงุทุฑุงู ุง ุฏุฑ ุชูุงูุจ ูุธุฑ ุขูุชุงุจฺฏุฑุฏุงูุ ุณูุงุ ุณูุฑฺฏููุ ฺุบูุฏุฑููุฏ ู ฺฉูุฒุง ูโุดูุฏ."
                },
                {
                    id: 30,
                    trade_name: "ูพูุชุฑ",
                    common_name: "ุงุฒููพุฑูุชุฑูู + ุฏฺฉููููฺฉุงู",
                    hrac_group: "C+F1",
                    resistance_level: "ูุชูุณุท",
                    max_consecutive_years: 5,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "2-2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "SC 55%",
                    application_time: "ูพุณ ุงุฒ ฺฉุดุช ู ูุจู ุงุฒ ุณุจุฒ ุดุฏู ฺฏูุฏู (ูพุด ุฑูุด)",
                    chemical_family: "PDS",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "*",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "",
                        "ุนูู ูพุดูฺฉ": "",
                        "ุฌูุฏุฑู": "",
                        "ุฌู ููุด": "",
                        "ฺุงูุฏุงุฑ": "",
                        "ุนูู ฺูู": "",
                        "ฺูู ูุนููู": "",
                        "ุชูุฎู": "-",
                        "ุขุฏูููุณ": "-",
                        "ุณูุงู ุฏุงูู": "*",
                        "ูุงู": "*",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "?",
                        "ฺุบูุฏุฑ ูุญุด": "?",
                        "ููุณู ูุดูุด": "**",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "*",
                        "ฺฏู ฺฏูุฏู": "-",
                        "ุณุฑ ุดฺฉุงูุชู": "*",
                        "ุฏุงูู ูุฑุบ": "*",
                        "ุณููฺฉ": "**",
                        "ููฺฏุฑ ูุญุดู": "-",
                        "ฺฏูุด ุฎุฑฺฏูุด": "*",
                        "ุฒุจุงู ุฏุฑ ููุง": "?",
                        "ูพูฺฺฉ ุตุญุฑุงู": "-",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "**",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "?",
                        "ุดูุฑูู ุจูุงู": "-",
                        "ูุงุฎูู": "**",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "?",
                        "ูพููุฑู": "?",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "**",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "?",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "",
                        "ุชุฑุดู": "?",
                        "ฺฉูฺฏุฑ ุงุจูู": "**",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "?",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุจูุชุฑู ูุชุฌู ุฒูุงู ุญุงุตู ู ุดูุฏ ฺฉู ุฏุฑ ูุฑุงุญู ูุจู ุง ุจุนุฏ ุงุฒ ุณููพุงุดุ ุฎุงฺฉ ูุฑุทูุจ ุจุงุดุฏ. ฺฉุงุฑุจุฑุฏ ุขู ุฏุฑ ุฎุงฺฉ ุบุฑูุงุจ ุดุฏู ุชูุตู ูู ุดูุฏ."
                },
                {
                    id: 31,
                    trade_name: "ุงุชููู",
                    common_name: "ูุฒูุณููููุฑูู ูุชู + ุฏูุณููููุฑูู ูุชู ุณุฏู + ุฏฺฉููููฺฉุงู",
                    hrac_group: "F1+B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "1.6 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "OD 6%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ุนูู ูพุดูฺฉ": "?",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "?",
                        "ฺุงูุฏุงุฑ": "?",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "**",
                        "ุชูุฎู": "?",
                        "ุขุฏูููุณ": "?",
                        "ุณูุงู ุฏุงูู": "?",
                        "ูุงู": "***",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "***",
                        "ฺุบูุฏุฑ ูุญุด": "***",
                        "ููุณู ูุดูุด": "***",
                        "ุงุฒูฺฉ": "?",
                        "ฺฏูุฑูฺฏ ูุญุดู": "**",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "***",
                        "ุฏุงูู ูุฑุบ": "?",
                        "ุณููฺฉ": "***",
                        "ููฺฏุฑ ูุญุดู": "**",
                        "ฺฏูุด ุฎุฑฺฏูุด": "***",
                        "ุฒุจุงู ุฏุฑ ููุง": "***",
                        "ูพูฺฺฉ ุตุญุฑุงู": "**",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "***",
                        "ุดุงู ุชุฑู": "?",
                        "ุจู ุชู ุฑุงุฎ": "***",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "***",
                        "ุบุฑุจููู": "**",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "*",
                        "ูุงููุดุงู": "***",
                        "ูพููุฑู": "***",
                        "ูููุฌู ุฒุฑุฏ": "***",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "***",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "**",
                        "ุดููู": "***",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "***",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "?",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "?",
                        "ูุงุดู": "***",
                        "ุดุงู ุชุฑู ุง": "?",
                        "ุฎุฑุฏู ูุงุฐุจ": "?",
                        "ุฎุฑุฏู ุงุจ ูุงู": "?",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุงุฒ ูุตุฑู ุงุชููู ุฏุฑ ูุฒุงุฑุน ุฌู ู ุบูุฑ ฺฏูุฏู ุฎูุฏุฏุงุฑ ุดูุฏ. ุงุฒ ูุตุฑู ุขู ุฏุฑ ุดุฑุงุท ุชูุด (ุจูฺู ุณุฑูุง ู ุฎุดฺฉู) ุฌุฏุงู ูพุฑููุฒ ุดูุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 32,
                    trade_name: "ุขฺฉุณุงู ูุงู",
                    common_name: "ูพููฺฉุณุงุฏู + ูููุฑุงุณููุงู",
                    hrac_group: "A+B",
                    resistance_level: "ุฒุงุฏ",
                    max_consecutive_years: 3,
                    crop_compatibility: ["ฺฏูุฏู", "ุฌู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    formulation: "EC 5%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ููุงู ูุญุด": "***",
                        "ฺฺู": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "**",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "***",
                        "ุนูู ูพุดูฺฉ": "-",
                        "ุฌูุฏุฑู": "-",
                        "ุฌู ููุด": "-",
                        "ฺุงูุฏุงุฑ": "-",
                        "ุนูู ฺูู": "**",
                        "ฺูู ูุนููู": "***",
                        "ุชูุฎู": "",
                        "ุขุฏูููุณ": "",
                        "ุณูุงู ุฏุงูู": "",
                        "ูุงู": "",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "",
                        "ฺุบูุฏุฑ ูุญุด": "",
                        "ููุณู ูุดูุด": "",
                        "ุงุฒูฺฉ": "",
                        "ฺฏูุฑูฺฏ ูุญุดู": "*",
                        "ฺฏู ฺฏูุฏู": "*",
                        "ุณุฑ ุดฺฉุงูุชู": "",
                        "ุฏุงูู ูุฑุบ": "",
                        "ุณููฺฉ": "",
                        "ููฺฏุฑ ูุญุดู": "",
                        "ฺฏูุด ุฎุฑฺฏูุด": "-",
                        "ุฒุจุงู ุฏุฑ ููุง": "",
                        "ูพูฺฺฉ ุตุญุฑุงู": "-",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "",
                        "ุดุงู ุชุฑู": "**",
                        "ุจู ุชู ุฑุงุฎ": "-",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "-",
                        "ูพููุฑู": "**",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "?",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "-",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "**",
                        "ฺฏูุฏูู": "-",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "**",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "***",
                        "ุฎุฑุฏู ูุงุฐุจ": "**",
                        "ุฎุฑุฏู ุงุจ ูุงู": "***",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ูุงุฑุขู ููุงุณุจู ุฑู ุนูู ูุง ูุฑุฒ ุจุงุฑฺฉ ุจุฑฺฏ ุจูฺู ููุงู ูุญุดู ู ฺฺู ู ููฺููู ุนูู ูุง ูุฑุฒ ูพูู ุจุฑฺฏ ุฎุงููุงุฏู ุดุจ ุจู ู ููุช ุจูุฏ ุฏุงุฑุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุงุณุชูุงุฏู ูุดูุฏ."
                },
                {
                    id: 33,
                    trade_name: "ฺฉุงุณฺฉ",
                    common_name: "ุฏฺฉููููฺฉุงู + ุฏูุณููููุฑูู ูุชู ุณุฏู + ูููุฑุงุณููุงู",
                    hrac_group: "F1+B",
                    resistance_level: "ุฎู ุฒุงุฏ",
                    max_consecutive_years: 2,
                    crop_compatibility: ["ฺฏูุฏู"],
                    control_scope: ["ุฏู ููุธูุฑู"],
                    dosage: "200 ฺฏุฑู + 1 ูุชุฑ ููุงู ุณุชูฺฏุช",
                    formulation: "WG 47%",
                    application_time: "ุงุฒ ุงูู ุชุง ูพุงุงู ูพูุฌูโุฒู ฺฏูุฏู",
                    chemical_family: "Combination",
                    efficiency: {
                        "ููุงู ูุญุด": "**",
                        "ฺฺู": "***",
                        "ุฏุงูู ููุงุฑ(ุฎูู ูุงุด)": "?",
                        "ุฏู ุฑูุจุงู ูุดูุฏู": "?",
                        "ุนูู ูพุดูฺฉ": "?",
                        "ุฌูุฏุฑู": "?",
                        "ุฌู ููุด": "?",
                        "ฺุงูุฏุงุฑ": "?",
                        "ุนูู ฺูู": "?",
                        "ฺูู ูุนููู": "?",
                        "ุชูุฎู": "",
                        "ุขุฏูููุณ": "",
                        "ุณูุงู ุฏุงูู": "",
                        "ูุงู": "",
                        "ุณููฺฉ ุจุฑฺฏ ูพูุงู": "",
                        "ฺุบูุฏุฑ ูุญุด": "",
                        "ููุณู ูุดูุด": "",
                        "ุงุฒูฺฉ": "",
                        "ฺฏูุฑูฺฏ ูุญุดู": "***",
                        "ฺฏู ฺฏูุฏู": "***",
                        "ุณุฑ ุดฺฉุงูุชู": "",
                        "ุฏุงูู ูุฑุบ": "",
                        "ุณููฺฉ": "",
                        "ููฺฏุฑ ูุญุดู": "",
                        "ฺฏูุด ุฎุฑฺฏูุด": "-",
                        "ุฒุจุงู ุฏุฑ ููุง": "",
                        "ูพูฺฺฉ ุตุญุฑุงู": "-",
                        "ุฎุงูุดูุฑ ูุนูููู": "***",
                        "ูููุงุฑ ูฺฉ ูฺฉ ูุฑุฒ": "",
                        "ุดุงู ุชุฑู": "***",
                        "ุจู ุชู ุฑุงุฎ": "-",
                        "ุดูุฑูู ุจูุงู": "?",
                        "ูุงุฎูู": "?",
                        "ุบุฑุจููู": "?",
                        "ุฎูุฑ": "?",
                        "ุงุฑุดุชู ุฎุทุงู": "?",
                        "ูุงููุดุงู": "-",
                        "ูพููุฑู": "***",
                        "ูููุฌู ุฒุฑุฏ": "?",
                        "ูููุฏ": "?",
                        "ุดูุงู": "?",
                        "ููุช ุจูุฏ": "***",
                        "ููุช ุจูุฏ ูพูฺ": "?",
                        "ุชุฑุจฺู ูุญุดู": "?",
                        "ุชุฑุดู": "?",
                        "ููฺฏุฑ ุงุจูู": "?",
                        "ุดููู": "-",
                        "ุฎุฑุฏู ูุญุดู": "***",
                        "ุฎุงูุดูุฑ ุชูุฎ": "?",
                        "ุดูุฑ ุชูุบู": "***",
                        "ฺฏูุฏูู": "-",
                        "ูุงุณุชููู": "?",
                        "ุฌุบุฌุบู": "?",
                        "ุณูุฒุงุจ": "***",
                        "ูุงุดู": "?",
                        "ุดุงู ุชุฑู ุง": "***",
                        "ุฎุฑุฏู ูุงุฐุจ": "***",
                        "ุฎุฑุฏู ุงุจ ูุงู": "***",
                        "ุขูุงุบุงููุณ": "?",
                        "ุฏู ุนูุฑุจู": "?",
                        "ุขูุงูู ูุญุดู": "?"
                    },
                    notes: "ุนูุงูู ุจุฑ ูุงุฑุขู ููุงุณุจ ุฑู ุนูู ูุง ูุฑุฒ ุจุงุฑฺฉ ุจุฑฺฏุ ุฏุฑ ููุงุฑ ุนูู ูุง ูุฑุฒ ูพูู ุจุฑฺฏ ููุฒ ููุซุฑ ูู ุจุงุดุฏ. ุงุฒ ูุตุฑู ุขู ุฏุฑ ุดุฑุงุท ุชูุด (ุจูฺู ุณุฑูุง ู ุฎุดฺฉู) ุฌุฏุงู ูพุฑููุฒ ุดูุฏ. ุจูุด ุงุฒ ุฏู ุณุงู ูุชูุงูู ุงุณุชูุงุฏู ูุดูุฏ."
                }
            ],

            // ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท ุงุฒ ุฌุฏูู ต ุฏุณุชูุฑุงูุนูู (ุตูุญู ฑต)
            approved_mixtures: [
                {
                    id: 1,
                    name: "ุงุชููู + ุจุงุฒุงฺฏุฑุงู ุฏ ูพ",
                    combination: "ุงุชููู (OD 6%) 1.6 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุงุฒุงฺฏุฑุงู ุฏ ูพ (EC 56.6%) 1 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุณูุฌ ูุงููุฏ ูพูุฑฺฉุ ุงุฑุดุชู ุฎุทุงุ ูพฺฺฉ ุจูุฏุ ููุฌู ุจุงุบ ู ุจุงุจููู",
                    notes: "ุจุฑุง ุงูุฒุงุด ฺฉุงุฑุง ุฏุฑ ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ุณุฎุชโฺฉูุชุฑู",
                    compatible_with: ["ุงุชููู", "ุจุงุฒุงฺฏุฑุงู ุฏ ูพ"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 2,
                    name: "ุงุชููู + ุจุฑฺฉุชุฑู ูููุฑุณุงู",
                    combination: "ุงุชููู (OD 6%) 1.6 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุฑฺฉุชุฑู ูููุฑุณุงู (EC 56%) 0.75 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ููุงูู",
                    notes: "ุชุฑฺฉุจ ููุซุฑ ุจุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ุณูุฌ",
                    compatible_with: ["ุงุชููู", "ุจุฑฺฉุชุฑู ูููุฑุณุงู"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 3,
                    name: "ุงุชููู + ฺฉุงูู ูููุฑฺฉุณ",
                    combination: "ุงุชููู (OD 6%) 1.6 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ฺฉุงูู ูููุฑฺฉุณ (EC 20%) 1.25 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ุณุฎุช",
                    notes: "ุชุฑฺฉุจ ุจุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ุจุง ููุงููุช ุจุงูุง",
                    compatible_with: ["ุงุชููู", "ฺฉุงูู ูููุฑฺฉุณ"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 4,
                    name: "ุงุชููู + ุจุฑููุงุณุฏ ุงู ุข",
                    combination: "ุงุชููู (OD 6%) 1.6 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุฑููุงุณุฏ ุงู ุข (EC 40%) 1.75 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุจุฑุฎ ุจุงุฑฺฉ ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ุทู ูุณุน ฺฉูุชุฑู",
                    compatible_with: ["ุงุชููู", "ุจุฑููุงุณุฏ ุงู ุข"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 5,
                    name: "ุขุชูุงูุชุณ + ุจุงุฒุงฺฏุฑุงู ุฏ ูพ",
                    combination: "ุขุชูุงูุชุณ (OD 1.2%) 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุงุฒุงฺฏุฑุงู ุฏ ูพ (EC 56.6%) 1 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุณูุฌ",
                    notes: "ุชุฑฺฉุจ ุจุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ููุงูู",
                    compatible_with: ["ุขุชูุงูุชุณ", "ุจุงุฒุงฺฏุฑุงู ุฏ ูพ"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 6,
                    name: "ุขุชูุงูุชุณ + ุจุฑฺฉุชุฑู ูููุฑุณุงู",
                    combination: "ุขุชูุงูุชุณ (OD 1.2%) 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุฑฺฉุชุฑู ูููุฑุณุงู (EC 56%) 0.75 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ฺฉุงุฑุง ุจุงูุง",
                    compatible_with: ["ุขุชูุงูุชุณ", "ุจุฑฺฉุชุฑู ูููุฑุณุงู"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 7,
                    name: "ุขุชูุงูุชุณ + ฺฉุงูู ูููุฑฺฉุณ",
                    combination: "ุขุชูุงูุชุณ (OD 1.2%) 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ฺฉุงูู ูููุฑฺฉุณ (EC 20%) 1.25 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ุณุฎุช",
                    notes: "ุชุฑฺฉุจ ุจุฑุง ฺฉูุชุฑู ุนููโูุง ูุฑุฒ ุจุง ููุงููุช",
                    compatible_with: ["ุขุชูุงูุชุณ", "ฺฉุงูู ูููุฑฺฉุณ"],
                    crop_restrictions: ["ฺฏูุฏู"]
                },
                {
                    id: 8,
                    name: "ุงููฺฉุณุงู+ ุจุฑููุงุณุฏ ุงู ุข",
                    combination: "ุงููฺฉุณุงู (EC 36%) 2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุฑููุงุณุฏ ุงู ุข (EC 40%) 1.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ุทู ฺฉูุชุฑู ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    compatible_with: ["ุงููฺฉุณุงู", "ุจุฑููุงุณุฏ ุงู ุข"],
                    crop_restrictions: ["ฺฏูุฏู ู ุฌู"]
                },
                {
                    id: 9,
                    name: "ุงููฺฉุณุงู+ ฺฏุฑุงูุณุชุงุฑ",
                    combination: "ุงููฺฉุณุงู (EC 36%) 2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ฺฏุฑุงูุณุชุงุฑ (DF 75%) 20-25 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ุทู ฺฉูุชุฑู ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    compatible_with: ["ุงููฺฉุณุงู", "ฺฏุฑุงูุณุชุงุฑ"],
                    crop_restrictions: ["ฺฏูุฏู ู ุฌู"]
                },
                {
                    id: 10,
                    name: "ุขฺฉุณุงู + ฺฏุฑุงูุณุชุงุฑ",
                    combination: "ุขฺฉุณุงู (EC 5%) 1.2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ฺฏุฑุงูุณุชุงุฑ (DF 75%) 20-25 ฺฏุฑู ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ุทู ฺฉูุชุฑู ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    compatible_with: ["ุขฺฉุณุงู", "ฺฏุฑุงูุณุชุงุฑ"],
                    crop_restrictions: ["ฺฏูุฏู ู ุฌู"]
                },
                {
                    id: 11,
                    name: "ุขฺฉุณุงู + ุจุฑูููฺฉุณูู",
                    combination: "ุขฺฉุณุงู (EC 5%) 1.2 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ + ุจุฑูููฺฉุณูู (SL 22.5%) 2.5 ูุชุฑ ุฏุฑ ูฺฉุชุงุฑ",
                    target_weeds: "ุนููโูุง ูุฑุฒ ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    notes: "ุชุฑฺฉุจ ุจุง ุทู ฺฉูุชุฑู ูพูู ุจุฑฺฏ ู ุจุงุฑฺฉ ุจุฑฺฏ",
                    compatible_with: ["ุขฺฉุณุงู", "ุจุฑูููฺฉุณูู"],
                    crop_restrictions: ["ฺฏูุฏู ู ุฌู"]
                }
            ],

            // ููุงูู ุชูุงูุจ ุจุฑ ุงุณุงุณ ฺฏุฑููโูุง HRAC
            rotation_rules: {
                "A": { risk_level: 4, max_consecutive: 3, next_avoid: ["A"], priority: 3 },
                "B": { risk_level: 5, max_consecutive: 2, next_avoid: ["B"], priority: 4 },
                "C": { risk_level: 2, max_consecutive: 10, next_avoid: [], priority: 1 },
                "F1": { risk_level: 2, max_consecutive: 5, next_avoid: ["F1"], priority: 1 },
                "K3": { risk_level: 1, max_consecutive: 5, next_avoid: [], priority: 1 },
                "O": { risk_level: 3, max_consecutive: 5, next_avoid: ["O"], priority: 2 },
                "A+B": { risk_level: 5, max_consecutive: 2, next_avoid: ["A", "B", "A+B"], priority: 4 },
                "C+O": { risk_level: 3, max_consecutive: 5, next_avoid: ["O"], priority: 2 },
                "C+F1": { risk_level: 2, max_consecutive: 5, next_avoid: [], priority: 1 },
                "F1+B": { risk_level: 5, max_consecutive: 2, next_avoid: ["B", "F1", "F1+B"], priority: 4 },
                "B+C": { risk_level: 4, max_consecutive: 3, next_avoid: ["B", "C"], priority: 3 },
                "B+O": { risk_level: 4, max_consecutive: 3, next_avoid: ["B", "O"], priority: 3 }
            },

            // ุชุงุฑุฎฺู ุชูุงูุจ (ุจุฑุง ุฐุฎุฑู ุฏุฑ localStorage)
            rotation_history: {}
        };
        
		// ==================== ุณุงุฎุชุงุฑ ุฏุงุฏูโุง ุฌุฏุฏ ุจุฑุง ูุญุฏูุฏุช ุฎุงููุงุฏูโูุง ====================
const FAMILY_LIMITS = {
    "ALS": { maxUsage: 2, period: 4, riskLevel: 5, description: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชููุงฺฉุชุงุช ุณูุชุงุฒ" },
    "ACCase": { maxUsage: 3, period: 5, riskLevel: 4, description: "ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชู-CoA ฺฉุฑุจูฺฉุณูุงุฒ" },
    "O": { maxUsage: 2, period: 4, riskLevel: 3, description: "ุงฺฉุณูโูุง ูุตููุน" },
    "C": { maxUsage: 4, period: 4, riskLevel: 2, description: "ุจุงุฒุฏุงุฑูุฏู ููุชูุณุณุชู II" },
    "PDS": { maxUsage: 3, period: 4, riskLevel: 2, description: "ุจุงุฒุฏุงุฑูุฏู ุจูุณูุชุฒ ฺฉุงุฑุชููุฆุฏ" },
    "VLCFA": { maxUsage: 3, period: 4, riskLevel: 1, description: "ุจุงุฒุฏุงุฑูุฏู ุณูุชุฒ ุงุณุฏูุง ฺุฑุจ ุฒูุฌุฑู ุจููุฏ" },
    "Combination": { maxUsage: 3, period: 4, riskLevel: 3, description: "ุชุฑฺฉุจุงุช ฺูุฏ ูฺฉุงูุฒู" },
    "Unknown": { maxUsage: 5, period: 4, riskLevel: 2, description: "ูุงุดูุงุฎุชู" }
};

// ==================== ููุดู ุฎุงููุงุฏูโุจูุฏ ุดูุง ุฏูู ====================
const CHEMICAL_FAMILY_MAPPING = {
    // ุฎุงููุงุฏู O (ุงฺฉุณูโูุง ูุตููุน)
    "ู46 ุฏูููุฆุฏ": "O",
    "ู46 ฺฉูุจ ูููุฆุฏ": "O",
    "ุฏููพูุณุงู ุณููพุฑ": "O",
    "ุฏุงูู ุณููพุฑ": "O",
    "ฺฉุงูู ูููุฑฺฉุณ": "O",
    "MCPA": "O",
    "ุฏุงฺฉุงูุจุง": "O",
    "ููููพุฑููพ ูพ": "O",
    
    // ุฎุงููุงุฏู ALS (ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชููุงฺฉุชุงุช ุณูุชุงุฒ)
    "ฺฏุฑุงูุณุชุงุฑ": "ALS",
    "ุขุชูุงูุชุณ": "ALS",
    "ูุฒููุงฺฉุณ": "ALS",
    "ููุชูุฑ": "ALS",
    "ุขูพุฑูุณ": "ALS",
    "ุชูุชุงู": "ALS",
    "ูููุฑฺฉุณ": "ALS",
    "ุชูุณ": "ALS",
    "ุงุชููู": "ALS", // ุชุฑฺฉุจ ุงูุง ุงุตู ALS ุงุณุช
    "ฺฉุงุณฺฉ": "ALS", // ุชุฑฺฉุจ ุงูุง ุงุตู ALS ุงุณุช
    
    // ุฎุงููุงุฏู ACCase (ุจุงุฒุฏุงุฑูุฏู ุขูุฒู ุงุณุชู-CoA ฺฉุฑุจูฺฉุณูุงุฒ)
    "ุงููฺฉุณุงู": "ACCase",
    "ูพููุงุณููพุฑ": "ACCase",
    "ุขฺฉุณุงู": "ACCase",
    "ุชุฑุงฺฉุณูุณ": "ACCase",
    "ุชุงูพฺฉ": "ACCase",
    "ูพุฑุงูพฺฉ": "ACCase",
    
    // ุฎุงููุงุฏู C (ุจุงุฒุฏุงุฑูุฏู ููุชูุณุณุชู II)
    "ูพุงุฑุฏูุฑ": "C",
    "ุจุฑููุงุณุฏ ุงู ุข": "C", // ุชุฑฺฉุจ ุงูุง ุฌุฒุก ุงุตู C ุงุณุช
    
    // ุฎุงููุงุฏู PDS (ุจุงุฒุฏุงุฑูุฏู ุจูุณูุชุฒ ฺฉุงุฑุชููุฆุฏ)
    "ูพูุชุฑ": "PDS",
    "ุฏฺฉููููฺฉุงู": "PDS",
    "ูููุฑฺฉุณ ูพุฑ": "PDS",
    
    // ุฎุงููุงุฏู VLCFA (ุจุงุฒุฏุงุฑูุฏู ุณูุชุฒ ุงุณุฏูุง ฺุฑุจ ุฒูุฌุฑู ุจููุฏ)
    "ุงูุงุชู-ุณุงฺฉูุฑุง": "VLCFA",
    
    // ุฎุงููุงุฏู ุชุฑฺฉุจุงุช (Combination)
    "ุจุฑููุงุณุฏ ุงู ุข": "Combination", // C+O
    "ุจูฺฉุชุฑู ูููุฑุณุงู": "Combination", // C+O
    "ุจุงุฒุงฺฏุฑุงู ุฏ ูพ": "Combination", // C+O
    "ุขฺฉุณุงู ูุงู": "Combination", // A+B
    "ุณุฒุงุฑ": "Combination", // B+O
    "ุฒููฺฏโู": "Combination", // B+O
    "ุงุชููู": "Combination", // F1+B
    "ฺฉุงุณฺฉ": "Combination", // F1+B
    "ููฺฏุฑุงู ุงฺฉุณุชุฑุง": "Combination", // B+C
    
    // ูุงุดูุงุฎุชู
    "ุณุงูฺฉุณ BW": "Unknown",
    "ูพุฑุงูฺฉุณ": "Unknown"
};

        // ==================== ุชูุงุจุน ฺฉูฺฉ ====================
        function getResistanceClass(resistanceLevel) {
            switch(resistanceLevel) {
                case "ุจุณุงุฑ ฺฉู": return "resistance-very-low";
                case "ฺฉู": return "resistance-low";
                case "ูุชูุณุท": return "resistance-medium";
                case "ุฒุงุฏ": return "resistance-high";
                case "ุฎู ุฒุงุฏ": return "resistance-very-high";
                default: return "resistance-medium";
            }
        }
        
        function getEfficiencyClass(efficiency) {
            switch(efficiency) {
                case "***": return "efficiency-excellent";
                case "**": return "efficiency-good";
                case "*": return "efficiency-poor";
                case "-": return "efficiency-none";
                case "?": return "efficiency-unknown";
                default: return "efficiency-unknown";
            }
        }
        
        function showError(message, details = "") {
            const errorAlert = document.getElementById('error-alert');
            const errorMessage = document.getElementById('error-message');
            
            if (errorAlert && errorMessage) {
                errorMessage.textContent = details ? `${message}: ${details}` : message;
                errorAlert.style.display = 'block';
                
                setTimeout(() => {
                    errorAlert.style.display = 'none';
                }, 10000);
            } else {
                alert(message + (details ? `: ${details}` : ""));
            }
        }

        // ==================== ุชูุงุจุน ฺฉูฺฉ ุฌุฏุฏ ====================
function getChemicalFamily(herbicideName) {
    return CHEMICAL_FAMILY_MAPPING[herbicideName] || "Unknown";
}

function getFamilyRiskLevel(family) {
    const limit = FAMILY_LIMITS[family];
    return limit ? limit.riskLevel : 3;
}

function getFamilyMaxUsage(family, rotationYears) {
    const limit = FAMILY_LIMITS[family];
    if (!limit) return rotationYears; // ุงฺฏุฑ ูุญุฏูุฏุช ูุจูุฏุ ุชูุงู ุณุงูโูุง ูโุชูุงูุฏ ุงุณุชูุงุฏู ุดูุฏ
    
    // ุงฺฏุฑ ุฏูุฑู ูุญุฏูุฏุช ุงุฒ ุณุงูโูุง ุชูุงูุจ ุจุดุชุฑ ุงุณุชุ ุณูู ุฑุง ูุชูุงุณุจ ฺฉุงูุด ูโุฏูู
    if (limit.period > rotationYears) {
        return Math.floor((rotationYears / limit.period) * limit.maxUsage);
    }
    
    return limit.maxUsage;
}

function countFamilyUsageInPlan(plan, family) {
    let count = 0;
    plan.forEach(yearPlan => {
        yearPlan.herbicides.forEach(herbItem => {
            if (herbItem.data && herbItem.data.family === family) {
                count++;
            }
        });
    });
    return count;
}

function countFamilyYearsUsageInPlan(plan, family) {
    let years = 0;
    plan.forEach(yearPlan => {
        const usedThisYear = (yearPlan.herbicides || []).some(herbItem => {
            return herbItem && herbItem.data && herbItem.data.family === family;
        });
        if (usedThisYear) years++;
    });
    return years;
}


function getAvailableFamiliesForYear(usedFamilies, availableHerbicides, rotationYears, currentYear, planSoFar) {
    const availableFamilies = new Set();
    
    // ุฌูุนโุขูุฑ ููู ุฎุงููุงุฏูโูุง ููุฌูุฏ ุฏุฑ ุนููฺฉุดโูุง ูุคุซุฑ
    availableHerbicides.forEach(herb => {
        if (herb.family) {
            availableFamilies.add(herb.family);
        }
    });
    
    // ููุชุฑ ุฎุงููุงุฏูโูุง ุบุฑูุฌุงุฒ
    const filteredFamilies = Array.from(availableFamilies).filter(family => {
        // 1. ุจุฑุฑุณ ุณูู ุงุณุชูุงุฏู
        const maxUsage = getFamilyMaxUsage(family, rotationYears);
        const usageSoFar = countFamilyUsageInPlan(planSoFar, family);
        
        if (usageSoFar >= maxUsage) {
            return false;
        }
        
        // 2. ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ูุชูุงู (ุงฺฏุฑ ุฎุงููุงุฏู ุฏุฑ ุณุงู ูุจู ุงุณุชูุงุฏู ุดุฏู ุจุงุดุฏ)
// 2. ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ูุชูุงู (ุงฺฏุฑ ุฎุงููุงุฏู ุฏุฑ ุณุงู ูุจู ุงุณุชูุงุฏู ุดุฏู ุจุงุดุฏ)
        // ุชูุฌู: ุฏุฑ ุจุฑูุงููโูุง ุดุงูู ุฏู ุนููฺฉุด ุฏุฑ ฺฉ ุณุงูุ ูุฑ ุฏู ุฎุงููุงุฏู ุณุงู ูุจู ุจุงุฏ ุฏุฑ ุณุงู ุฌุงุฑ ููููุน ุดููุฏ.
        const lastYearFamilies = new Set();
        if (planSoFar && planSoFar.length > 0) {
            const lastYear = planSoFar[planSoFar.length - 1];
            // ุฎุงููุงุฏูโูุง ุงุฒ ุณุงุฎุชุงุฑ ุงุณุชุงูุฏุงุฑุฏ ุจุฑูุงูู
            if (lastYear && Array.isArray(lastYear.herbicides)) {
                lastYear.herbicides.forEach(it => {
                    const f = it && it.data ? it.data.family : null;
                    if (f) lastYearFamilies.add(f);
                });
            }
            // ุฎุงููุงุฏูโูุง ุงุฒ ุฑุดุชูโ ุฎูุงุตู (ุฏุฑ ุตูุฑุช ูุฌูุฏ)
            if (lastYear && typeof lastYear.family === "string") {
                lastYear.family.split("+").map(s => s.trim()).filter(Boolean).forEach(f => lastYearFamilies.add(f));
            }
        }
        if (lastYearFamilies.has(family)) {
            return false;
        }
        // 3. ุจุฑุง ุฎุงููุงุฏู O: ุงฺฏุฑ ุฏุฑ ุฏู ุณุงู ฺฏุฐุดุชู ุงุณุชูุงุฏู ุดุฏู ุจุงุดุฏุ ูพุฑูุฒ ุดูุฏ
        if (family === "O") {
            const lastTwoFamilies = usedFamilies.slice(-2);
            if (lastTwoFamilies.includes("O")) {
                return false;
            }
        }
        
        // 4. ุจุฑุง ุฎุงููุงุฏู ALS: ูุงุตูู ุญุฏุงูู 2 ุณุงู ุงุฒ ุขุฎุฑู ุงุณุชูุงุฏู
        if (family === "ALS") {
            const lastALSIndex = usedFamilies.lastIndexOf("ALS");
            if (lastALSIndex !== -1 && (usedFamilies.length - lastALSIndex) < 2) {
                return false;
            }
        }
        
        return true;
    });
    
    // ุงฺฏุฑ ูฺ ุฎุงููุงุฏูโุง ุจุงู ููุงูุฏุ ุฎุงููุงุฏูโูุง ุจุง ฺฉูุชุฑู ุงุณุชูุงุฏู ุฑุง ุจุฑฺฏุฑุฏุงู
    if (filteredFamilies.length === 0) {
        const familiesWithUsage = Array.from(availableFamilies).map(family => ({
            family,
            usage: countFamilyUsageInPlan(planSoFar, family)
        }));
        
        // ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ ฺฉูุชุฑู ุงุณุชูุงุฏู
        familiesWithUsage.sort((a, b) => a.usage - b.usage);
        
        // ููุท ุฎุงููุงุฏูโูุง ฺฉู ุจู ุณูู ูุฑุณุฏูโุงูุฏ
        return familiesWithUsage
            .filter(f => f.usage < getFamilyMaxUsage(f.family, rotationYears))
            .map(f => f.family);
    }
    
    return filteredFamilies;
}

function prioritizeFamiliesByStrategy(families, strategy, allHerbicides) {
    if (families.length <= 1) return families;
    
    const familyScores = families.map(family => {
        const familyHerbicides = allHerbicides.filter(h => h.family === family);
        const avgScore = familyHerbicides.length > 0 
            ? familyHerbicides.reduce((sum, h) => sum + h.score, 0) / familyHerbicides.length 
            : 0;
        
        const riskLevel = getFamilyRiskLevel(family);
        const usagePriority = 1 / (riskLevel + 1); // ุฎุทุฑ ฺฉูุชุฑ = ุงูููุช ุจุดุชุฑ
        
        let strategyScore = 0;
        switch(strategy) {
            case "efficiency-first":
                strategyScore = avgScore * 0.8 + usagePriority * 0.2;
                break;
            case "resistance-management":
                strategyScore = usagePriority * 0.7 + avgScore * 0.3;
                break;
            case "balanced":
                strategyScore = avgScore * 0.5 + usagePriority * 0.5;
                break;
            case "cost-effective":
                // ุจุฑุง ููุฑูู ุจู ุตุฑููุ ุฎุงููุงุฏูโูุง ุจุง ุฎุทุฑ ฺฉูุชุฑ ู ฺฉุงุฑุง ูุชูุณุท
                strategyScore = (10 - riskLevel) * 0.6 + (avgScore / 10) * 0.4;
                break;
            default:
                strategyScore = avgScore;
        }
        
        return { family, score: strategyScore };
    });
    
    // ูุฑุชุจโุณุงุฒ ูุฒูู ุจุฑ ุงุณุงุณ ุงูุชุงุฒ ุงุณุชุฑุงุชฺ
    familyScores.sort((a, b) => b.score - a.score);
    
    return familyScores.map(item => item.family);
}

function selectBestHerbicideFromFamily(family, availableHerbicides, selectedWeeds) {
    const familyHerbicides = availableHerbicides.filter(h => h.family === family);
    
    if (familyHerbicides.length === 0) return null;
    
    // ุงูุชุงุฒุฏู ุจู ุนููฺฉุดโูุง
    const scoredHerbicides = familyHerbicides.map(herb => {
        let score = herb.score;
        
        // ุงูุชุงุฒ ุงุถุงู ุจุฑุง ูพูุดุด ุจุดุชุฑ ุนููโูุง ูุฑุฒ
        const coverageBonus = (herb.controlledCount / selectedWeeds.length) * 20;
        score += coverageBonus;
        
        // ุงูุชุงุฒ ุจุฑุง ฺฉูุชุฑู ุนุงู
        const excellentBonus = herb.excellentControlCount * 5;
        score += excellentBonus;
        
        // ุฌุฑูู ุจุฑุง ุฎุทุฑ ููุงููุช ุจุงูุง
        const resistancePenalty = herb.herbicide.resistance_level === "ุฎู ุฒุงุฏ" ? -15 : 0;
        score += resistancePenalty;
        
        // ุงูุชุงุฒ ุจุฑุง ุฎุงููุงุฏูโูุง ฺฉูโุฎุทุฑ
        const riskBonus = (5 - getFamilyRiskLevel(family)) * 3;
        score += riskBonus;
        
        return { ...herb, finalScore: score };
    });
    
    // ุงูุชุฎุงุจ ุนููฺฉุด ุจุง ุจุงูุงุชุฑู ุงูุชุงุฒ
    scoredHerbicides.sort((a, b) => b.finalScore - a.finalScore);
    
    return scoredHerbicides[0];
}

        // ==================== ูุฏุฑุช ุฑุงุจุท ฺฉุงุฑุจุฑ ====================
        document.addEventListener('DOMContentLoaded', function() {
            console.log('DOM fully loaded - ุดุฑูุน ุจุงุฑฺฏุฐุงุฑ ุณุณุชู ูพุดุฑูุชู...');
            
            // ุตุจุฑ ฺฉูู ุชุง DOM ฺฉุงููุงู ููุฏ ุดูุฏ
            setTimeout(() => {
                try {
                    populateWeeds();
                    
                    // ุงุชุตุงู ุฑูุฏุงุฏูุง ุฌุณุชุฌู
                    const weedSearch = document.getElementById('weed-search');
                    
                    if (weedSearch) {
                        weedSearch.addEventListener('input', filterWeeds);
                    }
                    
                    // ููุชุฑูุง ุฏุณุชูโุจูุฏ
                    document.querySelectorAll('.category-filter-btn').forEach(btn => {
                        btn.addEventListener('click', function() {
                            const category = this.getAttribute('data-category');
                            
                            document.querySelectorAll('.category-filter-btn').forEach(b => {
                                b.classList.remove('active');
                            });
                            this.classList.add('active');
                            
                            filterWeedsByCategory(category);
                        });
                    });
                    
                    // ุฏฺฉูู ุจุณุชู ุฌุฒุฆุงุช ุนูู ูุฑุฒ
                    const closeDetailsBtn = document.getElementById('close-weed-details');
                    if (closeDetailsBtn) {
                        closeDetailsBtn.addEventListener('click', function() {
                            document.getElementById('weed-details-panel').style.display = 'none';
                        });
                    }
                    
                    // ุฏฺฉููโูุง
                    const calculateBtn = document.getElementById('calculate-btn');
                    const optimizeBtn = document.getElementById('optimize-btn');
                    const resetBtn = document.getElementById('reset-btn');
                    
                    if (calculateBtn) {
                        calculateBtn.addEventListener('click', calculateRecommendations);
                    }
                    
                    if (optimizeBtn) {
                        optimizeBtn.addEventListener('click', optimizeRotation);
                    }
                    
                    if (resetBtn) {
                        resetBtn.addEventListener('click', resetForm);
                    }
                    
                    // ุชุจโูุง
                    document.querySelectorAll('.tab').forEach(tab => {
                        tab.addEventListener('click', function() {
                            const tabId = this.getAttribute('data-tab');
                            
                            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
                            this.classList.add('active');
                            
                            document.querySelectorAll('.tab-content').forEach(content => {
                                content.classList.remove('active');
                            });
                            
                            const targetTab = document.getElementById(`${tabId}-tab`);
                            if (targetTab) {
                                targetTab.classList.add('active');
                            }
                            
                            // ุงฺฏุฑ ุชุจ ุชูุงูุจ ุงุฎุชุตุงุต ูุนุงู ุดุฏุ ุชูุงูุจโูุง ุฑุง ููุงุด ุจุฏู
                            if (tabId === 'specific-rotation') {
                                displaySpecialRotations();
                            }
                        });
                    });
                    
                    // ุจุงุฑฺฏุฐุงุฑ ุฏุงุฏูโูุง ุงููู
                    loadHRACGroups();
                    updateCalculationType();
                    
                    console.log('ุณุณุชู ูพุดุฑูุชู ุขูุงุฏู ุงุณุชูุงุฏู ุงุณุช.');
                    
                } catch (error) {
                    console.error('ุฎุทุง ุฏุฑ ุจุงุฑฺฏุฐุงุฑ ุงููู:', error);
                    showError('ุฎุทุง ุฏุฑ ุจุงุฑฺฏุฐุงุฑ ุณุณุชู', error.message);
                }
            }, 100);
        });
        
        function populateWeeds() {
            try {
                console.log('ุดุฑูุน ุงุฌุงุฏ ูุณุช ุนููโูุง ูุฑุฒ...');
                
                const weedsContainer = document.getElementById('all-weeds-container');
                
                if (!weedsContainer) {
                    console.error('ฺฉุงูุชูุฑ ุนููโูุง ูุฑุฒ ุงูุช ูุดุฏ');
                    return;
                }
                
                // ูพุงฺฉ ฺฉุฑุฏู ูุญุชูุง ูุจู
                weedsContainer.innerHTML = '';
                
                // ุงุฌุงุฏ ฺฺฉโุจุงฺฉุณโูุง
                if (COMPLETE_DATASET.weeds && COMPLETE_DATASET.weeds.length > 0) {
                    COMPLETE_DATASET.weeds.forEach((weed, index) => {
                        const checkboxItem = document.createElement('div');
                        checkboxItem.className = 'checkbox-item';
                        checkboxItem.setAttribute('data-type', weed.type);
                        checkboxItem.setAttribute('data-category', weed.category);
                        const id = `weed_${weed.id}`;
                        checkboxItem.innerHTML = `
                            <input type="checkbox" id="${id}" value="${weed.id}" data-weed-id="${weed.id}">
                            <label for="${id}">
                                ${weed.fullName}
                                <span class="weed-category-badge category-${weed.type}" style="margin-right: 0.5rem; font-size: 0.75rem;">
                                    ${weed.type === 'broadleaf' ? 'ูพููโุจุฑฺฏ' : 'ูุงุฒฺฉโุจุฑฺฏ'}
                                </span>
                            </label>
                        `;
                        
                        // ุงุถุงูู ฺฉุฑุฏู ุฑูุฏุงุฏ ฺฉูฺฉ ุจุฑุง ููุงุด ุฌุฒุฆุงุช
                        const label = checkboxItem.querySelector('label');
                        if (label) {
                            label.addEventListener('click', function(e) {
                                if (e.target.type !== 'checkbox') {
                                    const weedId = parseInt(checkboxItem.querySelector('input').value);
                                    showWeedDetails(weedId);
                                }
                            });
                        }
                        
                        weedsContainer.appendChild(checkboxItem);
                    });
                    console.log(`${COMPLETE_DATASET.weeds.length} ุนูู ูุฑุฒ ุงุฌุงุฏ ุดุฏ`);
                }
                
                // ุงุชุตุงู ุฑูุฏุงุฏ ุชุบุฑ ุจู ฺฉุงูุชูุฑ
                weedsContainer.addEventListener('change', function() {
                    setTimeout(updateSelectedWeedsCount, 10);
                    updateSelectedWeedsList();
                });
                
                // ุจูโุฑูุฒุฑุณุงู ุดูุงุฑุด ุงููู
                updateSelectedWeedsCount();
                updateSelectedWeedsList();
                
                console.log('ูุณุช ุนููโูุง ูุฑุฒ ุจุง ููููุช ุงุฌุงุฏ ุดุฏ');
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุงุฌุงุฏ ูุณุช ุนููโูุง ูุฑุฒ:', error);
                showError('ุฎุทุง ุฏุฑ ุงุฌุงุฏ ูุณุช ุนููโูุง ูุฑุฒ', error.message);
            }
        }
        
        function filterWeeds() {
            try {
                const weedSearch = document.getElementById('weed-search');
                if (!weedSearch) return;
                
                const searchTerm = weedSearch.value.toLowerCase();
                const activeCategory = document.querySelector('.category-filter-btn.active')?.getAttribute('data-category') || 'all';
                
                document.querySelectorAll('#all-weeds-container .checkbox-item').forEach(item => {
                    const label = item.querySelector('label');
                    if (label) {
                        const labelText = label.textContent.toLowerCase();
                        const weedType = item.getAttribute('data-type');
                        const weedCategory = item.getAttribute('data-category');
                        
                        // ููุชุฑ ุจุฑ ุงุณุงุณ ุฌุณุชุฌู
                        const matchesSearch = labelText.includes(searchTerm);
                        
                        // ููุชุฑ ุจุฑ ุงุณุงุณ ุฏุณุชูโุจูุฏ
                        let matchesCategory = true;
                        if (activeCategory !== 'all') {
                            if (activeCategory === 'broadleaf') {
                                matchesCategory = weedType === 'broadleaf';
                            } else if (activeCategory === 'narrowleaf') {
                                matchesCategory = weedType === 'narrowleaf';
                            } else if (activeCategory === 'specific') {
                                // ุนููโูุง ูุฑุฒ ุฎุงุต (ุจุง ุงูููุช 1)
                                const weedId = parseInt(item.querySelector('input').value);
                                const weed = COMPLETE_DATASET.weeds.find(w => w.id === weedId);
                                matchesCategory = weed && weed.priority === 1;
                            }
                        }
                        
                        item.style.display = (matchesSearch && matchesCategory) ? 'flex' : 'none';
                    }
                });
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ููุชุฑ ฺฉุฑุฏู ุนููโูุง ูุฑุฒ:', error);
            }
        }
        
        function filterWeedsByCategory(category) {
            filterWeeds(); // ุงุฒ ุชุงุจุน ุงุตู ููุชุฑ ุงุณุชูุงุฏู ูโฺฉูู
        }
        
        function updateSelectedWeedsCount() {
            try {
                const selectedCount = document.querySelectorAll('#all-weeds-container input:checked').length;
                const countElem = document.getElementById('all-selected-count');
                
                if (countElem) {
                    countElem.textContent = `${selectedCount} ููุฑุฏ ุงูุชุฎุงุจ ุดุฏู`;
                }
                
                // ููุงุด ุง ูพููุงู ฺฉุฑุฏู ุฎูุงุตู ุงูุชุฎุงุจ
                const summaryDiv = document.getElementById('weed-selection-summary');
                if (summaryDiv) {
                    if (selectedCount > 0) {
                        summaryDiv.style.display = 'block';
                    } else {
                        summaryDiv.style.display = 'none';
                    }
                }
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุจูโุฑูุฒุฑุณุงู ุดูุงุฑุด:', error);
            }
        }
        
        function updateSelectedWeedsList() {
            try {
                const selectedList = document.getElementById('selected-weeds-list');
                if (!selectedList) return;
                
                selectedList.innerHTML = '';
                const selectedWeeds = getSelectedWeeds();
                
                selectedWeeds.forEach(weed => {
                    const weedItem = document.createElement('span');
                    weedItem.className = 'selected-weed-item';
                    weedItem.innerHTML = `
                        ${weed.name}
                        <span class="remove-btn" data-weed-id="${weed.id}">โ</span>
                    `;
                    selectedList.appendChild(weedItem);
                });
                
                // ุงุถุงูู ฺฉุฑุฏู ุฑูุฏุงุฏ ุญุฐู
                document.querySelectorAll('.selected-weed-item .remove-btn').forEach(btn => {
                    btn.addEventListener('click', function() {
                        const weedId = parseInt(this.getAttribute('data-weed-id'));
                        unselectWeed(weedId);
                    });
                });
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุจูโุฑูุฒุฑุณุงู ูุณุช ุงูุชุฎุงุจ:', error);
            }
        }
        
        function unselectWeed(weedId) {
            const checkbox = document.querySelector(`#all-weeds-container input[value="${weedId}"]`);
            if (checkbox) {
                checkbox.checked = false;
                updateSelectedWeedsCount();
                updateSelectedWeedsList();
            }
        }
        
        function showWeedDetails(weedId) {
            // ุบุฑูุนุงูโุณุงุฒ ูพูุฌุฑู ูพุดโููุงุด ุณููู ููฺฏุงู ุงูุชุฎุงุจ ฺฺฉโุจุงฺฉุณ (ุทุจู ุฏุฑุฎูุงุณุช)
            return;
        
try {
                const weed = COMPLETE_DATASET.weeds.find(w => w.id === weedId);
                if (!weed) return;
                
                // ุงูุชู ุนููฺฉุดโูุง ููุซุฑ
                const effectiveHerbicides = COMPLETE_DATASET.herbicides.filter(h => 
                    weed.effectiveHerbicides.includes(h.id)
                );
                
                // ููุงุด ุฌุฒุฆุงุช
                document.getElementById('selected-weed-name').textContent = weed.fullName;
                
                let detailsHtml = `
                    <p><strong>ุฏุณุชู:</strong> ${weed.category}</p>
                    <p><strong>ุงูููุช ฺฉูุชุฑู:</strong> ${weed.priority === 1 ? 'ุจุงูุง (ุนูู ูุฑุฒ ููู)' : weed.priority === 2 ? 'ูุชูุณุท' : 'ูพุงู'}</p>
                    <p><strong>ุชูุถุญุงุช:</strong> ${weed.specificNotes || 'ุจุฏูู ุชูุถุญุงุช ุฎุงุต'}</p>
                    
                    <div class="weed-effective-herbicides">
                        <h5><i class="fas fa-flask"></i> ุนููฺฉุดโูุง ููุซุฑ:</h5>
                `;
                
                if (effectiveHerbicides.length === 0) {
                    detailsHtml += '<p style="color: var(--danger-red);">ูฺ ุนููฺฉุด ููุซุฑ ุจุฑุง ุงู ุนูู ูุฑุฒ ุซุจุช ูุดุฏู ุงุณุช.</p>';
                } else {
                    effectiveHerbicides.forEach(herb => {
                        // ุงูุชู ฺฉุงุฑุง ุงู ุนููฺฉุด ุจุฑ ุงู ุนูู ูุฑุฒ
                        let efficiency = herb.efficiency[weed.name] || "?";
                        let efficiencyText = "";
                        let efficiencyClass = "";
                        
                        switch(efficiency) {
                            case "***": 
                                efficiencyText = "ฺฉูุชุฑู ุนุงู"; 
                                efficiencyClass = "efficiency-excellent-badge";
                                break;
                            case "**": 
                                efficiencyText = "ฺฉูุชุฑู ุฎูุจ"; 
                                efficiencyClass = "efficiency-good-badge";
                                break;
                            case "*": 
                                efficiencyText = "ฺฉูุชุฑู ุถุนู"; 
                                efficiencyClass = "efficiency-poor-badge";
                                break;
                            case "-": 
                                efficiencyText = "ุจุฏูู ุชุงุซุฑ"; 
                                efficiencyClass = "";
                                break;
                            case "?": 
                                efficiencyText = "ูุงูุดุฎุต"; 
                                efficiencyClass = "";
                                break;
                            default: 
                                efficiencyText = "ูุงูุดุฎุต";
                        }
                        
                        detailsHtml += `
                            <div class="effective-herbicide-item">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>${herb.trade_name}</strong>
                                    ${efficiencyText ? `<span class="herbicide-efficiency-badge ${efficiencyClass}">${efficiencyText} (${efficiency})</span>` : ''}
                                </div>
                                <p style="margin: 0.3rem 0; font-size: 0.9rem;"><strong>ูุงู ุนููู:</strong> ${herb.common_name}</p>
                                <p style="margin: 0.3rem 0; font-size: 0.9rem;"><strong>ฺฏุฑูู HRAC:</strong> ${herb.hrac_group}</p>
                                <p style="margin: 0.3rem 0; font-size: 0.9rem;"><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herb.dosage}</p>
                            </div>
                        `;
                    });
                }
                
                detailsHtml += `</div>`;
                
                document.getElementById('weed-details-content').innerHTML = detailsHtml;
                // ูพูุฌุฑู ูพุดโููุงุด ุบุฑูุนุงู ุดุฏู ุงุณุช
                
                // ููุงุด ุชุงุฑุฎฺู ุชูุงูุจ ุงฺฏุฑ ููุฌูุฏ ุจุงุดุฏ
                displayRotationHistory(weedId);
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ููุงุด ุฌุฒุฆุงุช ุนูู ูุฑุฒ:', error);
                showError('ุฎุทุง ุฏุฑ ููุงุด ุฌุฒุฆุงุช', error.message);
            }
        }
        
        function displayRotationHistory(weedId) {
            try {
                const historyPanel = document.getElementById('rotation-history-panel');
                const historyContent = document.getElementById('rotation-history-content');
                
                if (!historyPanel || !historyContent) return;
                
                // ุจุงุฑฺฏุฐุงุฑ ุชุงุฑุฎฺู ุงุฒ localStorage
                const historyKey = `rotation_history_${weedId}`;
                const historyData = localStorage.getItem(historyKey);
                
                if (historyData) {
                    const history = JSON.parse(historyData);
                    historyPanel.style.display = 'block';
                    
                    let historyHtml = '<div style="margin-top: 1rem;">';
                    
                    history.forEach((record, index) => {
                        historyHtml += `
                            <div class="history-item">
                                <div><strong>ุณุงู:</strong> ${record.year}</div>
                                <div><strong>ุนููฺฉุด ุงุณุชูุงุฏู ุดุฏู:</strong> ${record.herbicide}</div>
                                <div><strong>ฺฏุฑูู HRAC:</strong> ${record.hrac_group}</div>
                                <div><strong>ุฎุงููุงุฏู ุดูุง:</strong> ${record.chemical_family}</div>
                            </div>
                        `;
                    });
                    
                    historyHtml += '</div>';
                    historyContent.innerHTML = historyHtml;
                } else {
                    historyPanel.style.display = 'none';
                }
                
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ููุงุด ุชุงุฑุฎฺู ุชูุงูุจ:', error);
            }
        }
        
        function resetForm() {
            document.getElementById('product').value = 'ฺฏูุฏู';
            document.getElementById('herbicide_history').value = '';
            document.getElementById('resistance_report').value = '';
            document.getElementById('rotation_years').value = '4';
            document.getElementById('rotation_strategy').value = 'efficiency-first';
            document.getElementById('weed-search').value = '';
            
            document.querySelectorAll('input[type="checkbox"]').forEach(checkbox => {
                checkbox.checked = false;
            });
            
            document.querySelectorAll('.category-filter-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            document.querySelector('.category-filter-btn[data-category="all"]').classList.add('active');
            
            filterWeeds();
            updateSelectedWeedsCount();
            updateSelectedWeedsList();
            
            document.getElementById('result-section').style.display = 'none';
            document.getElementById('default-content').style.display = 'block';
            document.getElementById('loading').style.display = 'none';
            document.getElementById('error-alert').style.display = 'none';
            document.getElementById('control-type-info').style.display = 'none';
            document.getElementById('calculatorResult').style.display = 'none';
            document.getElementById('optimization-result').style.display = 'none';
            document.getElementById('rotation-summary').style.display = 'none';
            document.getElementById('weed-details-panel').style.display = 'none';
            document.getElementById('rotation-history-panel').style.display = 'none';
            document.getElementById('weed-selection-summary').style.display = 'none';
        }
        
        function loadHRACGroups() {
            const container = document.getElementById('hrac-groups-container');
            if (!container) return;
            
            let html = '<div class="hrac-groups-container">';
            
            for (const [groupCode, groupInfo] of Object.entries(COMPLETE_DATASET.hrac_groups)) {
                const riskClass = getResistanceClass(groupInfo.risk);
                
                html += `
                    <div class="hrac-group-card" style="background: linear-gradient(135deg, ${groupInfo.color}, ${darkenColor(groupInfo.color, 20)}); border-color: ${groupInfo.color};">
                        <h4>${groupCode} - ${groupInfo.name}</h4>
                        <div class="usage-percent">${groupInfo.usage} ุงุณุชูุงุฏู</div>
                        <p><strong>ูฺฉุงูุฒู ุนูู:</strong> ${groupInfo.mechanism || groupInfo.description}</p>
                        <p><strong>ูุถุนุช ููุงููุช:</strong> <span class="${riskClass}">${groupInfo.resistance_status || groupInfo.risk}</span></p>
                        <p><strong>ฺฉุงุฑุจุฑุฏ ุงุตู:</strong> ${groupInfo.application}</p>
                        <p><strong>ูููููโูุง:</strong> ${groupInfo.examples.slice(0, 3).join('ุ ')}</p>
                        <p><strong>ุญุฏุงฺฉุซุฑ ูุตุฑู ูุชูุงู:</strong> ${groupInfo.max_consecutive_years} ุณุงู</p>
                    </div>
                `;
            }
            
            html += '</div>';
            container.innerHTML = html;
        }
        
        function darkenColor(color, percent) {
            const num = parseInt(color.replace("#", ""), 16);
            const amt = Math.round(2.55 * percent);
            const R = (num >> 16) - amt;
            const G = (num >> 8 & 0x00FF) - amt;
            const B = (num & 0x0000FF) - amt;
            
            return "#" + (0x1000000 + (R < 255 ? R < 1 ? 0 : R : 255) * 0x10000 +
                (G < 255 ? G < 1 ? 0 : G : 255) * 0x100 +
                (B < 255 ? B < 1 ? 0 : B : 255)).toString(16).slice(1);
        }
        
        // ==================== ุชูุงุจุน ุงุตู ุณุณุชู ====================
        function getSelectedWeeds() {
            const selectedWeeds = [];
            
            document.querySelectorAll('#all-weeds-container input:checked').forEach(checkbox => {
                const weedId = parseInt(checkbox.value);
                const weed = COMPLETE_DATASET.weeds.find(w => w.id === weedId);
                
                if (weed) {
                    selectedWeeds.push({
                        id: weed.id,
                        name: weed.name,
                        fullName: weed.fullName,
                        type: weed.type,
                        category: weed.category,
                        effectiveHerbicides: weed.effectiveHerbicides || [],
                        priority: weed.priority || 3
                    });
                }
            });
            
            return selectedWeeds;
        }
        
        // ==================== ููุชูุฑ ุชุตููโฺฏุฑ ุชูุงูุจ ุฌุฏุฏ ====================
        function calculateRecommendations() {
            try {
                const product = document.getElementById('product').value;
                const herbicideHistory = document.getElementById('herbicide_history').value;
                const resistanceRegion = document.getElementById('resistance_report').value;
                const rotationYears = parseInt(document.getElementById('rotation_years').value);
                const rotationStrategy = document.getElementById('rotation_strategy').value;
                
                const selectedWeeds = getSelectedWeeds();
                
                if (selectedWeeds.length === 0) {
                    showError('ูุทูุงู ุญุฏุงูู ฺฉ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ฺฉูุฏ');
                    return;
                }
                
                document.getElementById('loading').style.display = 'block';
                document.getElementById('result-section').style.display = 'none';
                document.getElementById('default-content').style.display = 'none';
                document.getElementById('error-alert').style.display = 'none';
                document.getElementById('optimization-result').style.display = 'none';
                
                setTimeout(() => {
                    try {
                        const analysis = analyzeHerbicidesForSelectedWeeds(selectedWeeds, product, resistanceRegion, herbicideHistory);
                        const rotationPlan = generateRotationPlanForSelectedWeeds(analysis, selectedWeeds, rotationYears, rotationStrategy);
                        displayResults(analysis, rotationPlan, selectedWeeds, rotationStrategy);
						displayFamilyUsageInfo(rotationPlan);
                    } catch (error) {
                        showError('ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุฏุงุฏูโูุง', error.message);
                        console.error(error);
                    }
                }, 800);
                
            } catch (error) {
                showError('ุฎุทุง ุฏุฑ ูุญุงุณุจุงุช', error.message);
                console.error(error);
            }
        }
        
function analyzeHerbicidesForSelectedWeeds(selectedWeeds, product, resistanceRegion, herbicideHistory) {
    // ============================================================
    // ุชุญูู ุนููฺฉุดโูุง ุจุฑุง ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ (ุจุงุฒููุณ ุดุฏู)
    // ูุฏู:
    // 1) ููุท ุนููฺฉุดโูุง ููุงุด ุฏุงุฏู ุดููุฏ ฺฉู ุญุฏุงูู ฺฉ ุงุซุฑ ูุซุจุช (*, **, ***) ุฑู ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ ุฏุงุฑูุฏ.
    // 2) ุนููฺฉุดโูุง ฺฉู ููุท "-" ุง "?" ุฏุงุฑูุฏุ ุชููุง ุฏุฑ ุตูุฑุช ูุจูุฏ ูฺ ฺฏุฒูู ุจูุชุฑ (ูฺ ุงุซุฑ ูุซุจุช) ุจูโุตูุฑุช ูุญุฏูุฏ ููุงุด ุฏุงุฏู ุดููุฏ.
    // 3) ุจุฑุง ูุฑ ุนููฺฉุดุ ุงุซุฑ ูุงูุน ุฑู ูุฑ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ุงุฒ ุฑู ุฌุฏูู ฺฉุงุฑุง (efficiency) ุจุฑุฑุณ ุดูุฏ.
    // ============================================================

    const recommended = [];
    const limited = [];
    const warnings = [];

    // ุญุงูุช ุณุฎุชโฺฏุฑุงูู ฺฉูุช ุจุฑุง ุงูุชุฎุงุจโูุง ุจุณุงุฑ ูุญุฏูุฏ:
    // 1) ููุช ููุท ฺฉ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ุดุฏู ุจุงุดุฏ
    // 2) ููุช ุฏููุงู ุฏู ุนูู ูุฑุฒ ุงูุชุฎุงุจ ุดุฏู ุจุงุดูุฏ ู ฺฉ ูพููโุจุฑฺฏ ู ุฏฺฏุฑ ูุงุฒฺฉโุจุฑฺฏ ุจุงุดุฏ
    // ุฏุฑ ุงู ุญุงูุช ููุท ฺฉุงุฑุงโูุง ** ู *** ยซุงุซุฑ ูุซุจุชยป ูุญุณูุจ ูโุดููุฏ (ูู *).
    const _countBroad = selectedWeeds.filter(w => w && w.type === 'broadleaf').length;
    const _countNarrow = selectedWeeds.filter(w => w && w.type === 'narrowleaf').length;
    const strictQualityMode = (selectedWeeds.length === 1);


        const isPositiveSymbol = (sym) => {
        if (strictQualityMode) return (sym === "***" || sym === "**");
        return (sym === "***" || sym === "**" || sym === "*");
    };

    // ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ูุดุฏุงุฑูุง (ุฑูุน ูุดฺฉู ุชฺฉุฑุงุฑ ฺูุฏุจุงุฑู ูพุงูโูุง ุงุญุชุงุท)
    const ูุดุฏุงุฑูุง_ุซุจุช_ุดุฏู = new Set();
    const ุนููฺฉุดโูุง_ูุดุฏุงุฑ_ุฎูุฑุฏู = new Set();
    function ุงูุฒูุฏู_ูุดุฏุงุฑ(ูุชู, ูุงู_ุนููฺฉุด=null) {
        try {
            const ฺฉูุฏ = String(ูุชู || "").replace(/\s+/g, " ").trim();
            if (!ูุดุฏุงุฑูุง_ุซุจุช_ุดุฏู.has(ฺฉูุฏ)) {
                ูุดุฏุงุฑูุง_ุซุจุช_ุดุฏู.add(ฺฉูุฏ);
                warnings.push(ูุชู);
            }
            if (ูุงู_ุนููฺฉุด) {
                ุนููฺฉุดโูุง_ูุดุฏุงุฑ_ุฎูุฑุฏู.add(String(ูุงู_ุนููฺฉุด));
            }
        } catch (e) {
            warnings.push(ูุชู);
        }
    }

    const dualPurpose = [];

    const ูุชู_ุณุงุจูู = (herbicideHistory || "").toString();

    const hasBroadleaf = selectedWeeds.some(w => w.type === 'broadleaf');
    const hasNarrowleaf = selectedWeeds.some(w => w.type === 'narrowleaf');

    // ุชุงุจุน ฺฉูฺฉ: ุฏุฑุงูุช ููุงุฏ ฺฉุงุฑุง (ุฏุฑ ุตูุฑุช ูุจูุฏุ "?")
    function getEfficiencySymbol(herbicide, weedName) {
        if (herbicide && herbicide.efficiency && typeof herbicide.efficiency === 'object') {
            const v = herbicide.efficiency[weedName];
            return (v === "***" || v === "**" || v === "*" || v === "-" || v === "?") ? v : "?";
        }
        return "?";
    }

    // ุชุงุจุน ฺฉูฺฉ: ุงูุชุงุฒุฏู ุจู ููุงุฏูุง (ููุท ุจุฑุง ุฑุชุจูโุจูุฏุ ุดุฑุท ููุงุด ุจุฑ ุงุณุงุณ ุงุซุฑ ูุซุจุช ุงุณุช)
    function scoreSymbol(sym) {
        switch (sym) {
            case "***": return 10;
            case "**": return 7;
            case "*": return 4;
            // ุฏุฑ ูุฏู ุฌุฏุฏุ "?" ุงูุชุงุฒ ุจุณุงุฑ ฺฉู ูโฺฏุฑุฏ ุชุง ุฏุฑ ุตูุฑุช ูุจูุฏ ฺฏุฒูู ุจูุชุฑ ุจู ฺฉุงุฑ ุขุฏ
            case "?": return 1;
            case "-": return 0;
            default: return 0;
        }
    }

    // ----------------------------------------------------------------
    // ุชุดุฎุต ูุฌูุฏ ุญุฏุงูู ฺฉ ฺฏุฒูู ุฏุงุฑุง ุงุซุฑ ูุซุจุช (*, **, ***) ุฏุฑ ฺฉู ุฏุงุฏูโูุง
    // (ููุท ุจู ุนููฺฉุดโูุง ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู)
    // ----------------------------------------------------------------
    let hasAnyPositiveOption = false;
    COMPLETE_DATASET.herbicides.forEach(h => {
        if (!h || !h.crop_compatibility || !h.crop_compatibility.includes(product)) return;

        let positiveCount = 0;
        selectedWeeds.forEach(weed => {
            const sym = getEfficiencySymbol(h, weed.name);
            if (isPositiveSymbol(sym)) positiveCount++;
        });

        if (positiveCount > 0) hasAnyPositiveOption = true;
    });

    // ฺฉุงูุฏุฏูุง fallback (ููุท "-" ุง "?" ุฏุงุฑูุฏ) ุจุฑุง ุฒูุงู ฺฉู ูฺ ฺฏุฒูู ูุซุจุช ูุฌูุฏ ูุฏุงุฑุฏ
    const fallbackCandidates = [];

    // ----------------------------------------------------------------
    // ุจุฑุฑุณ ุชฺฉ ุชฺฉ ุนููฺฉุดโูุง (ุจู ุฌุง ุชฺฉู ุจุฑ ูุณุช effectiveHerbicides)
    // ----------------------------------------------------------------
    COMPLETE_DATASET.herbicides.forEach(herbicide => {
        if (!herbicide) return;

        try {
            // ุจุฑุฑุณ ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู
            if (!herbicide.crop_compatibility || !herbicide.crop_compatibility.includes(product)) {
                limited.push({
                    herbicide: herbicide,
                    reason: `ุนุฏู ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู ${product}`
                });
                return;
            }

            // ุจุฑุฑุณ ูุดุฏุงุฑูุง ููุงููุช (ุญูุธ ููุทู ูุงู ุงุตู)
            if (resistanceRegion && herbicide.resistance_level === "ุฎู ุฒุงุฏ") {
                if (herbicide.trade_name === "ฺฏุฑุงูุณุชุงุฑ" || herbicide.trade_name === "ุขุชูุงูุชุณ") {
                    ุงูุฒูุฏู_ูุดุฏุงุฑ(`โ๏ธ ุนููฺฉุด ${herbicide.trade_name} ุจู ุฏูู ุฑุณฺฉ ููุงููุช ุจุงูุงุ ุฏุฑ ุงุณุชุงู ${resistanceRegion} ุจุง ุงุญุชุงุท ูุตุฑู ุดูุฏ.`, herbicide.trade_name);
                }
            }

            // ูุญุงุณุจู ฺฉุงุฑุง ุจุฑ ุงุณุงุณ ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ
            let totalScore = 0;
            const controlledWeeds = [];
            const efficiencyDetails = {};
            let controlledCount = 0;
            let excellentControlCount = 0;
            let goodControlCount = 0;
            let poorControlCount = 0;
            let positiveCount = 0; // ุชุนุฏุงุฏ ุงุซุฑูุง ูุซุจุช (*, **, ***)

            let hasAnyUnknown = false;
            let hasAnyDash = false;

            selectedWeeds.forEach(weed => {
                const efficiency = getEfficiencySymbol(herbicide, weed.name);

                let score = 0;
                let controlLevel = "ูุงูุดุฎุต";

                switch (efficiency) {
                    case "***":
                        score = 10;
                        controlLevel = "ฺฉูุชุฑู ุนุงู";
                        controlledCount++;
                        excellentControlCount++;
                        positiveCount++;
                        break;
                    case "**":
                        score = 7;
                        controlLevel = "ฺฉูุชุฑู ุฎูุจ";
                        controlledCount++;
                        goodControlCount++;
                        positiveCount++;
                        break;
                    case "*":
                        controlLevel = "ฺฉูุชุฑู ุถุนู";
                        poorControlCount++;
                        // ุฏุฑ ุญุงูุช ุณุฎุชโฺฏุฑุงูู (ฺฉ ุนูู ูุฑุฒ ุง 1 ูพููโุจุฑฺฏ + 1 ูุงุฒฺฉโุจุฑฺฏ)ุ
                        // ููุท ** ู *** ุฏุฑ ุงูููุช ูุณุชูุฏุ * ููุท ููุช ูุฌุงุฒ ุงุณุช ฺฉู ูฺ ฺฏุฒูู **/*** ูุฌูุฏ ูุฏุงุดุชู ุจุงุดุฏ.
                        if (!strictQualityMode || !hasAnyPositiveOption) {
                            score = 4;
                            controlledCount++;
                            positiveCount++;
                        } else {
                            score = 0;
                        }
                        break;
                    case "-":
                        score = 0;
                        controlLevel = "ุจุฏูู ุชุงุซุฑ";
                        hasAnyDash = true;
                        break;
                    case "?":
                        score = 1; // ููุท ุจุฑุง fallback ู ุฑุชุจูโุจูุฏ ุฌุฒุฆ
                        controlLevel = "ูุงูุดุฎุต";
                        hasAnyUnknown = true;
                        break;
                    default:
                        score = 0;
                        controlLevel = "ูุงูุดุฎุต";
                }

                totalScore += score;

                // ููุท ููุงุฑุฏ ฺฉู ุจู ูุฑ ุดฺฉู ุงูุชุงุฒ ุฏุงุฑูุฏ ุฏุฑ controlledWeeds ูโุขูุฏ (ุจุฑุง ฺฏุฒุงุฑุด)
                if (score > 0) {
                    controlledWeeds.push({
                        name: weed.name,
                        efficiency: efficiency,
                        score: score,
                        controlLevel: controlLevel,
                        type: weed.type
                    });
                }

                efficiencyDetails[weed.name] = {
                    efficiency: efficiency,
                    controlLevel: controlLevel
                };
            });

            // ----------------------------------------------------------------
            // ููุชุฑ ุงุตู: ุงฺฏุฑ ุญุฏุงูู ฺฉ ฺฏุฒูู ูุซุจุช ุฏุฑ ุณุณุชู ูุฌูุฏ ุฏุงุฑุฏุ
            // ุนููฺฉุดโูุง ฺฉู ูฺ ุงุซุฑ ูุซุจุช ูุฏุงุฑูุฏ ุงุตูุงู ููุงุด ุฏุงุฏู ูุดููุฏ.
            // ----------------------------------------------------------------
            if (positiveCount === 0) {
                if (!hasAnyPositiveOption && (hasAnyUnknown || hasAnyDash)) {
                    // ููุท ุฏุฑ ุดุฑุงุท ููุฏุงู ฺฉุงูู ฺฏุฒูู ูุซุจุชุ ุงูโูุง ุฑุง ูฺฏู ูโุฏุงุฑู ุชุง ฺฉุงุฑุจุฑ ูฺ ุฎุฑูุฌ ุฎุงู ูุจูุฏ.
                    fallbackCandidates.push({
                        herbicide: herbicide,
                        totalScore: totalScore,
                        hasUnknown: hasAnyUnknown,
                        hasDash: hasAnyDash
                    });
                }
                return;
            }

            // ----------------------------------------------------------------
            // ูุญุงุณุจู ูุงฺฉุชูุฑ ููุงููุช (ุญูุธ ููุทู ูุงู ุงุตู)
            // ----------------------------------------------------------------
            let resistanceFactor = 1;
            switch (herbicide.resistance_level) {
                case "ุฎู ุฒุงุฏ": resistanceFactor = 0.6; break;
                case "ุฒุงุฏ": resistanceFactor = 0.8; break;
                case "ูุชูุณุท": resistanceFactor = 0.9; break;
                case "ฺฉู": resistanceFactor = 1.0; break;
                case "ุจุณุงุฑ ฺฉู": resistanceFactor = 1.2; break;
                default: resistanceFactor = 1.0;
            }

            // ูุงฺฉุชูุฑ ูพูุดุด ฺฉูุชุฑู
            const coveragePercentage = (controlledCount / selectedWeeds.length) * 100;
            let coverageFactor = 1;
            if (coveragePercentage >= 80) coverageFactor = 1.3;
            else if (coveragePercentage >= 60) coverageFactor = 1.1;
            else if (coveragePercentage >= 40) coverageFactor = 1.0;
            else coverageFactor = 0.8;

            // ูุงฺฉุชูุฑ ฺฉูุช ฺฉูุชุฑู (ฺฉูุชุฑู ุนุงู ุจุดุชุฑู ุงูุชุงุฒ ุฑุง ุฏุงุฑุฏ)
            let qualityFactor = 1;
            if (excellentControlCount > 0) {
                qualityFactor = 1 + (excellentControlCount * 0.1);
            }

            const finalScore = totalScore * resistanceFactor * coverageFactor * qualityFactor;

            // ุจุฑุฑุณ ุณุงุจูู ูุตุฑู
            let historyWarning = "";
            if (ูุชู_ุณุงุจูู && herbicide.trade_name && ูุชู_ุณุงุจูู.includes(herbicide.trade_name)) {
                historyWarning = `ุงู ุนููฺฉุด ุฏุฑ ุณุงูโูุง ูุจู ุงุณุชูุงุฏู ุดุฏู ุงุณุช. ุญุฏุงฺฉุซุฑ ${herbicide.max_consecutive_years} ุณุงู ูุชูุงู ูุฌุงุฒ ุงุณุช.`;
            }

            const uncontrolledWeeds = selectedWeeds.filter(weed => {
                const sym = getEfficiencySymbol(herbicide, weed.name);
                return !(sym === "***" || sym === "**" || sym === "*");
            });

            const herbData = {
                herbicide: herbicide,
                score: finalScore,
                controlledWeeds: controlledWeeds,
                efficiencyDetails: efficiencyDetails,
                warnings: historyWarning ? [historyWarning] : [],
                coveragePercentage: coveragePercentage,
                controlledCount: controlledCount,
                excellentControlCount: excellentControlCount,
                goodControlCount: goodControlCount,
                poorControlCount: poorControlCount,
                uncontrolledWeeds: uncontrolledWeeds
            };

            // ูุญุฏูุฏุชโูุง ููุทููโุง/ุงุณุชุงู (ุญูุธ ููุทู ูุงู ุงุตู)
            const isRestrictedInRegion = resistanceRegion && (
                herbicide.trade_name === "ุขุชูุงูุชุณ" ||
                herbicide.trade_name === "ฺฏุฑุงูุณุชุงุฑ" ||
                herbicide.trade_name === "ุขฺฉุณุงู" ||
                herbicide.trade_name === "ุขฺฉุณุงู ูุงู" ||
                herbicide.trade_name === "ูพููุง ุณููพุฑ" ||
                herbicide.trade_name === "ุชุงูพฺฉ" ||
                herbicide.trade_name === "ูพุฑุงูพฺฉ"
            );

            if (isRestrictedInRegion) {
    // ุงฺฏุฑ ูุจูุงู ุจุฑุง ููู ุนููฺฉุด ูุดุฏุงุฑ ุฌุฏโุชุฑ ุซุจุช ุดุฏู ุจุงุดุฏุ ุชฺฉุฑุงุฑ ูฺฉู
    if (!ุนููฺฉุดโูุง_ูุดุฏุงุฑ_ุฎูุฑุฏู.has(String(herbicide.trade_name))) {
        ุงูุฒูุฏู_ูุดุฏุงุฑ(`โ๏ธ ุนููฺฉุด ${herbicide.trade_name} ุฏุฑ ุงุณุชุงู ${resistanceRegion} ุจุง ุงุญุชุงุท ูุตุฑู ุดูุฏ.`, herbicide.trade_name);
    }
}

            // ุฏุณุชูโุจูุฏ ุฏู ููุธูุฑู
            if (herbicide.control_scope && herbicide.control_scope.includes("ุฏู ููุธูุฑู")) {
                dualPurpose.push(herbData);
            } else {
                recommended.push(herbData);
            }

        } catch (error) {
            console.error(`ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด ุนููฺฉุด ${herbicide && herbicide.trade_name ? herbicide.trade_name : 'ูุงูุดุฎุต'}:`, error);
        }
    });

    // ----------------------------------------------------------------
    // ุงฺฏุฑ ูฺ ฺฏุฒูู ูุซุจุช ูุฌูุฏ ูุฏุงุดุชุ fallback ุฑุง ูุนุงู ฺฉู (ููุท "-" ุง "?" ูุง)
    // ----------------------------------------------------------------
    if (recommended.length === 0 && dualPurpose.length === 0 && fallbackCandidates.length > 0) {
        // ุงูููุช ุจุง "?" (ูุงูุดุฎุต) ูุณุจุช ุจู "-" (ุจุฏูู ุชุงุซุฑ)
        fallbackCandidates.sort((a, b) => {
            const aPriority = a.hasUnknown ? 2 : (a.hasDash ? 1 : 0);
            const bPriority = b.hasUnknown ? 2 : (b.hasDash ? 1 : 0);
            if (bPriority !== aPriority) return bPriority - aPriority;
            return (b.totalScore || 0) - (a.totalScore || 0);
        });

        const maxShow = Math.min(8, fallbackCandidates.length);
        for (let i = 0; i < maxShow; i++) {
            limited.push({
                herbicide: fallbackCandidates[i].herbicide,
                reason: "ุฏุฑ ุฏุงุฏูโูุง ุจุฑุง ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ ฺฏุฒูู ุฏุงุฑุง ุงุซุฑ ูุซุจุช ุซุจุช ูุดุฏู ุงุณุชุ ุงู ููุฑุฏ ุตุฑูุงู ุจูโุนููุงู ฺฏุฒูู ูุญุฏูุฏ/ูุงูุดุฎุต ููุงุด ุฏุงุฏู ูโุดูุฏ."
            });
        }

        warnings.unshift("โ๏ธ ูฺ ฺฏุฒููโุง ุจุง ุงุซุฑ ูุซุจุช (*ุ ** ุง ***) ุจุฑุง ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ ุงูุช ูุดุฏ. ุฎุฑูุฌ ูุญุฏูุฏ ุงุณุช ู ูุงุฒ ุจู ุจุงุฒุจู ูุฏุงู/ฺฉุงุฑุดูุงุณ ุฏุงุฑุฏ.");
    }

    // ูุฑุชุจโุณุงุฒ ุจุฑ ุงุณุงุณ ุงูุชุงุฒ
    recommended.sort((a, b) => b.score - a.score);
    dualPurpose.sort((a, b) => b.score - a.score);

    // ูุดุฏุงุฑูุง ููุน ฺฉูุชุฑู
    if (hasBroadleaf && hasNarrowleaf) {
        if (!ูุดุฏุงุฑูุง_ุซุจุช_ุดุฏู.has("ฺฉูุชุฑู ููุฒูุงู ูพููโุจุฑฺฏ ู ูุงุฒฺฉโุจุฑฺฏ")) { ูุดุฏุงุฑูุง_ุซุจุช_ุดุฏู.add("ฺฉูุชุฑู ููุฒูุงู ูพููโุจุฑฺฏ ู ูุงุฒฺฉโุจุฑฺฏ"); warnings.unshift("โ๏ธ ุจุฑุง ฺฉูุชุฑู ููุฒูุงู ุนููโูุง ูุฑุฒ ูพููโุจุฑฺฏ ู ูุงุฒฺฉโุจุฑฺฏุ ุงุณุชูุงุฏู ุงุฒ ุนููฺฉุดโูุง ุฏู ููุธูุฑู ุง ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท ุชูุตู ูโุดูุฏ."); }
    }

    if (resistanceRegion) {
        ุงูุฒูุฏู_ูุดุฏุงุฑ(`โ๏ธ ุชูุฌู: ุฏุฑ ุงุณุชุงู ${resistanceRegion} ฺฏุฒุงุฑุด ููุงููุช ุนููฺฉุดโูุง ูุฌูุฏ ุฏุงุฑุฏ. ุฑุนุงุช ุชูุงูุจ ุนููฺฉุดโูุง ู ุงุณุชูุงุฏู ุงุฒ ุชุฑฺฉุจุงุช ุถุฑูุฑ ุงุณุช.`);
    }

    
    // ----------------------------------------------------------------
    // ููุชุฑ ููุง ุณุฎุชโฺฏุฑุงูู ุจุฑุง ุฌููฺฏุฑ ุงุฒ ููุงุด/ุงูุชุฎุงุจ ุณููู ุถุนู ุง ุจโุงุซุฑ
    // ุฏุฑ ุญุงูุชโูุง ุจุณุงุฑ ูุญุฏูุฏ:
    // - ฺฉ ุนูู ูุฑุฒ ุชููุง
    // - ุง ุฏููุงู ฒ ุนูู ูุฑุฒ (ฑ ูพููโุจุฑฺฏ + ฑ ูุงุฒฺฉโุจุฑฺฏ)
    // ููุทู: ุงฺฏุฑ ุจุฑุง ฺฉ ุนูู ูุฑุฒ ฺฏุฒูู **/*** ูุฌูุฏ ุฏุงุฑุฏุ ูุฑฺฏุฒ ุณู ุจุง * / - / ? ุจุฑุง ุขู ุนูู ูุฑุฒ ููุงุด ุฏุงุฏู ูุดูุฏ.
    // ----------------------------------------------------------------
    try {
        const perWeedHasStrong = {};
        selectedWeeds.forEach(w => { if (w && w.name) perWeedHasStrong[w.name] = false; });

        // ุจุฑุฑุณ ูุฌูุฏ ุญุฏุงูู ฺฉ ฺฏุฒูู **/*** ุจุฑุง ูุฑ ุนูู ูุฑุฒ ุงูุชุฎุงุจ (ุจู ุนููฺฉุดโูุง ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู)
        COMPLETE_DATASET.herbicides.forEach(h => {
            if (!h || !h.crop_compatibility || !h.crop_compatibility.includes(product)) return;
            selectedWeeds.forEach(w => {
                if (!w || !w.name) return;
                const sym = getEfficiencySymbol(h, w.name);
                if (sym === "***" || sym === "**") perWeedHasStrong[w.name] = true;
            });
        });

        const allowStarForWeed = (weedName) => !perWeedHasStrong[weedName];

        const passStrict = (herbData) => {
            if (!herbData || !herbData.efficiencyDetails) return false;

            let strongHits = 0;
            for (const w of selectedWeeds) {
                if (!w || !w.name) continue;

                const d = herbData.efficiencyDetails[w.name];
                const sym = d && d.efficiency ? d.efficiency : "?";

                if (sym === "***" || sym === "**") {
                    strongHits++;
                    continue;
                }

                // ุงฺฏุฑ ุจุฑุง ุงู ุนูู ูุฑุฒ ฺฏุฒูู ูู ูุฌูุฏ ุฏุงุฑุฏุ ูุฑฺฏุฒ * / - / ? ุฑุง ููพุฐุฑ
                if (perWeedHasStrong[w.name]) return false;

                // ุงฺฏุฑ ูฺ ฺฏุฒูู ูู ูุฌูุฏ ูุฏุงุฑุฏุ ููุท * (ุจู ุนููุงู ุขุฎุฑู ุฑุงู) ูุงุจู ูุจูู ุงุณุช
                if (sym === "*" && allowStarForWeed(w.name)) continue;

                // - ู ? ูุฑฺฏุฒ ุจุฑุง ูพุดููุงุฏ/ุชูุงูุจ ููุงุณุจ ูุณุชูุฏ
                return false;
            }

            // ุจุงุฏ ุญุฏุงูู ฺฉ ุถุฑุจู ูู (**) ุง (***) ูุฌูุฏ ุฏุงุดุชู ุจุงุดุฏ ุชุง ูุงุฑุฏ ูพุดููุงุฏ ุดูุฏ
            return strongHits > 0;
        };

        if (strictQualityMode) {
            const f = (arr) => Array.isArray(arr) ? arr.filter(passStrict) : [];
            const rec2 = f(recommended);
            const dual2 = f(dualPurpose);

            // ุงฺฏุฑ ุจู ุฏูู ุณุฎุชโฺฏุฑ ุฎุฑูุฌ ุฎุงู ุดุฏุ ุงุฌุงุฒู ุฏูุฏ * ููุท ุจุฑุง ุนูู(ูุง) ฺฉู ูฺ ฺฏุฒูู ูู ูุฏุงุฑูุฏ ูุงุฑุฏ ุดูุฏ
            if (rec2.length === 0 && dual2.length === 0) {
                // ฺฉ ุฑูฺฉุณ ฺฉูุชุฑูโุดุฏู: ุณู ุจุงุฏ ุญุฏุงูู ฺฉ * ุฏุงุดุชู ุจุงุดุฏ ู ูฺ -/? ูุฏุงุดุชู ุจุงุดุฏ
                const passRelaxed = (herbData) => {
                    if (!herbData || !herbData.efficiencyDetails) return false;
                    let hasStar = false;
                    for (const w of selectedWeeds) {
                        const d = herbData.efficiencyDetails[w.name];
                        const sym = d && d.efficiency ? d.efficiency : "?";
                        if (sym === "-" || sym === "?") return false;
                        if (sym === "*") hasStar = true;
                    }
                    return hasStar;
                };
                recommended.splice(0, recommended.length, ...recommended.filter(passRelaxed));
                dualPurpose.splice(0, dualPurpose.length, ...dualPurpose.filter(passRelaxed));
            } else {
                recommended.splice(0, recommended.length, ...rec2);
                dualPurpose.splice(0, dualPurpose.length, ...dual2);
            }
        }
    } catch (e) {
        console.error("ุฎุทุง ุฏุฑ ููุชุฑ ููุง ุณุฎุชโฺฏุฑุงูู:", e);
    }

    // ุงุจุฒุงุฑ ุชุณุช ุฏุงุฎู (ุฏุฑ ฺฉูุณูู): window.__testStrictFiltering()
    window.__testStrictFiltering = function() {
        try {
            const report = { total: 0, ok: 0, issues: [] };
            COMPLETE_DATASET.weeds.forEach(w => {
                if (!w) return;
                const sel = [{ id: w.id, name: w.name, fullName: w.fullName, type: w.type, category: w.category, effectiveHerbicides: w.effectiveHerbicides || [], priority: w.priority || 3 }];
                const res = analyzeHerbicidesForSelectedWeeds(sel, product, resistanceRegion, herbicideHistory);
                report.total++;
                const anyBad = (res.recommended || []).concat(res.dualPurpose || []).some(hd => {
                    const d = hd.efficiencyDetails && hd.efficiencyDetails[w.name];
                    const sym = d && d.efficiency ? d.efficiency : "?";
                    return !(sym === "***" || sym === "**");
                });
                if (!anyBad) report.ok++;
                else report.issues.push(w.name);
            });
            console.log("StrictFiltering Test:", report);
            return report;
        } catch(err) {
            console.error("Test failed:", err);
            return null;
        }
    };

return {
        recommended: recommended,
        limited: limited,
        dualPurpose: dualPurpose,
        warnings: warnings,
        hasBroadleaf: hasBroadleaf,
        hasNarrowleaf: hasNarrowleaf,
        selectedWeeds: selectedWeeds
    };
}
// ==================== ุชุงุจุน ุงุตู ุชููุฏ ุชูุงูุจ ุจุง ููุทู ุฌุฏุฏ ====================
function generateRotationPlanForSelectedWeeds(analysis, selectedWeeds, rotationYears, strategy) {
    const hasBroadleaf = analysis.hasBroadleaf;
    const hasNarrowleaf = analysis.hasNarrowleaf;
    const plan = [];
    let strategyText = "";

    // ุชูุธูุงุช ููุชุฑ
    const includeDualPurpose = document.getElementById('include_dual_purpose').checked;
    const avoidSameHRAC = document.getElementById('avoid_same_hrac').checked;
    const prioritizeLowRisk = document.getElementById('prioritize_low_risk').checked;

    switch(strategy) {
        case "efficiency-first":
            strategyText = "ุงุณุชุฑุงุชฺ: ุงูููุช ฺฉุงุฑุง - ุงูุชุฎุงุจ ุนููฺฉุดโูุง ุจุง ุจุงูุงุชุฑู ฺฉุงุฑุง ุจุฑ ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ";
            break;
        case "resistance-management":
            strategyText = "ุงุณุชุฑุงุชฺ: ูุฏุฑุช ููุงููุช - ุงูููุช ุชูุงูุจ ุฎุงููุงุฏูโูุง ู ฺฏุฑููโูุง ฺฉูโุฎุทุฑุชุฑ";
            break;
        case "balanced":
            strategyText = "ุงุณุชุฑุงุชฺ: ูุชูุงุฒู - ุชุฑฺฉุจ ฺฉุงุฑุง ุจุงูุง ู ูุฏุฑุช ููุงููุช";
            break;
        case "cost-effective":
            strategyText = "ุงุณุชุฑุงุชฺ: ููุฑูู ุจู ุตุฑูู - ุงูุชุฎุงุจ ุนููฺฉุดโูุง ุจุง ูุฒูู ฺฉูุชุฑ ู ฺฉุงุฑุง ูุงุจู ูุจูู";
            break;
        default:
            strategyText = "ุงุณุชุฑุงุชฺ: ุงูููุช ฺฉุงุฑุง";
    }

    // ูุณุช ุนููฺฉุดโูุง ุชุญููโุดุฏู (ุชูุตูโุดุฏู + ุฏู ููุธูุฑู ุฏุฑ ุตูุฑุช ุงูุชุฎุงุจ)
    let allHerbicides = [...(analysis.recommended || [])];
    if (includeDualPurpose) {
        allHerbicides.push(...(analysis.dualPurpose || []));
    }

    if (allHerbicides.length === 0) {
        return {
            plan: [],
            strategy: strategyText,
            hasBroadleaf: hasBroadleaf,
            hasNarrowleaf: hasNarrowleaf,
            rotationYears: rotationYears,
            strategyType: strategy
        };
    }

    // ุงุถุงูู ฺฉุฑุฏู ุฎุงููุงุฏู ุดูุง (ููุทู ูุงู ุงุตู)
    allHerbicides.forEach(item => {
        if (!item.family || item.family === 'Unknown' || item.family === 'ูุงูุดุฎุต' || item.family === 'ูุงุดูุงุฎุชู') {
            item.family = (item.herbicide && item.herbicide.chemical_family) ? item.herbicide.chemical_family : getChemicalFamily(item.herbicide.trade_name);
        }
});

    // ุฏุณุชูโุจูุฏ ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ
    const BROAD = selectedWeeds.filter(w => w.type === "broadleaf");
    const NARROW = selectedWeeds.filter(w => w.type === "narrowleaf");
    const needBoth = (BROAD.length > 0 && NARROW.length > 0);

    // ------------------ ุชูุงุจุน ฺฉูฺฉ ฺฉุงุฑุง/ูพูุดุด ------------------
    function isPositiveEff(eff) {
        return eff === "***" || eff === "**";
    }

    function effToScore(eff) {
        if (eff === "***") return 3;
        if (eff === "**") return 2;
        // ุถุนู/ูุงูุดุฎุต/ุจุฏูู ุงุซุฑ ุฏุฑ ุชูุงูุจ ยซูุคุซุฑยป ูุญุณูุจ ููโุดูุฏ
        return 0;
    }

    function getEffSymbol(herbData, weed) {
        try {
            if (!herbData || !herbData.efficiencyDetails) return "?";
            const d = herbData.efficiencyDetails[weed.name];
            return d && d.efficiency ? d.efficiency : "?";
        } catch (e) {
            return "?";
        }
    }

    function coversAny(herbData, weedsSubset) {
        for (const w of (weedsSubset || [])) {
            const s = getEffSymbol(herbData, w);
            if (isPositiveEff(s)) return true;
        }
        return false;
    }

    function subsetScore(herbData, weedsSubset) {
        let score = 0;
        let positiveCount = 0;
        let excellentCount = 0;
        let goodCount = 0;
        let poorCount = 0;

        (weedsSubset || []).forEach(w => {
            const s = getEffSymbol(herbData, w);
            if (s === "***") { score += 3; positiveCount++; excellentCount++; }
            else if (s === "**") { score += 2; positiveCount++; goodCount++; }
            else if (s === "*") { /* ุถุนู: ุฏุฑ ุชูุงูุจ ูุคุซุฑ ูุญุณูุจ ููโุดูุฏ */ poorCount++; }

        });

        return { score, positiveCount, excellentCount, goodCount, poorCount };
    }

    function comboScore(herbDataList, weedsSubset) {
        // ุงูุชุงุฒุฏู ุชุฑฺฉุจ (ฺฉุงุฑุง ุชุฑฺฉุจ) = ุจุฑุง ูุฑ ุนูู ูุฑุฒ ุจูุชุฑู ฺฉุงุฑุง ุจู ุนููฺฉุดโูุง ุณุงู ุงูุชุฎุงุจ ุดูุฏ
        let score = 0;
        let positiveCount = 0;
        let excellentCount = 0;
        let goodCount = 0;
        let poorCount = 0;

        (weedsSubset || []).forEach(w => {
            let best = 0;
            (herbDataList || []).forEach(hd => {
                best = Math.max(best, effToScore(getEffSymbol(hd, w)));
            });
            if (best > 0) {
                positiveCount++;
                score += best;
                if (best === 3) excellentCount++;
                else if (best === 2) goodCount++;
                else poorCount++;
            }
        });

        return { score, positiveCount, excellentCount, goodCount, poorCount };
    }

    function scoreToPercent(scoreObj, totalWeedsCount) {
        if (!totalWeedsCount) return 0;
        // ุฏุฑุตุฏ ูพูุดุด ุจุฑ ุงุณุงุณ ุชุนุฏุงุฏ ุนููโูุง ูุฑุฒ ุฏุงุฑุง ุญุฏุงูู ฺฉุงุฑุง ูุซุจุช
        return Math.round((scoreObj.positiveCount / totalWeedsCount) * 100);
    }

    function isDualPurposeHerb(herb) {
        if (!herb || !herb.control_scope) return false;
        if (herb.control_scope.includes("ุฏู ููุธูุฑู")) return true;
        const hasB = herb.control_scope.includes("ูพููโุจุฑฺฏ");
        const hasN = herb.control_scope.includes("ูุงุฒฺฉโุจุฑฺฏ");
        return hasB && hasN;
    }
    function isBroadHerb(herb) {
        return herb && herb.control_scope && herb.control_scope.includes("ูพููโุจุฑฺฏ");
    }
    function isNarrowHerb(herb) {
        return herb && herb.control_scope && herb.control_scope.includes("ูุงุฒฺฉโุจุฑฺฏ");
    }

    
    // ---- ฺฉูฺฉโุชุงุจุนโูุง ุจุฑุง ุชุดุฎุต ยซููุท ูพููโุจุฑฺฏโฺฉุดยป ู ยซููุท ูุงุฒฺฉโุจุฑฺฏโฺฉุดยป (ุจุฑุง ุจุฑูุงูู ุชูุงูุจ ุฌุฏุฏ) ----
    function isDualHerb(herb) {
        const sc = (herb && herb.control_scope) ? herb.control_scope : [];
        return Array.isArray(sc) ? sc.includes("ุฏู ููุธูุฑู") : String(sc).includes("ุฏู ููุธูุฑู");
    }
    function isBroadleafOnly(herb) {
        return isBroadHerb(herb) && !isDualHerb(herb) && !isNarrowHerb(herb);
    }
    function isNarrowleafOnly(herb) {
        return isNarrowHerb(herb) && !isDualHerb(herb) && !isBroadHerb(herb);
    }

// --- ููุทู ุฌููฺฏุฑ ุงุฒ ฺฏุฒููโูุง ุจุณุงุฑ ฺฉูโุทู (ฑ-ฒ ุนูู ูุฑุฒ ุงุฒ ูุฌููุนู) ---
    function pruneLowSpectrumCandidates(candidates, weedsSubset) {
        const withScores = (candidates || []).map(hd => ({ hd, sc: subsetScore(hd, weedsSubset) }));
        const maxPositive = Math.max(0, ...withScores.map(x => x.sc.positiveCount));
        // ุงฺฏุฑ ฺฏุฒููโูุง ุจูุชุฑ ูุฌูุฏ ุฏุงุฑุฏุ ููุงุฑุฏ ุจุง ูพูุดุด ฑ ุง ฒ ุญุฐู ุดููุฏ
        if (maxPositive >= 3) {
            const pruned = withScores.filter(x => x.sc.positiveCount >= 3).map(x => x.hd);
            return pruned.length ? pruned : (candidates || []);
        }
        return candidates || [];
    }

    function riskMultiplier(herbData) {
        if (!prioritizeLowRisk) return 1;
        const level = (herbData && herbData.herbicide && herbData.herbicide.resistance_level) ? herbData.herbicide.resistance_level : "";
        // ูฺฏุงุดุช ุณุงุฏู: ฺฉู > ูุชูุณุท > ุจุงูุง
        if (level.includes("ฺฉู")) return 1.08;
        if (level.includes("ูุชูุณุท")) return 1.00;
        if (level.includes("ุจุงูุง")) return 0.92;
        return 1.00;
    }

    // --- ููุงูู ALS ุฏุฑ ุฏูุฑู ด ุณุงูู: ุญุฏุงฺฉุซุฑ ุฏุฑ ฒ ุณุงู ---
    const ALS_MAX_YEARS = 2;
    function countFamilyYearsUsageInPlan(planArr, family) {
        let years = 0;
        (planArr || []).forEach(y => {
            const families = new Set();
            if (y && Array.isArray(y.herbicides)) {
                y.herbicides.forEach(it => {
                    const f = it && it.data ? it.data.family : null;
                    if (f) families.add(f);
                });
            }
            if (families.has(family)) years++;
        });
        return years;
    }
    function yearWillUseALS(picks) {
        return (picks || []).some(p => p && p.family === "ALS");
    }

    // --- ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ HRAC ุณุงูุงูู/ูุชูุงู ---
    function hracParts(hrac) {
        if (!hrac) return [];
        return String(hrac).split(/[\s,+/]+/).map(s => s.trim()).filter(Boolean);
    }
    function getPrevYearHRACPartsSet(planArr) {
        const set = new Set();
        if (!planArr || !planArr.length) return set;
        const last = planArr[planArr.length - 1];
        (last && Array.isArray(last.herbicides) ? last.herbicides : []).forEach(it => {
            const h = it && it.data && it.data.herbicide ? it.data.herbicide : null;
            if (h && h.hrac_group) hracParts(h.hrac_group).forEach(p => set.add(p));
        });
        return set;
    }
    function violatesAvoidSameHRACWithPrevYear(herbData, prevPartsSet) {
        if (!avoidSameHRAC) return false;
        const h = herbData && herbData.herbicide;
        if (!h || !h.hrac_group) return false;
        const parts = hracParts(h.hrac_group);
        for (const p of parts) {
            if (prevPartsSet.has(p)) return true;
        }
        return false;
    }
    function hracOverlap(h1, h2) {
        if (!avoidSameHRAC) return false;
        const s1 = new Set(hracParts(h1 && h1.hrac_group));
        for (const p of hracParts(h2 && h2.hrac_group)) {
            if (s1.has(p)) return true;
        }
        return false;
    }

    // ุชููุฏ ุชูุงูุจ ุจุง ุฑุนุงุช ููุงูู ูุงู ุงุตู + ููุทู ฺฉุงุฑุง ุชุฑฺฉุจ
    let usedFamilies = [];
    let planSoFar = [];

    for (let year = 1; year <= rotationYears; year++) {
        let yearPlan = {
            year: year,
            description: "",
            herbicides: [],
            family: null
        };

        // ุฎุงููุงุฏูโูุง ูุฌุงุฒ ุงู ุณุงู (ููุทู ูุงู ุงุตู)
        let availableFamilies = getAvailableFamiliesForYear(
            usedFamilies,
            allHerbicides,
            rotationYears,
            year,
            planSoFar
        );

        // ุงฺฏุฑ ุจุฑุง ุงู ุณุงู ูฺ ุฎุงููุงุฏูโุง ูุฌุงุฒ ูุจูุฏุ ุญุฏุงูู ุฎุงููุงุฏูโูุง ฺฉูโูุตุฑูโุชุฑ ุฑุง ุขุฒุงุฏ ฺฉู
        if (!availableFamilies || availableFamilies.length === 0) {
            const allFamiliesSet = new Set(allHerbicides.map(x => x.family).filter(Boolean));
            const familiesWithUsage = Array.from(allFamiliesSet).map(family => ({
                family,
                usage: countFamilyUsageInPlan(planSoFar, family),
                maxUsage: getFamilyMaxUsage(family, rotationYears)
            }));
            familiesWithUsage.sort((a, b) => (a.usage / a.maxUsage) - (b.usage / b.maxUsage));
            availableFamilies = familiesWithUsage
                .filter(f => f.usage < f.maxUsage)
                .slice(0, 4)
                .map(f => f.family);
        }

        const prevHRACParts = getPrevYearHRACPartsSet(planSoFar);
        const alsYearsUsedSoFar = countFamilyYearsUsageInPlan(planSoFar, "ALS");

        // ฺฉุงูุฏุฏูุง ุณุงู ุฌุงุฑ ุจุฑ ุงุณุงุณ ุฎุงููุงุฏูโูุง ูุฌุงุฒ
        const candidatesThisYearRaw = allHerbicides.filter(hd => availableFamilies.includes(hd.family));
        // ุงฺฏุฑ ุจู ูุฑ ุฏูู ุฏุฑ ุงู ุณุงู ฺฉุงูุฏุฏ ูุนุชุจุฑ ูุจูุฏุ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุฑูุฌ ุฎุงูุ ุงุฒ ฺฉู ูุณุช ุนููฺฉุดโูุง ูุคุซุฑ ุงุณุชูุงุฏู ูโฺฉูู.
        const candidatesThisYear = (candidatesThisYearRaw && candidatesThisYearRaw.length) ? candidatesThisYearRaw : allHerbicides;

        if (needBoth) {
            // ================== ุญุงูุช ูุฌูุฏ ูุฑ ุฏู ฺฏุฑูู ูพููโุจุฑฺฏ + ูุงุฒฺฉโุจุฑฺฏ ==================
            // ูุฏู: ุฏุฑ ูุฑ ุณุงู ุง (ุงูู) ฺฉ ุฏู ููุธูุฑู ุจุง ูพูุดุด ุจุงูุง ุจุฑ ฺฉู ุทูุ ุง (ุจ) ฺฉ ูุงุฒฺฉโุจุฑฺฏโฺฉุด + ฺฉ ูพููโุจุฑฺฏโฺฉุด ุจุง ฺฉุงุฑุง ุชุฑฺฉุจ ุจุงูุง.

            // --- ุฏู ููุธูุฑูโูุง ---
            let dualCandidates = candidatesThisYear
                .filter(hd => isDualPurposeHerb(hd.herbicide))
                .filter(hd => coversAny(hd, BROAD) && coversAny(hd, NARROW));

            dualCandidates = pruneLowSpectrumCandidates(dualCandidates, selectedWeeds);
            dualCandidates = dualCandidates.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));
            if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                // ุฏุฑ ุตูุฑุช ูพุฑ ุดุฏู ุณูู ALSุ ุฏู ููุธูุฑูโูุง ALS ุญุฐู ูโุดููุฏ ูฺฏุฑ ุงูฺฉู ูฺ ฺฏุฒูู ุฏฺฏุฑ ุจุงู ููุงูุฏ
                const nonALS = dualCandidates.filter(hd => hd.family !== "ALS");
                if (nonALS.length) dualCandidates = nonALS;
            }

            dualCandidates.sort((a, b) => {
                const sa = subsetScore(a, selectedWeeds);
                const sb = subsetScore(b, selectedWeeds);
                const ra = (sa.score * 1000) + (sa.positiveCount * 50) + (a.score || 0);
                const rb = (sb.score * 1000) + (sb.positiveCount * 50) + (b.score || 0);
                return rb - ra;
            });

            const bestDual = dualCandidates.length ? dualCandidates[0] : null;
            const bestDualMetrics = bestDual ? subsetScore(bestDual, selectedWeeds) : null;

            // --- ุฒูุฌ (ูุงุฒฺฉ ุจุฑฺฏ ฺฉุด + ูพูู ุจุฑฺฏ ฺฉุด) ุจุง ฺฉุงุฑุง ุชุฑฺฉุจ ---
            let narrowCandidates = candidatesThisYear
                .filter(hd => isNarrowHerb(hd.herbicide))
                .filter(hd => coversAny(hd, NARROW));

            let broadCandidates = candidatesThisYear
                .filter(hd => isBroadHerb(hd.herbicide))
                .filter(hd => coversAny(hd, BROAD));

            narrowCandidates = pruneLowSpectrumCandidates(narrowCandidates, NARROW);
            broadCandidates = pruneLowSpectrumCandidates(broadCandidates, BROAD);

            // ููุชุฑ HRAC ูุชูุงู ู ุณูู ALS
            narrowCandidates = narrowCandidates.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));
            broadCandidates  = broadCandidates.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));

            if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                const narrowNonALS = narrowCandidates.filter(hd => hd.family !== "ALS");
                if (narrowNonALS.length) narrowCandidates = narrowNonALS;

                const broadNonALS = broadCandidates.filter(hd => hd.family !== "ALS");
                if (broadNonALS.length) broadCandidates = broadNonALS;
            }

            // ---- ูฺฉุณ: ุงฺฏุฑ ุฏุฑ ุงู ุณุงู ุจูโุฏูู ูุญุฏูุฏุช ุฎุงููุงุฏู/HRAC ฺฉ ุงุฒ ุฏู ฺฏุฑูู (ูพููโุจุฑฺฏ/ูุงุฒฺฉโุจุฑฺฏ) ฺฉุงูุฏุฏ ูุฏุงุดุชุ
            // ุงุฒ ฺฉู ูุณุช ุนููฺฉุดโูุง ูุคุซุฑ (ุจุฏูู ูุญุฏูุฏุช ุฎุงููุงุฏู ุงู ุณุงู) ุจุฑุง ููุงู ฺฏุฑูู ฺฉูฺฉ ูโฺฏุฑู ุชุง ุฎุฑูุฌ ฺฉโุทุฑูู (ููุท ูพููโุจุฑฺฏ ุง ููุท ูุงุฒฺฉโุจุฑฺฏ) ูุดูุฏ.
            
            if (!narrowCandidates || narrowCandidates.length === 0) {
                const baseNarrow = allHerbicides
                    .filter(hd => isNarrowleafOnly(hd.herbicide))
                    .filter(hd => coversAny(hd, NARROW));

                // ุงุจุชุฏุง ุจุง ูุญุฏูุฏุช HRAC ูุชูุงู
                let constrained = baseNarrow.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));

                // ุงฺฏุฑ ูฺ ฺฏุฒููโุง ููุงูุฏุ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุณููุท ุฎุฑูุฌ ุจู ุชฺฉโุณูุ ูุญุฏูุฏุช HRAC ุฑุง ููุท ุฏุฑ ููู ุณุงู/ฺฏุฑูู ุจุฑูโุฏุงุฑู
                narrowCandidates = constrained.length ? constrained : baseNarrow;

                if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                    const nonALS = narrowCandidates.filter(hd => hd.family !== "ALS");
                    if (nonALS.length) narrowCandidates = nonALS;
                }
narrowCandidates = pruneLowSpectrumCandidates(narrowCandidates, NARROW);
            }
            
            if (!broadCandidates || broadCandidates.length === 0) {
                const baseBroad = allHerbicides
                    .filter(hd => isBroadleafOnly(hd.herbicide))
                    .filter(hd => coversAny(hd, BROAD));

                let constrained = baseBroad.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));
                broadCandidates = constrained.length ? constrained : baseBroad;

                if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                    const nonALS = broadCandidates.filter(hd => hd.family !== "ALS");
                    if (nonALS.length) broadCandidates = nonALS;
                }
broadCandidates = pruneLowSpectrumCandidates(broadCandidates, BROAD);
            }

            // ูุฑุชุจโุณุงุฒ ฺฉุงูุฏุฏูุง (ูพูุดุด ุจุดุชุฑ ููุฏู)
            narrowCandidates.sort((a, b) => {
                const sa = subsetScore(a, NARROW);
                const sb = subsetScore(b, NARROW);
                const ra = (sa.score * 1000) + (sa.positiveCount * 50) + (a.score || 0);
                const rb = (sb.score * 1000) + (sb.positiveCount * 50) + (b.score || 0);
                return rb - ra;
            });
            broadCandidates.sort((a, b) => {
                const sa = subsetScore(a, BROAD);
                const sb = subsetScore(b, BROAD);
                const ra = (sa.score * 1000) + (sa.positiveCount * 50) + (a.score || 0);
                const rb = (sb.score * 1000) + (sb.positiveCount * 50) + (b.score || 0);
                return rb - ra;
            });

            // ุฌุณุชุฌู ุจูุชุฑู ุฒูุฌ ุงุฒ ูุงู ุจูุชุฑูโูุง ูุฑ ูุณุช (ุจุฑุง ูพูุดุด ฺฉู ุจูุชุฑ)
            const topN = 8;
            const narrowTop = narrowCandidates.slice(0, topN);
            const broadTop  = broadCandidates.slice(0, topN);

            let bestPair = null;
            let bestPairMetrics = null;
            let bestPairScore = -Infinity;

            for (let i = 0; i < narrowTop.length; i++) {
                for (let j = 0; j < broadTop.length; j++) {
                    const n = narrowTop[i];
                    const b = broadTop[j];
                    if (!n || !b) continue;
                    if (n.herbicide.id === b.herbicide.id) continue;

                    // ุฏุฑ ฺฉ ุณุงูุ ุชุฑุฌุญุงู ุฎุงููุงุฏู ูุชูุงูุช ุจุงุดุฏ
                    if (n.family === b.family) continue;

                    // ุฏุฑ ฺฉ ุณุงูุ ุฏุฑ ุตูุฑุช ูุนุงู ุจูุฏู ูพุฑูุฒ HRACุ ุงุฒ ููโูพูุดุงู HRAC ุฌููฺฏุฑ ุดูุฏ
                    if (hracOverlap(n.herbicide, b.herbicide)) continue;

                    // ุณูู ALS ุฏุฑ ุณุงูโูุง ดุณุงูู
                    if (yearWillUseALS([n, b]) && alsYearsUsedSoFar >= ALS_MAX_YEARS) continue;

                    const metrics = comboScore([n, b], selectedWeeds);
                    const baseScore = (metrics.score * 1000) + (metrics.positiveCount * 50)
                        + (metrics.excellentCount * 20) + (metrics.goodCount * 10)
                        + (n.score || 0) + (b.score || 0);

                    // ุชุนุฏู ุจุฑ ุงุณุงุณ ุฑุณฺฉ ููุงููุช
                    const finalScore = baseScore * riskMultiplier(n) * riskMultiplier(b);

                    if (finalScore > bestPairScore) {
                        bestPairScore = finalScore;
                        bestPair = { narrow: n, broad: b };
                        bestPairMetrics = metrics;
                    }
                }
            }

            
            // ---- ูฺฉุณ: ุงฺฏุฑ ุจู ุฏูู ูุญุฏูุฏุชโูุง ุฒูุฌโุณุงุฒ (HRAC/ุฎุงููุงุฏู) ูฺ ุฒูุฌ ูพุฏุง ูุดุฏ ูู
            // ูุฑ ุฏู ฺฏุฑูู ฺฉุงูุฏุฏ ุฏุงุฑูุฏุ ฺฉ ุฒูุฌ ยซุญุฏุงููยป ุงุฒ ุจูุชุฑู ูุงุฒฺฉโุจุฑฺฏโฺฉุด ู ุจูุชุฑู ูพููโุจุฑฺฏโฺฉุด ูโุณุงุฒู
            // ุชุง ุฎุฑูุฌ ุณุงู ุจู ุญุงูุช ุชฺฉโุณู ุณููุท ูฺฉูุฏ (ูุงููุฏ ุณุงู ุฏูู ุขุฏููุณ + ุฏูโุฑูุจุงู ฺฉุดุฏู).
            if (!bestPair && narrowTop.length && broadTop.length) {
                let n0 = narrowTop[0];
                let b0 = broadTop.find(x => x && x.herbicide && n0 && n0.herbicide && x.herbicide.id !== n0.herbicide.id) || broadTop[0];
                if (n0 && b0 && n0.herbicide && b0.herbicide && n0.herbicide.id !== b0.herbicide.id) {
                    bestPair = { narrow: n0, broad: b0 };
                    bestPairMetrics = comboScore([n0, b0], selectedWeeds);
                    // ุงูุชุงุฒ ุญุฏุงูู (ุจุฏูู ุณุฎุชโฺฏุฑ ุฒูุฌโุณุงุฒ)
                    bestPairScore = (bestPairMetrics.score * 1000) + (bestPairMetrics.positiveCount * 50)
                        + (bestPairMetrics.excellentCount * 20) + (bestPairMetrics.goodCount * 10)
                        + (n0.score || 0) + (b0.score || 0);
                }
            }

// ------------------ ุงูุชุฎุงุจ ููุง: ุฏู ููุธูุฑู ุง ุฒูุฌ ------------------
            let finalMode = null;

            if (bestDual && bestPair) {
                // ููุงุณู ุจุฑ ุงุณุงุณ ูพูุดุด ู ุงูุชุงุฒ ุชุฑฺฉุจ
                const dualPct = scoreToPercent(bestDualMetrics, selectedWeeds.length);
                const pairPct = scoreToPercent(bestPairMetrics, selectedWeeds.length);

                // ุงฺฏุฑ ุฏู ููุธูุฑู ูพูุดุด ุง ุงูุชุงุฒ ุจุงูุงุชุฑ ุฏุงุดุชู ุจุงุดุฏุ ุงูุชุฎุงุจ ุดูุฏ
                const dualComposite = (bestDualMetrics.score * 1000) + (bestDualMetrics.positiveCount * 50) + (bestDual.score || 0);
                const pairComposite = (bestPairMetrics.score * 1000) + (bestPairMetrics.positiveCount * 50) + (bestPair.narrow.score || 0) + (bestPair.broad.score || 0);

                if (dualPct > pairPct || (dualPct === pairPct && dualComposite >= pairComposite)) {
                    finalMode = "dual";
                } else {
                    finalMode = "pair";
                }
            } else if (bestPair) {
                finalMode = "pair";
            } else if (bestDual) {
                finalMode = "dual";
            }

            // ุฏุฑ ุตูุฑุช ูุจูุฏู ฺฏุฒูู ุงุณุชุงูุฏุงุฑุฏุ ุจู ุตูุฑุช ุญุฏุงูู ุงุฒ ุจูุชุฑู ุชฺฉโุณู (ูพูุดุด ูุซุจุช) ุงุณุชูุงุฏู ูโุดูุฏ
            if (!finalMode) {
                const fallback = pruneLowSpectrumCandidates(candidatesThisYear.filter(hd => coversAny(hd, selectedWeeds)), selectedWeeds)
                    .filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));
                if (fallback.length) {
                    finalMode = "single";
                    bestPair = null;
                    dualCandidates = fallback;
                }
            }

            if (finalMode === "dual") {
                const herb = bestDual.herbicide;
                yearPlan.herbicides.push({ type: "ุฏู ููุธูุฑู", data: bestDual });

                const groupInfo = COMPLETE_DATASET.hrac_groups[herb.hrac_group] || { name: herb.hrac_group };
                const pct = scoreToPercent(bestDualMetrics, selectedWeeds.length);

                yearPlan.description = `ุณุงู ${year}: ${herb.trade_name} (ุฏู ููุธูุฑู)`;
                yearPlan.family = bestDual.family;
                yearPlan.details = {
                    family: bestDual.family,
                    hracGroup: herb.hrac_group,
                    groupName: groupInfo.name,
                    coverage: `${bestDualMetrics.positiveCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${pct}%)`,
                    riskLevel: herb.resistance_level || "ูุงูุดุฎุต"
                };

                plan.push(yearPlan);
                planSoFar.push(yearPlan);
                usedFamilies.push(bestDual.family);

                saveRotationHistory(selectedWeeds, herb, year);

                // ุนุฏู ุชฺฉุฑุงุฑ ููุงู ุนููฺฉุด ุฏุฑ ุณุงูโูุง ุจุนุฏ (ุจุฑุง ุชููุน)
                allHerbicides = allHerbicides.filter(h => h.herbicide.id !== herb.id);
            } else if (finalMode === "pair") {
                const n = bestPair.narrow;
                const b = bestPair.broad;

                const herbN = n.herbicide;
                const herbB = b.herbicide;

                yearPlan.herbicides.push({ type: "ูุงุฒฺฉโุจุฑฺฏ", data: n });
                yearPlan.herbicides.push({ type: "ูพููโุจุฑฺฏ", data: b });

                const pct = scoreToPercent(bestPairMetrics, selectedWeeds.length);
                yearPlan.description = `ุณุงู ${year}: ${herbN.trade_name} + ${herbB.trade_name}`;
                yearPlan.family = `${n.family} + ${b.family}`;

                yearPlan.details = {
                    family: yearPlan.family,
                    coverage: `${bestPairMetrics.positiveCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${pct}%)`,
                    narrow: { name: herbN.trade_name, family: n.family, hrac: herbN.hrac_group },
                    broad: { name: herbB.trade_name, family: b.family, hrac: herbB.hrac_group }
                };

                plan.push(yearPlan);
                planSoFar.push(yearPlan);

                usedFamilies.push(n.family);
                usedFamilies.push(b.family);

                saveRotationHistory(selectedWeeds, herbN, year);
                saveRotationHistory(selectedWeeds, herbB, year);

                // ุนุฏู ุชฺฉุฑุงุฑ ููุงู ุณููู ุฏุฑ ุณุงูโูุง ุจุนุฏ (ุจุฑุง ุชููุน)
                allHerbicides = allHerbicides.filter(h => h.herbicide.id !== herbN.id && h.herbicide.id !== herbB.id);
            } else if (finalMode === "single") {
                const best = dualCandidates[0];
                const herb = best.herbicide;
                const sc = subsetScore(best, selectedWeeds);
                const pct = scoreToPercent(sc, selectedWeeds.length);

                yearPlan.herbicides.push({ type: "ฺฏุฒูู ุฌุงฺฏุฒู", data: best });
                yearPlan.description = `ุณุงู ${year}: ${herb.trade_name}`;
                yearPlan.family = best.family;
                yearPlan.details = {
                    family: best.family,
                    hracGroup: herb.hrac_group,
                    coverage: `${sc.positiveCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${pct}%)`
                };

                plan.push(yearPlan);
                planSoFar.push(yearPlan);
                usedFamilies.push(best.family);

                saveRotationHistory(selectedWeeds, herb, year);
                allHerbicides = allHerbicides.filter(h => h.herbicide.id !== herb.id);
            }

        } else {
            // ================== ุญุงูุช ุงูุชุฎุงุจ ฺฉ ฺฏุฑูู (ููุท ูพููโุจุฑฺฏ ุง ููุท ูุงุฒฺฉโุจุฑฺฏ) ==================
            // ูุฏู: ุฏุฑ ูุฑ ุณุงู ฺฉ ุนููฺฉุด ุงุฒ ุฎุงููุงุฏู/ฺฏุฑูู ูุชูุงูุช ุจุง ูพูุดุด ุญุฏุงฺฉุซุฑ (ุฏุฑ ุตูุฑุช ุงูฺฉุงู) ุงูุชุฎุงุจ ุดูุฏ.

            let singleCandidates = candidatesThisYear.filter(hd => coversAny(hd, selectedWeeds));
            singleCandidates = pruneLowSpectrumCandidates(singleCandidates, selectedWeeds);
            singleCandidates = singleCandidates.filter(hd => !violatesAvoidSameHRACWithPrevYear(hd, prevHRACParts));

            if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                const nonALS = singleCandidates.filter(hd => hd.family !== "ALS");
                if (nonALS.length) singleCandidates = nonALS;
            }

            singleCandidates.sort((a, b) => {
                const sa = subsetScore(a, selectedWeeds);
                const sb = subsetScore(b, selectedWeeds);
                const ra = (sa.score * 1000) + (sa.positiveCount * 50) + (a.score || 0);
                const rb = (sb.score * 1000) + (sb.positiveCount * 50) + (b.score || 0);
                return rb - ra;
            });

            const pick = singleCandidates.length ? singleCandidates[0] : null;

            if (pick) {
                const herb = pick.herbicide;
                const sc = subsetScore(pick, selectedWeeds);
                const pct = scoreToPercent(sc, selectedWeeds.length);

                yearPlan.herbicides.push({ type: "ฺฉูุชุฑู", data: pick });
                yearPlan.description = `ุณุงู ${year}: ${herb.trade_name}`;
                yearPlan.family = pick.family;

                const groupInfo = COMPLETE_DATASET.hrac_groups[herb.hrac_group] || { name: herb.hrac_group };
                yearPlan.details = {
                    family: pick.family,
                    hracGroup: herb.hrac_group,
                    groupName: groupInfo.name,
                    coverage: `${sc.positiveCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${pct}%)`,
                    riskLevel: herb.resistance_level || "ูุงูุดุฎุต"
                };

                plan.push(yearPlan);
                planSoFar.push(yearPlan);
                usedFamilies.push(pick.family);

                saveRotationHistory(selectedWeeds, herb, year);
                allHerbicides = allHerbicides.filter(h => h.herbicide.id !== herb.id);
            } else {
                // ุฑูฺฉุณโุณุงุฒ ุชุฏุฑุฌ ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุฎุฑูุฌ ุฎุงู
                let relaxed = allHerbicides.filter(hd => coversAny(hd, selectedWeeds));
                relaxed = pruneLowSpectrumCandidates(relaxed, selectedWeeds);

                // ุงุจุชุฏุง ููฺูุงู ุณูู ALS ุฑุนุงุช ุดูุฏ
                if (alsYearsUsedSoFar >= ALS_MAX_YEARS) {
                    const nonALS = relaxed.filter(hd => hd.family !== "ALS");
                    if (nonALS.length) relaxed = nonALS;
                }

                // ุงฺฏุฑ ูฺ ฺฏุฒููโุง ุจุงู ููุงูุฏุ HRAC ูุชูุงู ุฑุง ูุงุฏุฏู ูโฺฏุฑู (ููุท ุจุฑุง ุฌููฺฏุฑ ุงุฒ ุดฺฉุณุช ฺฉุงูู)
                if (!relaxed.length) {
                    relaxed = allHerbicides.slice(0);
                }

                // ูุฑุชุจโุณุงุฒ ููุง
                relaxed.sort((a, b) => {
                    const sa = subsetScore(a, selectedWeeds);
                    const sb = subsetScore(b, selectedWeeds);
                    const ra = (sa.score * 1000) + (sa.positiveCount * 50) + (a.score || 0);
                    const rb = (sb.score * 1000) + (sb.positiveCount * 50) + (b.score || 0);
                    return rb - ra;
                });

                const best = relaxed.length ? relaxed[0] : null;
                if (best) {
                    const herb = best.herbicide;
                    const sc = subsetScore(best, selectedWeeds);
                    const pct = scoreToPercent(sc, selectedWeeds.length);

                    yearPlan.herbicides.push({ type: "ฺฏุฒูู ุฌุงฺฏุฒู", data: best });
                    yearPlan.description = `ุณุงู ${year}: ${herb.trade_name} (ฺฏุฒูู ุฌุงฺฏุฒู)`;
                    yearPlan.family = best.family || "Unknown";

                    yearPlan.details = {
                        family: yearPlan.family,
                        hracGroup: herb.hrac_group,
                        coverage: `${sc.positiveCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${pct}%)`
                    };

                    plan.push(yearPlan);
                    planSoFar.push(yearPlan);
                    usedFamilies.push(best.family || "Unknown");

                    saveRotationHistory(selectedWeeds, herb, year);
                    allHerbicides = allHerbicides.filter(h => h.herbicide.id !== herb.id);
                }
            }
        }
    }

    return {
        plan: plan,
        strategy: strategyText,
        hasBroadleaf: hasBroadleaf,
        hasNarrowleaf: hasNarrowleaf,
        rotationYears: rotationYears,
        strategyType: strategy,
        usedFamilies: usedFamilies
    };
}

// ==================== ุชูุงูุจ ุงุฎุชุตุงุต ุจุฑุง ูุฑ ุนูู ูุฑุฒ ====================
function generateSpecificWeedRotation(weedId, product, rotationYears, strategy) {
    // ูพุฏุง ฺฉุฑุฏู ุนูู ูุฑุฒ
    const weed = COMPLETE_DATASET.weeds.find(w => w.id === weedId);
    if (!weed) {
        return { plan: [], weedName: 'ูุงูุดุฎุต' };
    }
    
    // ุนููฺฉุดโูุง ูุคุซุฑ ุจุฑ ุงู ุนูู ูุฑุฒ
    const effectiveHerbicideIds = weed.effectiveHerbicides || [];
    if (effectiveHerbicideIds.length === 0) {
        return { plan: [], weedName: weed.fullName };
    }
    
    // ุชุจุฏู ุจู ุณุงุฎุชุงุฑ ูุดุงุจู ุขูุงูุฒ
    let allHerbicides = [];
    effectiveHerbicideIds.forEach(id => {
        const herbicide = COMPLETE_DATASET.herbicides.find(h => h.id === id);
        if (herbicide && herbicide.crop_compatibility.includes(product)) {
            // ูุญุงุณุจู ฺฉุงุฑุง ุจุฑุง ุงู ุนูู ูุฑุฒ
            const efficiency = herbicide.efficiency[weed.name] || "?";
            let score = 0;
            switch(efficiency) {
                case "***": score = 10; break;
                case "**": score = 7; break;
                case "*": score = 4; break;
                case "-": score = 0; break;
                case "?": score = 2; break;
            }
            
            // ูุงฺฉุชูุฑ ููุงููุช
            let resistanceFactor = 1;
            switch(herbicide.resistance_level) {
                case "ุฎู ุฒุงุฏ": resistanceFactor = 0.6; break;
                case "ุฒุงุฏ": resistanceFactor = 0.8; break;
                case "ูุชูุณุท": resistanceFactor = 0.9; break;
                case "ฺฉู": resistanceFactor = 1.0; break;
                case "ุจุณุงุฑ ฺฉู": resistanceFactor = 1.2; break;
            }
            
            const finalScore = score * resistanceFactor;
            
            // ุฎุงููุงุฏู ุดูุง
            const family = getChemicalFamily(herbicide.trade_name);
            
            allHerbicides.push({
                herbicide: herbicide,
                score: finalScore,
                family: family,
                efficiency: efficiency,
                controlledCount: efficiency !== "-" && efficiency !== "?" ? 1 : 0,
                excellentControlCount: efficiency === "***" ? 1 : 0
            });
        }
    });
    
    if (allHerbicides.length === 0) {
        return { plan: [], weedName: weed.fullName };
    }
    
    // ุชููุฏ ุชูุงูุจ ุจุง ููุทู ูุดุงุจู
    let usedFamilies = [];
    let planSoFar = [];
    const plan = [];
    const selectedWeeds = [{ id: weedId, name: weed.name }];
    
    for (let year = 1; year <= rotationYears; year++) {
        let yearPlan = {
            year: year,
            herbicides: []
        };
        
        // ุฎุงููุงุฏูโูุง ููุฌูุฏ ุจุฑุง ุงู ุณุงู
        let availableFamilies = getAvailableFamiliesForYear(
            usedFamilies, 
            allHerbicides, 
            rotationYears, 
            year, 
            planSoFar
        );
        
        // ุงูููุชโุจูุฏ ุฎุงููุงุฏูโูุง
        availableFamilies = prioritizeFamiliesByStrategy(availableFamilies, strategy, allHerbicides);
        
        // ุงฺฏุฑ ูฺ ุฎุงููุงุฏูโุง ููุฌูุฏ ูุจุงุดุฏ
        if (availableFamilies.length === 0) {
            const allFamiliesSet = new Set(allHerbicides.map(h => h.family));
            const familiesWithUsage = Array.from(allFamiliesSet).map(family => ({
                family,
                usage: countFamilyUsageInPlan(planSoFar, family),
                maxUsage: getFamilyMaxUsage(family, rotationYears)
            }));
            
            const eligibleFamilies = familiesWithUsage
                .filter(f => f.usage < f.maxUsage)
                .sort((a, b) => a.usage - b.usage)
                .map(f => f.family);
            
            availableFamilies = eligibleFamilies;
        }
        
        const selectedFamily = availableFamilies[0];
        
        if (selectedFamily) {
            // ุงูุชุฎุงุจ ุจูุชุฑู ุนููฺฉุด ุงุฒ ุฎุงููุงุฏู
            const familyHerbicides = allHerbicides.filter(h => h.family === selectedFamily);
            familyHerbicides.sort((a, b) => b.score - a.score);
            const selectedHerbicide = familyHerbicides[0];
            
            if (selectedHerbicide) {
                yearPlan.herbicides.push({
                    data: selectedHerbicide
                });
                yearPlan.description = `ุณุงู ${year}: ${selectedHerbicide.herbicide.trade_name}`;
                yearPlan.details = {
                    family: selectedFamily,
                    efficiency: selectedHerbicide.efficiency,
                    score: selectedHerbicide.score.toFixed(1)
                };
                
                plan.push(yearPlan);
                planSoFar.push(yearPlan);
                usedFamilies.push(selectedFamily);
                
                // ุญุฐู ุงุฒ ูุณุช
                allHerbicides = allHerbicides.filter(h => 
                    h.herbicide.trade_name !== selectedHerbicide.herbicide.trade_name
                );
            }
        }
    }
    
    return {
        plan: plan,
        weedName: weed.fullName,
        weedType: weed.type,
        totalHerbicides: effectiveHerbicideIds.length
    };
}
        
        function saveRotationHistory(selectedWeeds, herbicide, year) {
            try {
                selectedWeeds.forEach(weed => {
                    const historyKey = `rotation_history_${weed.id}`;
                    let history = JSON.parse(localStorage.getItem(historyKey)) || [];
                    
                    // ุงุถุงูู ฺฉุฑุฏู ุฑฺฉูุฑุฏ ุฌุฏุฏ
                    history.push({
                        year: new Date().getFullYear() + " - ุณุงู " + year,
                        herbicide: herbicide.trade_name,
                        hrac_group: herbicide.hrac_group,
                        chemical_family: herbicide.chemical_family || "Unknown"
                    });
                    
                    // ุญูุธ ููุท 5 ุฑฺฉูุฑุฏ ุขุฎุฑ
                    if (history.length > 5) {
                        history = history.slice(-5);
                    }
                    
                    localStorage.setItem(historyKey, JSON.stringify(history));
                });
            } catch (error) {
                console.error('ุฎุทุง ุฏุฑ ุฐุฎุฑู ุชุงุฑุฎฺู ุชูุงูุจ:', error);
            }
        }
        
// ==================== ููุงุด ูุชุงุฌ ====================
function displayResults(analysis, rotationPlan, selectedWeeds, rotationStrategy) {
    try {
        // ูุฎู ฺฉุฑุฏู ููุฏูฺฏ ู ููุงุด ูุชุงุฌ
        document.getElementById('loading').style.display = 'none';
        document.getElementById('result-section').style.display = 'block';
        document.getElementById('default-content').style.display = 'none';
        
        // ==================== ุชูุธู ูุถุนุช ====================
        const statusBadge = document.getElementById('status-badge');
        let statusText = '';
        let statusClass = 'status-recommendation';
        
        if (analysis.recommended.length === 0 && analysis.dualPurpose.length === 0) {
            statusText = 'โ๏ธ ูฺ ุนููฺฉุด ููุงุณุจ ุงูุช ูุดุฏ';
        } else {
            const totalRecommended = analysis.recommended.length + analysis.dualPurpose.length;
            statusText = `โ ${totalRecommended} ุนููฺฉุด ููุงุณุจ ุงูุช ุดุฏ`;
        }
        
        statusBadge.textContent = statusText;
        statusBadge.className = `status-badge ${statusClass}`;
        
        // ==================== ููุงุด ูุดุฏุงุฑูุง ====================
        const warningsElem = document.getElementById('warnings-list');
        const generalWarnings = document.getElementById('general-warnings');
        
        if (analysis.warnings.length > 0) {
            let warningsHtml = '';
            analysis.warnings.forEach(warning => {
                warningsHtml += `<p>${warning}</p>`;
            });
            warningsElem.innerHTML = warningsHtml;
            generalWarnings.style.display = 'block';
        } else {
            generalWarnings.style.display = 'none';
        }
        
        // ==================== ููุงุด ููุน ฺฉูุชุฑู ููุฑุฏ ูุงุฒ ====================
        const controlTypeInfo = document.getElementById('control-type-info');
        const controlTypeText = document.getElementById('control-type-text');
        
        if (analysis.hasBroadleaf && analysis.hasNarrowleaf) {
            controlTypeText.textContent = 'ฺฉูุชุฑู ุชุฑฺฉุจ (ููุฒูุงู ูพููโุจุฑฺฏโูุง ู ูุงุฒฺฉโุจุฑฺฏโูุง) - ุงุณุชูุงุฏู ุงุฒ ุนููฺฉุดโูุง ุฏู ููุธูุฑู ุง ุชุฑฺฉุจ ุนููฺฉุดโูุง ูพููโุจุฑฺฏโฺฉุด ู ูุงุฒฺฉโุจุฑฺฏโฺฉุด';
            controlTypeInfo.style.display = 'block';
        } else if (analysis.hasBroadleaf) {
            controlTypeText.textContent = 'ฺฉูุชุฑู ูพููโุจุฑฺฏโูุง - ุงุณุชูุงุฏู ุงุฒ ุนููฺฉุดโูุง ูพููโุจุฑฺฏโฺฉุด';
            controlTypeInfo.style.display = 'block';
        } else if (analysis.hasNarrowleaf) {
            controlTypeText.textContent = 'ฺฉูุชุฑู ูุงุฒฺฉโุจุฑฺฏโูุง - ุงุณุชูุงุฏู ุงุฒ ุนููฺฉุดโูุง ูุงุฒฺฉโุจุฑฺฏโฺฉุด';
            controlTypeInfo.style.display = 'block';
        } else {
            controlTypeInfo.style.display = 'none';
        }
        
        // ==================== ููุงุด ุจูุชุฑู ุนููฺฉุดโูุง ุชฺฉ ====================
        const recommendedList = document.getElementById('recommended-list');
        const recommendedCount = document.getElementById('recommended-count');
        let recommendedHtml = '';
        // ---- ฺฉูฺฉ ุจุฑุง ููุชุฑ ููุงุด ุนููโูุง ูุฑุฒ (ููุท ุนุงู/ุฎูุจ ู ููุท ุนููโูุง ุงูุชุฎุงุจโุดุฏู) ----
        const _selectedWeedNames = new Set((analysis.selectedWeeds || []).map(w => w && w.name).filter(Boolean));
        const _isOneBroadOneNarrow = (Array.isArray(analysis.selectedWeeds) && analysis.selectedWeeds.length === 2 && analysis.hasBroadleaf && analysis.hasNarrowleaf
            && analysis.selectedWeeds.filter(w => w && w.type === 'broadleaf').length === 1
            && analysis.selectedWeeds.filter(w => w && w.type === 'narrowleaf').length === 1);
        
        if (analysis.recommended.length > 0) {
            analysis.recommended.forEach((herbData, index) => {
                if (!isEffectiveForSelectedWeeds(herbData.herbicide, analysis.selectedWeeds)) return;
                // ุจุฑุฑุณ ุขฺฉุณุงู ูุงู - ุงฺฏุฑ ููุท ุนููโูุง ูุฑุฒ ูุงุฒฺฉโุจุฑฺฏ ุงูุชุฎุงุจ ุดุฏูโุงูุฏ ู ุชุฃุซุฑ ูุฏุงุฑุฏุ ููุงุด ูุฏู
                if (herbData.herbicide.trade_name === "ุขฺฉุณุงู ูุงู") {
                    const onlyNarrowleaf = analysis.selectedWeeds.every(w => w.type === 'narrowleaf');
                    if (onlyNarrowleaf && herbData.controlledCount === 0) {
                        return; // ุงู ุนููฺฉุด ุฑุง ููุงุด ูุฏู
                    }
                }
                
                const resistanceClass = getResistanceClass(herbData.herbicide.resistance_level);
                let controlledWeedsHtml = '';
                
                // ููุงุด ุนููโูุง ูุฑุฒ ฺฉูุชุฑู ุดุฏู (ููุท ุนููโูุง ูุฑุชุจุท)
                if (herbData.controlledWeeds && herbData.controlledWeeds.length > 0) {
                    // ุชุนู ููุน ุนููฺฉุด
                    const isBroadleafHerbicide = herbData.herbicide.control_scope.some(scope => 
                        scope.includes('ูพููโุจุฑฺฏ') && !scope.includes('ุฏู ููุธูุฑู')
                    );
                    const isNarrowleafHerbicide = herbData.herbicide.control_scope.some(scope => 
                        scope.includes('ูุงุฒฺฉโุจุฑฺฏ') && !scope.includes('ุฏู ููุธูุฑู')
                    );
                    const isDualPurpose = herbData.herbicide.control_scope.some(scope => 
                        scope.includes('ุฏู ููุธูุฑู')
                    );
                    
                    // ููุชุฑ ุนููโูุง ูุฑุฒ (ููุท ุนุงู/ุฎูุจุ ููุท ุงูุชุฎุงุจโุดุฏูโูุงุ ู ูุทุงุจู ููุน ุนููฺฉุด)
                    const filteredWeeds = (herbData.controlledWeeds || []).filter(weed => {
                        if (!weed || !_selectedWeedNames.has(weed.name)) return false;
                        if (!(weed.efficiency === '***' || weed.efficiency === '**')) return false;
                        if (isDualPurpose) return true;
                        if (isBroadleafHerbicide) return weed.type === 'broadleaf';
                        if (isNarrowleafHerbicide) return weed.type === 'narrowleaf';
                        return false;
                    });
if (filteredWeeds.length === 0) { return; }
if (filteredWeeds.length > 0) {
                        controlledWeedsHtml += '<div class="efficiency-details">';
                        filteredWeeds.forEach(weed => {
                            const efficiencyClass = getEfficiencyClass(weed.efficiency);
                            const efficiencyText = getEfficiencyText(weed.efficiency);
                            
                            controlledWeedsHtml += `
                                <div class="efficiency-item">
                                    <span>${weed.name}</span>
                                    <span class="efficiency-level ${efficiencyClass}">
                                        ${efficiencyText} (${weed.efficiency})
                                    </span>
                                </div>
                            `;
                        });
                        controlledWeedsHtml += '</div>';
                    }
                }
                
                let warningsHtml = '';
                if (herbData.warnings && herbData.warnings.length > 0) {
                    warningsHtml = `<p style="color: var(--warning-orange); margin-top: 0.5rem;"><i class="fas fa-exclamation-triangle"></i> ${herbData.warnings.join(' ')}</p>`;
                }
                
                recommendedHtml += `
                    <div class="herbicide-item">
                        <div class="herbicide-name">
                            ${herbData.herbicide.trade_name}
                            <span class="resistance-badge ${resistanceClass}" style="margin-right: 0.5rem;">
                                ููุงููุช: ${herbData.herbicide.resistance_level}
                            </span>
                            <span class="priority-badge priority-${herbData.herbicide.max_consecutive_years}">
                                ุญุฏุงฺฉุซุฑ ${herbData.herbicide.max_consecutive_years} ุณุงู ูุชูุงู
                            </span>
                        </div>
                        <div class="herbicide-details">
                            <p><strong>ูุงู ุนููู:</strong> ${herbData.herbicide.common_name}</p>
                            <p><strong>ฺฏุฑูู HRAC:</strong> ${herbData.herbicide.hrac_group}</p>
                            <p><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herbData.herbicide.dosage}</p>
                            <p><strong>ูุญุตูู:</strong> ${herbData.herbicide.crop_compatibility.join('ุ ')}</p>
                            <p><strong>ฺฉูุชุฑู:</strong> ${herbData.herbicide.control_scope.join('ุ ')}</p>
                            <p><strong>ูพูุดุด ฺฉูุชุฑู:</strong> ${herbData.controlledCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ (${Math.round(herbData.coveragePercentage)}%)</p>
                            ${controlledWeedsHtml}
                            ${warningsHtml}
                            ${herbData.herbicide.notes ? `<p><strong>ุชูุถุญุงุช:</strong> ${herbData.herbicide.notes}</p>` : ''}
                        </div>
                    </div>
                `;
            });
        } else {
            recommendedHtml = '<p style="color: #666; text-align: center; padding: 2rem;">ูฺ ุนููฺฉุด ุชฺฉ ููุงุณุจ ุงูุช ูุดุฏ</p>';
        }
        
        recommendedList.innerHTML = recommendedHtml;
        recommendedCount.textContent = analysis.recommended.length;
        
        // ==================== ููุงุด ุนููฺฉุดโูุง ุจุง ูุญุฏูุฏุช ====================
        const limitedList = document.getElementById('limited-list');
        const limitedCount = document.getElementById('limited-count');
        let limitedHtml = '';
        
        if (analysis.limited.length > 0) {
            analysis.limited.forEach(herbData => {
                limitedHtml += `
                    <div class="herbicide-item rejected">
                        <div class="herbicide-name rejected">
                            ${herbData.herbicide.trade_name}
                        </div>
                        <div class="herbicide-details">
                            <p><strong>ุนูุช ูุญุฏูุฏุช:</strong> ${herbData.reason}</p>
                            <p><strong>ฺฏุฑูู HRAC:</strong> ${herbData.herbicide.hrac_group}</p>
                            <p><strong>ูุญุตูู:</strong> ${herbData.herbicide.crop_compatibility.join('ุ ')}</p>
                        </div>
                    </div>
                `;
            });
        } else {
            limitedHtml = '<p style="color: #666; text-align: center; padding: 2rem;">ูฺ ุนููฺฉุด ุจุง ูุญุฏูุฏุช ุงูุช ูุดุฏ</p>';
        }
        
        limitedList.innerHTML = limitedHtml;
        limitedCount.textContent = analysis.limited.length;
        
        // ==================== ููุงุด ุนููฺฉุดโูุง ุฏู ููุธูุฑู ====================
        const dualPurposeList = document.getElementById('dual-purpose-list');
        let dualPurposeHtml = '';
        
        if (analysis.dualPurpose.length > 0) {
            analysis.dualPurpose.forEach((herbData, index) => {
                if (!isEffectiveForSelectedWeeds(herbData.herbicide, analysis.selectedWeeds)) return;
                                // ุญุงูุช ฑ ูพููโุจุฑฺฏ + ฑ ูุงุฒฺฉโุจุฑฺฏ: ุฏู ููุธูุฑู ููุท ุงฺฏุฑ ุฑู ูุฑ ุฏู ุนูู ูุฑุฒ ุงุซุฑ ุนุงู/ุฎูุจ ุฏุงุดุชู ุจุงุดุฏ
                if (_isOneBroadOneNarrow) {
                    const bothStrong = (analysis.selectedWeeds || []).every(w => {
                        const eff = getEfficiencySymbol(herbData.herbicide, w.name);
                        return eff === '***' || eff === '**';
                    });
                    if (!bothStrong) return;
                }
const resistanceClass = getResistanceClass(herbData.herbicide.resistance_level);
                let controlledWeedsHtml = '';
                
                // ููุงุด ุชูุงู ุนููโูุง ูุฑุฒ ฺฉูุชุฑู ุดุฏู ุจุฑุง ุนููฺฉุดโูุง ุฏู ููุธูุฑู
                if (herbData.controlledWeeds && herbData.controlledWeeds.length > 0) {
                    controlledWeedsHtml += '<div class="efficiency-details">';
                    herbData.controlledWeeds.forEach(weed => {
                        const efficiencyClass = getEfficiencyClass(weed.efficiency);
                        const efficiencyText = getEfficiencyText(weed.efficiency);
                        
                        controlledWeedsHtml += `
                            <div class="efficiency-item">
                                <span>${weed.name}</span>
                                <span class="efficiency-level ${efficiencyClass}">
                                    ${efficiencyText} (${weed.efficiency})
                                </span>
                            </div>
                        `;
                    });
                    controlledWeedsHtml += '</div>';
                }
                
                dualPurposeHtml += `
                    <div class="herbicide-item">
                        <div class="herbicide-name">
                            ${herbData.herbicide.trade_name}
                            <span class="resistance-badge ${resistanceClass}" style="margin-right: 0.5rem;">
                                ููุงููุช: ${herbData.herbicide.resistance_level}
                            </span>
                        </div>
                        <div class="herbicide-details">
                            <p><strong>ูุงู ุนููู:</strong> ${herbData.herbicide.common_name}</p>
                            <p><strong>ฺฏุฑูู HRAC:</strong> ${herbData.herbicide.hrac_group}</p>
                            <p><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herbData.herbicide.dosage}</p>
                            <p><strong>ฺฉูุชุฑู:</strong> ${herbData.herbicide.control_scope.join('ุ ')}</p>
                            <p><strong>ูพูุดุด ฺฉูุชุฑู:</strong> ${herbData.controlledCount} ุงุฒ ${selectedWeeds.length} ุนูู ูุฑุฒ</p>
                            ${controlledWeedsHtml}
                            ${herbData.herbicide.notes ? `<p><strong>ุชูุถุญุงุช:</strong> ${herbData.herbicide.notes}</p>` : ''}
                        </div>
                    </div>
                `;
            });
        } else {
            dualPurposeHtml = '<p style="color: #666; text-align: center; padding: 2rem;">ูฺ ุนููฺฉุด ุฏู ููุธูุฑูโุง ุงูุช ูุดุฏ</p>';
        }
        
        dualPurposeList.innerHTML = dualPurposeHtml;
        
        // ==================== ููุงุด ุฎูุงุตู ุชูุงูุจ ====================
        const rotationSummary = document.getElementById('rotation-summary');
        const rotationSummaryContent = document.getElementById('rotation-summary-content');
        
        if (rotationPlan.plan.length > 0) {
            let summaryHtml = `
                <p><strong>ุงุณุชุฑุงุชฺ:</strong> ${rotationPlan.strategy}</p>
                <p><strong>ูุฏุช ุจุฑูุงูู:</strong> ${rotationPlan.rotationYears} ุณุงู</p>
                <p><strong>ุชุนุฏุงุฏ ุนููโูุง ูุฑุฒ:</strong> ${selectedWeeds.length} ููุฑุฏ</p>
                <div style="margin-top: 1rem;">
                    <strong>ุจุฑูุงูู ุณุงูุงูู:</strong>
                    <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
            `;
            
            rotationPlan.plan.forEach(yearPlan => {
                if (yearPlan.herbicides.length > 0) {
                    const herb = yearPlan.herbicides[0].data.herbicide;
                    summaryHtml += `<li><strong>ุณุงู ${yearPlan.year}:</strong> ${herb.trade_name} (${herb.hrac_group})</li>`;
                } else {
                    summaryHtml += `<li><strong>ุณุงู ${yearPlan.year}:</strong> ุจุฏูู ุนููฺฉุด ููุงุณุจ</li>`;
                }
            });
            
            summaryHtml += `
                    </ul>
                </div>
            `;
            
            rotationSummaryContent.innerHTML = summaryHtml;
            rotationSummary.style.display = 'block';
        } else {
            rotationSummary.style.display = 'none';
        }
        
        // ==================== ููุงุด ุจุฑูุงูู ุชูุงูุจ ฺฉุงูู ====================
        displayRotationPlan(rotationPlan);
        
        // ==================== ููุงุด ุฌุฒุฆุงุช ฺฉุงุฑุง ====================
        displayEfficiencyDetails(analysis.recommended.concat(analysis.dualPurpose), selectedWeeds);
        
        // ==================== ููุงุด ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท ====================
        if (typeof displayMixtures === 'function') { displayMixtures(); }
// ==================== ูุนุงู ฺฉุฑุฏู ุชุจ ุงูู ====================
        document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
        document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
        
        document.querySelector('.tab[data-tab="recommendations"]').classList.add('active');
        document.getElementById('recommendations-tab').classList.add('active');
        
    } catch (error) {
        console.error('ุฎุทุง ุฏุฑ ููุงุด ูุชุงุฌ:', error);
        showError('ุฎุทุง ุฏุฑ ููุงุด ูุชุงุฌ', error.message);
    }
}

// ==================== ุชุงุจุน ฺฉูฺฉ ููุงุด ุจุฑูุงูู ุชูุงูุจ ====================
function displayRotationPlan(rotationPlan) {
    try {
        const container = document.getElementById('rotation-plan-container');
        const strategyDisplay = document.getElementById('rotation-strategy-display');
        
        if (!container || !strategyDisplay) return;
        
        // ููุงุด ุงุณุชุฑุงุชฺ
        strategyDisplay.innerHTML = `<p>${rotationPlan.strategy}</p>`;
        
        let rotationPlanHtml = '';
        
        if (rotationPlan.plan.length > 0) {
            rotationPlan.plan.forEach(yearPlan => {
                rotationPlanHtml += `
                    <div class="rotation-year" style="margin-bottom: 1.5rem;">
                        <div class="rotation-year-header">
                            ุณุงู ${yearPlan.year} - ${yearPlan.description || 'ุจุฏูู ุชูุตู'}
                        </div>
                        <div class="rotation-year-content">
                `;
                
                if (yearPlan.herbicides.length > 0) {
                    yearPlan.herbicides.forEach(herbItem => {
                        const herb = herbItem.data.herbicide;
                        const family = herbItem.data.family;
                        const groupInfo = COMPLETE_DATASET.hrac_groups[herb.hrac_group] || { name: herb.hrac_group };
                        
                        rotationPlanHtml += `
                            <div class="rotation-herbicide">
                                <strong>${herb.trade_name}</strong>
                                <div style="font-size: 0.9rem; margin-top: 0.3rem;">
                                    <span class="resistance-badge ${getResistanceClass(herb.resistance_level)}">
                                        ${herb.resistance_level}
                                    </span>
                                    <span style="margin-right: 0.5rem;">ฺฏุฑูู: ${herb.hrac_group} (${groupInfo.name})</span>
                                    <span>ุฎุงููุงุฏู: ${herb.chemical_family || family || 'ูุงูุดุฎุต'}</span>
                                </div>
                                <div style="font-size: 0.85rem; margin-top: 0.5rem;">
                                    <p><strong>ูุงู ุนููู:</strong> ${herb.common_name}</p>
                                    <p><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herb.dosage}</p>
                                    <p><strong>ุฒูุงู ูุตุฑู:</strong> ${herb.application_time}</p>
                                    <p><strong>ฺฉูุชุฑู:</strong> ${herb.control_scope.join('ุ ')}</p>
                                    <p><strong>ูพูุดุด:</strong> ${herbItem.data.controlledCount} ุนูู ูุฑุฒ</p>
                                </div>
                            </div>
                        `;
                    });
                } else {
                    rotationPlanHtml += `
                        <div style="padding: 2rem; text-align: center; color: #666;">
                            <i class="fas fa-exclamation-circle" style="font-size: 2rem; margin-bottom: 1rem;"></i>
                            <p>ูฺ ุนููฺฉุด ููุงุณุจ ุจุฑุง ุงู ุณุงู ุงูุช ูุดุฏ</p>
                        </div>
                    `;
                }
                
                rotationPlanHtml += `
                        </div>
                    </div>
                `;
            });
            
            // ุงุถุงูู ฺฉุฑุฏู ุขูุงุฑ ุฎุงููุงุฏูโูุง ุดูุง
            rotationPlanHtml += generateFamilyStatsHtml(rotationPlan);
            
        } else {
            rotationPlanHtml = `
                <div style="padding: 3rem; text-align: center; color: #666;">
                    <i class="fas fa-times-circle" style="font-size: 3rem; margin-bottom: 1rem;"></i>
                    <p>ูฺ ุจุฑูุงูู ุชูุงูุจ ุชููุฏ ูุดุฏ</p>
                </div>
            `;
        }
        
        container.innerHTML = rotationPlanHtml;
        
    } catch (error) {
        console.error('ุฎุทุง ุฏุฑ ููุงุด ุจุฑูุงูู ุชูุงูุจ:', error);
    }
}

// ==================== ุชููุฏ HTML ุขูุงุฑ ุฎุงููุงุฏูโูุง ====================
function generateFamilyStatsHtml(rotationPlan) {
    try {
        const familyStats = {};
        
        // ูุญุงุณุจู ุขูุงุฑ ุงุณุชูุงุฏู
        rotationPlan.plan.forEach(yearPlan => {
            if (yearPlan.details && yearPlan.details.family) {
                const family = yearPlan.details.family;
                familyStats[family] = (familyStats[family] || 0) + 1;
            }
        });
        
        if (Object.keys(familyStats).length === 0) return '';
        
        let html = `
            <div class="alert alert-info" style="margin-top: 2rem;">
                <h4><i class="fas fa-chart-pie"></i> ุขูุงุฑ ุงุณุชูุงุฏู ุงุฒ ุฎุงููุงุฏูโูุง ุดูุง ุฏุฑ ุจุฑูุงูู ${rotationPlan.rotationYears} ุณุงูู</h4>
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-top: 1rem;">
        `;
        
        Object.entries(familyStats).forEach(([family, count]) => {
            const limit = FAMILY_LIMITS[family];
            const percent = Math.round((count / rotationPlan.rotationYears) * 100);
            
            html += `
                <div style="text-align: center; padding: 1rem; background: white; border-radius: var(--radius-md); border: 2px solid var(--primary-green);">
                    <div style="font-size: 1.5rem; font-weight: bold; color: var(--primary-green);">${count}</div>
                    <div style="font-weight: bold; margin: 0.5rem 0;">${family}</div>
                    <div style="font-size: 0.85rem; color: #666;">${limit?.description || 'ุจุฏูู ุชูุถุญ'}</div>
                    <div style="font-size: 0.8rem; color: #888; margin-top: 0.5rem;">${percent}% ุงุฒ ุจุฑูุงูู</div>
                </div>
            `;
        });
        
        html += `
                </div>
                <p style="margin-top: 1rem; font-size: 0.9rem;">
                    <i class="fas fa-info-circle"></i> ูุฏู: ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ฺฉ ุฎุงููุงุฏู ู ฺฉุงูุด ุฎุทุฑ ููุงููุช.
                </p>
            </div>
        `;
        
        return html;
        
    } catch (error) {
        console.error('ุฎุทุง ุฏุฑ ุชููุฏ ุขูุงุฑ ุฎุงููุงุฏูโูุง:', error);
        return '';
    }
}

// ==================== ุชุงุจุน ฺฉูฺฉ ูุชู ฺฉุงุฑุง ====================
function getEfficiencyText(efficiency) {
    switch(efficiency) {
        case "***": return "ฺฉูุชุฑู ุนุงู";
        case "**": return "ฺฉูุชุฑู ุฎูุจ";
        case "*": return "ฺฉูุชุฑู ุถุนู";
        case "-": return "ุจุฏูู ุชุฃุซุฑ";
        case "?": return "ูุงูุดุฎุต";
        default: return "ูุงูุดุฎุต";
    }
}
        
        function displayWarnings(warnings) {
            const warningsDiv = document.getElementById('warnings-list');
            const warningsContainer = document.getElementById('general-warnings');
            
            if (warnings.length > 0) {
                warningsDiv.innerHTML = '';
                warnings.forEach(warning => {
                    const p = document.createElement('p');
                    p.innerHTML = `<i class="fas fa-exclamation-circle"></i> ${warning}`;
                    warningsDiv.appendChild(p);
                });
                warningsContainer.style.display = 'block';
            } else {
                warningsContainer.style.display = 'none';
            }
        }
        
        function displayRecommendedHerbicides(recommended, selectedWeeds) {
            const recommendedList = document.getElementById('recommended-list');
            const recommendedCount = document.getElementById('recommended-count');
            
            recommendedList.innerHTML = '';
            recommendedCount.textContent = recommended.length;
            
            if (recommended.length === 0) {
                recommendedList.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">ูฺ ุนููฺฉุด ุชฺฉ ููุธูุฑู ููุงุณุจ ุงูุช ูุดุฏ.</p>';
                return;
            }
            
            recommended.slice(0, 8).forEach((item, index) => {
                const herbicide = item.herbicide;
                const controlPercentage = item.coveragePercentage.toFixed(1);
                
                let efficiencyDetailsHtml = '<div class="efficiency-details" style="max-height: 300px; overflow-y: auto;">';
                
                efficiencyDetailsHtml += '<div style="font-weight: bold; color: var(--primary-green); margin-bottom: 0.5rem;">ุชุฃุซุฑ ุจุฑ ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ:</div>';
                
                selectedWeeds.forEach(weed => {
                    const efficiency = item.efficiencyDetails[weed.name]?.efficiency || "-";
                    const controlLevel = item.efficiencyDetails[weed.name]?.controlLevel || "ุจุฏูู ุชุฃุซุฑ";
                    const efficiencyClass = getEfficiencyClass(efficiency);
                    
                    efficiencyDetailsHtml += `
                        <div class="efficiency-item">
                            <span>${weed.name}</span>
                            <span class="efficiency-level ${efficiencyClass}">${controlLevel} (${efficiency})</span>
                        </div>
                    `;
                });
                
                efficiencyDetailsHtml += '</div>';
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'herbicide-item';
                itemDiv.innerHTML = `
                    <div class="herbicide-name">
                        <span class="weed-count">${index + 1}</span>
                        ${herbicide.trade_name}
                        <span class="resistance-badge ${getResistanceClass(herbicide.resistance_level)}">
                            ${herbicide.resistance_level}
                        </span>
                    </div>
                    <div class="herbicide-details">
                        <p><strong>ูุงู ุนููู:</strong> ${herbicide.common_name}</p>
                        <p><strong>ฺฏุฑูู HRAC:</strong> ${herbicide.hrac_group} (${COMPLETE_DATASET.hrac_groups[herbicide.hrac_group]?.name || 'ุชุฑฺฉุจ'})</p>
                        <p><strong>ุฎุงููุงุฏู ุดูุง:</strong> ${herbicide.chemical_family || 'ูุงูุดุฎุต'}</p>
                        <p><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herbicide.dosage}</p>
                        <p><strong>ุฒูุงู ูุตุฑู:</strong> ${herbicide.application_time}</p>
                        <p><strong>ฺฉูุชุฑู ุนููโูุง ูุฑุฒ:</strong> ${item.controlledCount} ุงุฒ ${selectedWeeds.length} ููุฑุฏ (${controlPercentage}%)</p>
                        <p><strong>ฺฉูุชุฑู ุนุงู:</strong> ${item.excellentControlCount} ููุฑุฏ | <strong>ฺฉูุชุฑู ุฎูุจ:</strong> ${item.goodControlCount} ููุฑุฏ</p>
                        <p><strong>ุงูุชุงุฒ ุณุณุชู:</strong> ${item.score.toFixed(1)}</p>
                        
                        <div style="margin-top: 0.5rem;">
                            <strong>ุฌุฒุฆุงุช ฺฉุงุฑุง:</strong>
                            ${efficiencyDetailsHtml}
                        </div>
                        
                        ${item.warnings.length > 0 ? 
                            `<p style="color: var(--warning-orange); margin-top: 0.5rem;"><i class="fas fa-exclamation-triangle"></i> ${item.warnings[0]}</p>` : ''}
                        
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">${herbicide.notes}</p>
                    </div>
                `;
                recommendedList.appendChild(itemDiv);
            });
        }
        
        function displayDualPurposeHerbicides(dualPurpose, selectedWeeds) {
            const dualPurposeList = document.getElementById('dual-purpose-list');
            
            dualPurposeList.innerHTML = '';
            
            if (dualPurpose.length === 0) {
                dualPurposeList.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">ูฺ ุนููฺฉุด ุฏู ููุธูุฑู ููุงุณุจ ุงูุช ูุดุฏ.</p>';
                return;
            }
            
            dualPurpose.forEach((item, index) => {
                const herbicide = item.herbicide;
                const controlPercentage = item.coveragePercentage.toFixed(1);
                
                let efficiencyDetailsHtml = '<div class="efficiency-details" style="max-height: 300px; overflow-y: auto;">';
                
                efficiencyDetailsHtml += '<div style="font-weight: bold; color: var(--purple); margin-bottom: 0.5rem;">ุชุฃุซุฑ ุจุฑ ุชูุงู ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ:</div>';
                
                selectedWeeds.forEach(weed => {
                    const efficiency = item.efficiencyDetails[weed.name]?.efficiency || "-";
                    const controlLevel = item.efficiencyDetails[weed.name]?.controlLevel || "ุจุฏูู ุชุฃุซุฑ";
                    const efficiencyClass = getEfficiencyClass(efficiency);
                    
                    efficiencyDetailsHtml += `
                        <div class="efficiency-item">
                            <span>${weed.name}</span>
                            <span class="efficiency-level ${efficiencyClass}">${controlLevel} (${efficiency})</span>
                        </div>
                    `;
                });
                
                efficiencyDetailsHtml += '</div>';
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'herbicide-item';
                itemDiv.innerHTML = `
                    <div class="herbicide-name">
                        <span class="weed-count">${index + 1}</span>
                        ${herbicide.trade_name}
                        <span class="resistance-badge ${getResistanceClass(herbicide.resistance_level)}" style="background: #9C27B0; color: white;">
                            ุฏู ููุธูุฑู
                        </span>
                    </div>
                    <div class="herbicide-details">
                        <p><strong>ูุงู ุนููู:</strong> ${herbicide.common_name}</p>
                        <p><strong>ฺฏุฑูู HRAC:</strong> ${herbicide.hrac_group} (${COMPLETE_DATASET.hrac_groups[herbicide.hrac_group]?.name || 'ุชุฑฺฉุจ'})</p>
                        <p><strong>ุฎุงููุงุฏู ุดูุง:</strong> ${herbicide.chemical_family || 'ูุงูุดุฎุต'}</p>
                        <p><strong>ูุฑูููุงุณูู:</strong> ${herbicide.formulation}</p>
                        <p><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herbicide.dosage}</p>
                        <p><strong>ฺฉูุชุฑู ุนููโูุง ูุฑุฒ:</strong> ${item.controlledCount} ุงุฒ ${selectedWeeds.length} ููุฑุฏ (${controlPercentage}%)</p>
                        <p><strong>ฺฉูุชุฑู ุนุงู:</strong> ${item.excellentControlCount} ููุฑุฏ | <strong>ฺฉูุชุฑู ุฎูุจ:</strong> ${item.goodControlCount} ููุฑุฏ</p>
                        <p><strong>ุงูุชุงุฒ ุณุณุชู:</strong> ${item.score.toFixed(1)}</p>
                        
                        <div style="margin-top: 0.5rem;">
                            <strong>ุฌุฒุฆุงุช ฺฉุงุฑุง ุจุฑ ุชูุงู ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ:</strong>
                            ${efficiencyDetailsHtml}
                        </div>
                        
                        <p style="margin-top: 0.5rem; font-size: 0.9rem; color: #666;">${herbicide.notes}</p>
                    </div>
                `;
                dualPurposeList.appendChild(itemDiv);
            });
        }
        
        function displayLimitedHerbicides(limited) {
            const limitedList = document.getElementById('limited-list');
            const limitedCount = document.getElementById('limited-count');
            
            limitedList.innerHTML = '';
            limitedCount.textContent = limited.length;
            
            if (limited.length === 0) {
                limitedList.innerHTML = '<p style="text-align: center; color: #666; padding: 2rem;">ูฺ ุนููฺฉุด ุจุง ูุญุฏูุฏุช ุฎุงุต ุดูุงุณุง ูุดุฏ.</p>';
                return;
            }
            
            limited.slice(0, 5).forEach((item, index) => {
                const herbicide = item.herbicide;
                
                const itemDiv = document.createElement('div');
                itemDiv.className = 'herbicide-item rejected';
                itemDiv.innerHTML = `
                    <div class="herbicide-name rejected">
                        <span class="weed-count">${index + 1}</span>
                        ${herbicide.trade_name}
                    </div>
                    <div class="herbicide-details">
                        <p><strong>ูุงู ุนููู:</strong> ${herbicide.common_name}</p>
                        <p><strong>ุฏูู ูุญุฏูุฏุช:</strong> ${item.reason}</p>
                        <p><strong>ฺฏุฑูู HRAC:</strong> ${herbicide.hrac_group}</p>
                        <p><strong>ููุน:</strong> ${herbicide.control_scope.join(', ')}</p>
                        <p><strong>ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู:</strong> ${herbicide.crop_compatibility.join('ุ ')}</p>
                    </div>
                `;
                limitedList.appendChild(itemDiv);
            });
        }
        
// ==================== ุงุตูุงุญ ุชุงุจุน ููุงุด ุจุฑูุงูู ุชูุงูุจ ====================
function displayRotationPlan(rotationPlan) {
    const container = document.getElementById('rotation-plan-container');
    
    if (!container) return;
    
    container.innerHTML = '';
    
    if (!rotationPlan.plan || rotationPlan.plan.length === 0) {
        container.innerHTML = `
            <div class="alert alert-warning">
                <h4><i class="fas fa-exclamation-triangle"></i> ุจุฑูุงูู ุชูุงูุจ ุชููุฏ ูุดุฏ</h4>
                <p>ูุทูุงู ุนููโูุง ูุฑุฒ ุจุดุชุฑ ุงูุชุฎุงุจ ฺฉูุฏ ุง ุชูุธูุงุช ุชูุงูุจ ุฑุง ุชุบุฑ ุฏูุฏ.</p>
                <p>ููฺฉู ุงุณุช ุจุฑุง ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจุ ุนููฺฉุด ูุคุซุฑ ููุฌูุฏ ูุจุงุดุฏ.</p>
            </div>
        `;
        return;
    }
    
    let planHtml = `
        <div class="rotation-plan">
            <div class="alert alert-success">
                <h4><i class="fas fa-calendar-alt"></i> ุจุฑูุงูู ุชูุงูุจ ${rotationPlan.rotationYears} ุณุงูู</h4>
                <p>ุงู ุจุฑูุงูู ุจุฑ ุงุณุงุณ ุงุณุชุฑุงุชฺ <strong>${rotationPlan.strategyType}</strong> ุทุฑุงุญ ุดุฏู ุงุณุช.</p>
                <p>ุฎุงููุงุฏูโูุง ุดูุง ุงุณุชูุงุฏู ุดุฏู: ${[...new Set(rotationPlan.usedFamilies)].join('ุ ')}</p>
            </div>
    `;
    
    rotationPlan.plan.forEach(yearPlan => {
        if (yearPlan.herbicides.length === 0) {
            planHtml += `
                <div class="rotation-year">
                    <div class="rotation-year-header">ุณุงู ${yearPlan.year}</div>
                    <div class="rotation-year-content">
                        <p style="text-align: center; color: #666; padding: 2rem;">
                            <i class="fas fa-exclamation-circle"></i> ูฺ ุนููฺฉุด ููุงุณุจ ุจุฑุง ุงู ุณุงู ุงูุช ูุดุฏ
                        </p>
                    </div>
                </div>
            `;
        } else {
            yearPlan.herbicides.forEach(herbItem => {
                const herb = herbItem.data;
                planHtml += `
                    <div class="rotation-year">
                        <div class="rotation-year-header">ุณุงู ${yearPlan.year}</div>
                        <div class="rotation-year-content">
                            <div class="rotation-herbicide">
                                <div style="display: flex; justify-content: space-between; align-items: center;">
                                    <strong>${herb.herbicide.trade_name}</strong>
                                    <span class="priority-badge priority-${herb.excellentControlCount > 0 ? '1' : '2'}">
                                        ุฎุงููุงุฏู: ${yearPlan.family}
                                    </span>
                                </div>
                                <p style="margin: 0.5rem 0 0.3rem 0;"><strong>ูุงู ุนููู:</strong> ${herb.herbicide.common_name}</p>
                                <p style="margin: 0.3rem 0;"><strong>ฺฏุฑูู HRAC:</strong> ${herb.herbicide.hrac_group}</p>
                                <p style="margin: 0.3rem 0;"><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herb.herbicide.dosage}</p>
                                <p style="margin: 0.3rem 0;"><strong>ูพูุดุด ฺฉูุชุฑู:</strong> ${herb.controlledCount} ุงุฒ ${herb.selectedWeedsCount} ุนูู ูุฑุฒ</p>
                                <div style="margin-top: 0.5rem;">
                                    <span class="resistance-badge ${getResistanceClass(herb.herbicide.resistance_level)}">
                                        ุณุทุญ ููุงููุช: ${herb.herbicide.resistance_level}
                                    </span>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });
        }
    });
    
    planHtml += `
        <div class="rotation-note" style="margin-top: 2rem;">
            <h5><i class="fas fa-clipboard-list"></i> ููุงูู ุงุนูุงู ุดุฏู ุฏุฑ ุงู ุชูุงูุจ:</h5>
            <ul style="margin-top: 0.5rem; padding-right: 1.5rem;">
                <li>โข ุงุณุชูุงุฏู ุงุฒ ุญุฏุงฺฉุซุฑ ${FAMILY_LIMITS.ALS.maxUsage} ุจุงุฑ ุงุฒ ุฎุงููุงุฏู ALS ุฏุฑ ${FAMILY_LIMITS.ALS.period} ุณุงู</li>
                <li>โข ุงุณุชูุงุฏู ุงุฒ ุญุฏุงฺฉุซุฑ ${FAMILY_LIMITS.ACCase.maxUsage} ุจุงุฑ ุงุฒ ุฎุงููุงุฏู ACCase ุฏุฑ ${FAMILY_LIMITS.ACCase.period} ุณุงู</li>
                <li>โข ุงุณุชูุงุฏู ุงุฒ ุญุฏุงฺฉุซุฑ ${FAMILY_LIMITS.O.maxUsage} ุจุงุฑ ุงุฒ ุฎุงููุงุฏู O ุฏุฑ ${FAMILY_LIMITS.O.period} ุณุงู</li>
                <li>โข ุฌููฺฏุฑ ุงุฒ ุชฺฉุฑุงุฑ ุฎุงููุงุฏูโูุง ุฏุฑ ุณุงูโูุง ูุชูุงู</li>
                <li>โข ุงูููุช ุจุง ุฎุงููุงุฏูโูุง ุจุง ุฎุทุฑ ููุงููุช ฺฉูุชุฑ</li>
                <li>โข ุงูุชุฎุงุจ ุนููฺฉุดโูุง ุจุง ุจุงูุงุชุฑู ฺฉุงุฑุง ุฏุฑ ูุฑ ุฎุงููุงุฏู</li>
            </ul>
        </div>
    `;
    
    planHtml += '</div>';
    container.innerHTML = planHtml;
}
// ุชุงุจุน ุฌุฏุฏ ุจุฑุง ููุงุด ุงุทูุงุนุงุช ุงุณุชูุงุฏู ุงุฒ ุฎุงููุงุฏูโูุง
function displayFamilyUsageInfo(rotationPlan) {
    try {
        const rotationTab = document.getElementById('rotation-tab');
        if (!rotationTab) return;

        const rotationContent = rotationTab.querySelector('.result-content');
        if (!rotationContent) return;

        // ุญุฐู ููููู ูุจู (ุฏุฑ ุตูุฑุช ูุญุงุณุจู ูุฌุฏุฏ)
        const old = rotationContent.querySelector('#family-usage-section');
        if (old) old.remove();

        const rotationYears = rotationPlan && rotationPlan.rotationYears ? rotationPlan.rotationYears : 4;

        const familyUsageContainer = document.createElement('div');
        familyUsageContainer.id = 'family-usage-section';
        familyUsageContainer.className = 'optimization-metrics';
        familyUsageContainer.style.marginTop = '1.5rem';

        familyUsageContainer.innerHTML = `
            <h4 style="color: var(--primary-green); margin-bottom: 1rem;">
                <i class="fas fa-chart-pie"></i> ุขูุงุฑ ุงุณุชูุงุฏู ุงุฒ ุฎุงููุงุฏูโูุง ุดูุง
            </h4>
            <div class="optimization-metrics" id="family-usage-metrics">
                ${Object.keys(FAMILY_LIMITS).map(family => {
                    const usage = countFamilyUsageInPlan(rotationPlan.plan, family);
                    const maxUsage = getFamilyMaxUsage(family, rotationYears);

                    // ุฏุฑุตุฏ ูุณุจุช ุจู ฺฉู ุฏูุฑู (ด ุณุงูู ุง ุนุฏุฏ ุงูุชุฎุงุจ)
                    const percentOfPeriod = rotationYears > 0 ? Math.round((usage / rotationYears) * 100) : 0;

                    // ุฏุฑุตุฏ ูุณุจุช ุจู ุณูู ูุฌุงุฒ (ุจุฑุง Progress Bar)
                    const percentOfLimit = maxUsage > 0 ? Math.round((usage / maxUsage) * 100) : 0;

                    return `
                        <div class="metric-item">
                            <div style="display: flex; justify-content: space-between; align-items: center;">
                                <strong>${family}</strong>
                                <span style="font-size: 0.9rem; color: #666;">
                                    ${usage} ุจุงุฑ ( ${percentOfPeriod}% ุงุฒ ฺฉู ุฏูุฑู )
                                </span>
                            </div>

                            <div style="display: flex; justify-content: space-between; align-items: center; margin-top: 0.3rem;">
                                <span style="font-size: 0.85rem; color: #666;">ุญุฏุงฺฉุซุฑ ูุฌุงุฒ:</span>
                                <span style="font-size: 0.85rem; color: #666;">
                                    ${maxUsage} ุจุงุฑ
                                </span>
                            </div>

                            <div style="margin-top: 0.5rem; height: 8px; background: #e0e0e0; border-radius: 4px; overflow: hidden;">
                                <div style="
                                    width: ${Math.min(100, percentOfLimit)}%;
                                    height: 100%;
                                    background: ${percentOfLimit > 80 ? '#d32f2f' : percentOfLimit > 60 ? '#f57c00' : '#4CAF50'};
                                "></div>
                            </div>

                            <div style="font-size: 0.8rem; color: #666; margin-top: 0.35rem;">
                                ${FAMILY_LIMITS[family].description}
                            </div>
                        </div>
                    `;
                }).join('')}
            </div>
        `;

        // ููุงุด ุจูุงูุงุตูู ูพุณ ุงุฒ ุจุฑูุงูู ุชูุงูุจ
        const planContainer = rotationContent.querySelector('#rotation-plan-container');
        if (planContainer) {
            if (planContainer.nextSibling) {
                rotationContent.insertBefore(familyUsageContainer, planContainer.nextSibling);
            } else {
                rotationContent.appendChild(familyUsageContainer);
            }
        } else {
            rotationContent.appendChild(familyUsageContainer);
        }

    } catch (e) {
        console.error('ุฎุทุง ุฏุฑ ููุงุด ุขูุงุฑ ุฎุงููุงุฏูโูุง ุดูุง:', e);
    }
}
// ==================== ุจูููโุณุงุฒ ูพุดุฑูุชู ุชูุงูุจ ====================
function optimizeRotation() {
    try {
        const product = document.getElementById('product').value;
        const selectedWeeds = getSelectedWeeds();
        
        if (selectedWeeds.length === 0) {
            showError('ูุทูุงู ุญุฏุงูู ฺฉ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ฺฉูุฏ');
            return;
        }
        
        document.getElementById('loading').style.display = 'block';
        document.getElementById('result-section').style.display = 'none';
        
        setTimeout(() => {
            try {
                // ูุญุงุณุจู ุชูุงูุจ ุจุง ุงุณุชุฑุงุชฺโูุง ูุฎุชูู
                const strategies = ['efficiency-first', 'resistance-management', 'balanced', 'cost-effective'];
                const optimizationResults = [];
                
                strategies.forEach(strategy => {
                    const analysis = analyzeHerbicidesForSelectedWeeds(
                        selectedWeeds, 
                        product, 
                        document.getElementById('resistance_report').value,
                        document.getElementById('herbicide_history').value
                    );
                    
                    const rotationPlan = generateRotationPlanForSelectedWeeds(
                        analysis, 
                        selectedWeeds, 
                        parseInt(document.getElementById('rotation_years').value),
                        strategy
                    );
                    
                    // ูุญุงุณุจู ูุนุงุฑูุง ุจูููโุณุงุฒ
                    const metrics = calculateOptimizationMetrics(rotationPlan, analysis);
                    optimizationResults.push({
                        strategy,
                        plan: rotationPlan,
                        metrics,
                        analysis
                    });
                });
                
                // ุงูุชุฎุงุจ ุจูุชุฑู ุงุณุชุฑุงุชฺ
                const bestResult = selectBestOptimizationResult(optimizationResults);
                
                // ููุงุด ูุชุงุฌ
                displayOptimizationResults(bestResult, optimizationResults);
                
            } catch (error) {
                showError('ุฎุทุง ุฏุฑ ุจูููโุณุงุฒ', error.message);
                console.error(error);
            }
        }, 1000);
        
    } catch (error) {
        showError('ุฎุทุง ุฏุฑ ุจูููโุณุงุฒ', error.message);
        console.error(error);
    }
}

function calculateOptimizationMetrics(rotationPlan, analysis) {
    const plan = rotationPlan.plan;
    
    // 1. ูพูุดุด ุนููโูุง ูุฑุฒ
    let totalCoverage = 0;
    let maxCoverage = 0;
    
    plan.forEach(yearPlan => {
        yearPlan.herbicides.forEach(herbItem => {
            if (herbItem.data) {
                totalCoverage += herbItem.data.coveragePercentage;
                maxCoverage = Math.max(maxCoverage, herbItem.data.coveragePercentage);
            }
        });
    });
    
    const avgCoverage = plan.length > 0 ? totalCoverage / plan.length : 0;
    
    // 2. ุชููุน ุฎุงููุงุฏูโูุง
    const uniqueFamilies = [...new Set(rotationPlan.usedFamilies.filter(f => f !== "Unknown"))];
    const familyDiversity = (uniqueFamilies.length / Object.keys(FAMILY_LIMITS).length) * 100;
    
    // 3. ุฎุทุฑ ููุงููุช
    let totalRisk = 0;
    let count = 0;
    
    plan.forEach(yearPlan => {
        yearPlan.herbicides.forEach(herbItem => {
            if (herbItem.data) {
                const family = herbItem.data.family;
                const risk = getFamilyRiskLevel(family);
                totalRisk += risk;
                count++;
            }
        });
    });
    
    const avgRisk = count > 0 ? totalRisk / count : 0;
    
    // 4. ฺฉุงุฑุง
    let totalEfficiency = 0;
    let excellentCount = 0;
    
    plan.forEach(yearPlan => {
        yearPlan.herbicides.forEach(herbItem => {
            if (herbItem.data) {
                totalEfficiency += herbItem.data.score;
                excellentCount += herbItem.data.excellentControlCount;
            }
        });
    });
    
    const avgEfficiency = count > 0 ? totalEfficiency / count : 0;
    
    return {
        avgCoverage: Math.round(avgCoverage),
        maxCoverage: Math.round(maxCoverage),
        familyDiversity: Math.round(familyDiversity),
        avgRisk: Math.round(avgRisk * 10) / 10,
        avgEfficiency: Math.round(avgEfficiency * 10) / 10,
        excellentCount: excellentCount,
        totalHerbicides: analysis.recommended.length + analysis.dualPurpose.length
    };
}

function selectBestOptimizationResult(results) {
    // ุงูุชุงุฒุฏู ุจู ูุฑ ูุชุฌู
    const scoredResults = results.map(result => {
        const m = result.metrics;
        let score = 0;
        
        // ูพูุดุด: 30%
        score += (m.avgCoverage / 100) * 30;
        
        // ุชููุน ุฎุงููุงุฏูโูุง: 25%
        score += (m.familyDiversity / 100) * 25;
        
        // ฺฉุงุฑุง: 25%
        score += (m.avgEfficiency / 10) * 25;
        
        // ุฎุทุฑ ููุงููุช: 20% (ูุนฺฉูุณ)
        score += ((5 - m.avgRisk) / 5) * 20;
        
        return { ...result, score: Math.round(score * 10) / 10 };
    });
    
    // ุงูุชุฎุงุจ ุจูุชุฑู ุงูุชุงุฒ
    scoredResults.sort((a, b) => b.score - a.score);
    return scoredResults[0];
}

function displayOptimizationResults(bestResult, allResults) {
    document.getElementById('loading').style.display = 'none';
    document.getElementById('result-section').style.display = 'block';
    
    // ูุนุงู ฺฉุฑุฏู ุชุจ ุจูููโุณุงุฒ
    document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
    document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
    
    document.querySelector('.tab[data-tab="optimization"]').classList.add('active');
    document.getElementById('optimization-tab').classList.add('active');
    
    // ููุงุด ูุชุงุฌ
    const optimizationResult = document.getElementById('optimization-result');
    const optimizationMetrics = document.getElementById('optimization-metrics');
    const optimizedRotationPlan = document.getElementById('optimized-rotation-plan');
    const optimizationPlaceholder = document.getElementById('optimization-placeholder');
    
    optimizationPlaceholder.style.display = 'none';
    optimizationResult.style.display = 'block';
    
    // ููุงุด ูุนุงุฑูุง
    const m = bestResult.metrics;
    optimizationMetrics.innerHTML = `
        <div class="metric-item">
            <div class="metric-value">${m.avgCoverage}%</div>
            <div class="metric-label">ูุงูฺฏู ูพูุดุด</div>
        </div>
        <div class="metric-item">
            <div class="metric-value">${m.familyDiversity}%</div>
            <div class="metric-label">ุชููุน ุฎุงููุงุฏูโูุง</div>
        </div>
        <div class="metric-item">
            <div class="metric-value">${m.avgEfficiency}/10</div>
            <div class="metric-label">ูุงูฺฏู ฺฉุงุฑุง</div>
        </div>
        <div class="metric-item">
            <div class="metric-value">${m.avgRisk}/5</div>
            <div class="metric-label">ูุงูฺฏู ุฎุทุฑ</div>
        </div>
        <div class="metric-item">
            <div class="metric-value">${m.excellentCount}</div>
            <div class="metric-label">ฺฉูุชุฑู ุนุงู</div>
        </div>
        <div class="metric-item">
            <div class="metric-value">${bestResult.score}/100</div>
            <div class="metric-label">ุงูุชุงุฒ ฺฉู</div>
        </div>
    `;
    
    // ููุงุด ุจุฑูุงูู ุชูุงูุจ ุจููู
    optimizedRotationPlan.innerHTML = `
        <h5 style="color: var(--primary-green); margin-bottom: 1rem;">
            <i class="fas fa-trophy"></i> ุจูุชุฑู ุงุณุชุฑุงุชฺ: ${getStrategyName(bestResult.strategy)}
        </h5>
        <div id="optimized-rotation-details"></div>
    `;
    
    displayRotationPlan(bestResult.plan);
    document.getElementById('rotation-plan-container').id = 'optimized-rotation-details';
    
    // ููุงุด ููุงุณู ุงุณุชุฑุงุชฺโูุง
    const comparisonHtml = `
        <div class="alert alert-info" style="margin-top: 2rem;">
            <h5><i class="fas fa-chart-bar"></i> ููุงุณู ุงุณุชุฑุงุชฺโูุง ูุฎุชูู</h5>
            <div class="data-table" style="margin-top: 1rem;">
                <table style="width: 100%;">
                    <thead>
                        <tr>
                            <th>ุงุณุชุฑุงุชฺ</th>
                            <th>ูพูุดุด</th>
                            <th>ุชููุน</th>
                            <th>ฺฉุงุฑุง</th>
                            <th>ุฎุทุฑ</th>
                            <th>ุงูุชุงุฒ</th>
                        </tr>
                    </thead>
                    <tbody>
                        ${allResults.map(r => `
                            <tr ${r.strategy === bestResult.strategy ? 'style="background: #e8f5e8;"' : ''}>
                                <td>${getStrategyName(r.strategy)}</td>
                                <td>${r.metrics.avgCoverage}%</td>
                                <td>${r.metrics.familyDiversity}%</td>
                                <td>${r.metrics.avgEfficiency}</td>
                                <td>${r.metrics.avgRisk}</td>
                                <td><strong>${r.score || '--'}</strong></td>
                            </tr>
                        `).join('')}
                    </tbody>
                </table>
            </div>
        </div>
    `;
    
    optimizedRotationPlan.insertAdjacentHTML('beforeend', comparisonHtml);
}

function getStrategyName(strategyCode) {
    const names = {
        'efficiency-first': 'ุงูููุช ฺฉุงุฑุง',
        'resistance-management': 'ูุฏุฑุช ููุงููุช',
        'balanced': 'ูุชูุงุฒู',
        'cost-effective': 'ููุฑูู ุจู ุตุฑูู'
    };
    return names[strategyCode] || strategyCode;
}

        
        
// ==================== ููุชุฑ ููุง ุนููฺฉุดโูุง ุจุฑ ุงุณุงุณ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ====================

// ==================== ููุทู ุงุตูุงุญโุดุฏู ฺฉุงุฑุง ุจุฑุง ุงูุชุฎุงุจ ุชุฑฺฉุจ (v27) ====================

// ==================== ููุทู ููุง ฺฉุงุฑุง ุจุฑุง ุงูุชุฎุงุจ ฺูุฏฺฏุงูู ูพููโุจุฑฺฏ ู ูุงุฒฺฉโุจุฑฺฏ (v28) ====================
function isEffectiveForSelectedWeeds(herbicide, selectedWeeds) {
    if (!herbicide || !Array.isArray(selectedWeeds) || selectedWeeds.length === 0) return false;

    const scopes = herbicide.control_scope || [];
    const isBroadleafHerbicide = scopes.some(s => s.includes('ูพููโุจุฑฺฏ') && !s.includes('ุฏู ููุธูุฑู'));
    const isNarrowleafHerbicide = scopes.some(s => s.includes('ูุงุฒฺฉโุจุฑฺฏ') && !s.includes('ุฏู ููุธูุฑู'));
    const isDualPurpose = scopes.some(s => s.includes('ุฏู ููุธูุฑู'));

    // ุฌุฏุง ฺฉุฑุฏู ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ
    const broadleafWeeds = selectedWeeds.filter(w => w.type === 'broadleaf');
    const narrowleafWeeds = selectedWeeds.filter(w => w.type === 'narrowleaf');

    // 1๏ธโฃ ูพููโุจุฑฺฏโฺฉุด: ุจุงุฏ ุฑู ุญุฏุงูู ฺฉ ุงุฒ ูพููโุจุฑฺฏโูุง ุงูุชุฎุงุจ ูุคุซุฑ ุจุงุดุฏ
    if (isBroadleafHerbicide && broadleafWeeds.length > 0) {
        return broadleafWeeds.some(w => {
            const eff = getEfficiencySymbol(herbicide, w.name);
            return eff === '***' || eff === '**';
        });
    }

    // 2๏ธโฃ ูุงุฒฺฉโุจุฑฺฏโฺฉุด: ุจุงุฏ ุฑู ุญุฏุงูู ฺฉ ุงุฒ ูุงุฒฺฉโุจุฑฺฏโูุง ุงูุชุฎุงุจ ูุคุซุฑ ุจุงุดุฏ
    if (isNarrowleafHerbicide && narrowleafWeeds.length > 0) {
        return narrowleafWeeds.some(w => {
            const eff = getEfficiencySymbol(herbicide, w.name);
            return eff === '***' || eff === '**';
        });
    }

    // 3๏ธโฃ ุฏู ููุธูุฑู: ุงฺฏุฑ ุฑู ูุฑ ูพููโุจุฑฺฏ ุง ูุงุฒฺฉโุจุฑฺฏ ุงูุชุฎุงุจ ูุคุซุฑ ุจุงุดุฏ
    if (isDualPurpose) {
        return selectedWeeds.some(w => {
            const eff = getEfficiencySymbol(herbicide, w.name);
            return eff === '***' || eff === '**';
        });
    }

    return false;
}




function displayEfficiencyDetails(effectiveHerbicides, selectedWeeds) {
    try {
        const container = document.getElementById('efficiency-details-container');
        if (!container) return;

        
        const fmt2 = (n) => (Number.isFinite(n) ? Number(n).toFixed(2) : '0.00');
if (!effectiveHerbicides || effectiveHerbicides.length === 0) {
            container.innerHTML = `<div class="alert alert-warning">ูฺ ุนููฺฉุด ูุคุซุฑ ุจุฑุง ููุงุด ุฌุฒุฆุงุช ฺฉุงุฑุง ุงูุช ูุดุฏ.</div>`;
            return;
        }

        // ฺฉูุชุฑู ูุฑุชุจโุณุงุฒ
        const sortBar = `
            <div class="eff-sortbar eff-sortbar-v11">
                <label style="font-weight:800;">ูุฑุชุจโุณุงุฒ:</label>
                <select id="eff-sort-select" class="form-select" style="max-width:240px;">
                    <option value="score">ุงูุชุงุฒ (ุจุดุชุฑ โ ฺฉูุชุฑ)</option>
                    <option value="name">ูุงู ุนููฺฉุด (ุงููุจุง)</option>
                </select>
            </div>
        `;

        // ูุฑูุงูโุณุงุฒ ุณุงุฎุชุงุฑ ูุฑูุฏ (ุฏุฑ ุณุณุชู ุดูุง ูุนูููุงู ุขุชูโูุง ุดฺฉู herbData ุฏุงุฑูุฏ)
        const items = effectiveHerbicides.map(h => {
            // ุงฺฏุฑ ุดฺฉู ุขุชู ูุชูุงูุช ุจูุฏุ ุณุน ูโฺฉูู ุณุงุฒฺฏุงุฑ ฺฉูู
            if (h && h.herbicide) return h;
            return { herbicide: h, score: 0, efficiencyDetails: {}, controlledCount: 0, coveragePercentage: 0 };
        });

        function computeCounts(item) {
            const counts = { exc: 0, good: 0, poor: 0, none: 0, unk: 0 };
            const details = item.efficiencyDetails || {};
            selectedWeeds.forEach(w => {
                const d = details[w.name] || null;
                const eff = (d && d.efficiency) ? d.efficiency : "?";
                if (eff === "***") counts.exc++;
                else if (eff === "**") counts.good++;
                else if (eff === "*") counts.poor++;
                else if (eff === "-") counts.none++;
                else counts.unk++;
            });
            const total = Math.max(1, selectedWeeds.length);
            const p = {
                exc: Math.round((counts.exc / total) * 100),
                good: Math.round((counts.good / total) * 100),
                poor: Math.round((counts.poor / total) * 100),
                none: Math.round((counts.none / total) * 100),
                unk: 0
            };
            // ุจุฑุง ุงูฺฉู ุฌูุน ุฏููุงู 100 ุดูุฏ
            p.unk = Math.max(0, 100 - (p.exc + p.good + p.poor + p.none));
            return { counts, perc: p, total };
        }

        function donutStyle(perc) {
            // ุฑูฺฏโูุง ุฏุฑ CSS ุชุนุฑู ุดุฏูโุงูุฏุ ุงูุฌุง ููุท ุงุณุชุงูพโูุง ุณุงุฎุชู ูโุดูุฏ
            const a = perc.exc;
            const b = a + perc.good;
            const c = b + perc.poor;
            const d = c + perc.none;
            return `conic-gradient(var(--c-exc) 0 ${a}%, var(--c-good) ${a}% ${b}%, var(--c-poor) ${b}% ${c}%, var(--c-none) ${c}% ${d}%, var(--c-unk) ${d}% 100%)`;
        }

        function sortItems(mode) {
            const arr = [...items];
            if (mode === "name") {
                arr.sort((a, b) => String(a.herbicide?.trade_name || a.herbicide?.name || "").localeCompare(String(b.herbicide?.trade_name || b.herbicide?.name || ""), "fa"));
            } else {
                arr.sort((a, b) => (b.score || 0) - (a.score || 0));
            }
            return arr;
        }

        let sorted = sortItems("score");

        const render = () => {
            const mode = document.getElementById("eff-sort-select")?.value || "score";
            sorted = sortItems(mode);

            let html = `${sortBar}<div class="eff-card-grid-v11">`;

            sorted.forEach((item, idx) => {
                const h = item.herbicide || {};
                const name = h.trade_name || h.name || "ูุงูุดุฎุต";
                const family = h.chemical_family || h.family || "-";
                const hrac = h.hrac_group || h.hrac || "-";
                const scope = Array.isArray(h.control_scope) ? h.control_scope.join("ุ ") : (h.control_scope || "-");
                const crops = Array.isArray(h.crop_compatibility) ? h.crop_compatibility.join("ุ ") : (h.crop_compatibility || "-");

                const id = (h.id != null ? String(h.id) : ("h_" + idx + "_" + String(name).replace(/\s+/g, "_")));

                // ูุณุช ุนููโูุง ูุฑุฒ ู ฺฉุงุฑุง
                
let weedsHtml = "";
                const details = item.efficiencyDetails || {};

                // ููุงุด ฺฉุงุฑุง ููุท ุจุฑุง ุนููโูุง ูุฑุฒ ูุฑุชุจุท ุจุง ููุน ุนููฺฉุด (ุจุฏูู ููุงุด ูุงูุดุฎุต ุจุฑุง ููุน ูุงูุฑุชุจุท)
                const herb = item.herbicide || item || {};
                const scopesRaw = herb.control_scope || item.control_scope || [];
                const scopes = Array.isArray(scopesRaw) ? scopesRaw : [String(scopesRaw)];

                const isDualPurpose = scopes.some(s => String(s).includes('ุฏู ููุธูุฑู'));
                const isBroadleafHerbicide = scopes.some(s => String(s).includes('ูพููโุจุฑฺฏ')) && !isDualPurpose;
                const isNarrowleafHerbicide = scopes.some(s => String(s).includes('ูุงุฒฺฉโุจุฑฺฏ')) && !isDualPurpose;

                const weedsToShow = isDualPurpose
                    ? selectedWeeds
                    : (isBroadleafHerbicide
                        ? selectedWeeds.filter(w => w && w.type === 'broadleaf')
                        : (isNarrowleafHerbicide
                            ? selectedWeeds.filter(w => w && w.type === 'narrowleaf')
                            : selectedWeeds));

                weedsToShow.forEach(w => {
                    const d = details[w.name] || null;
                    const eff = (d && d.efficiency) ? d.efficiency : "?";
                    const level = (d && d.controlLevel) ? d.controlLevel : "ูุงูุดุฎุต";

                    let cls = "eff-unk";
                    if (eff === "***") cls = "eff-exc";
                    else if (eff === "**") cls = "eff-good";
                    else if (eff === "*") cls = "eff-poor";
                    else if (eff === "-") cls = "eff-none";

                    weedsHtml += `
                        <div class="weed-eff-row-v11">
                            <div class="weed-eff-name-v11">${w.fullName || w.name}</div>
                            <div class="weed-eff-badge-v11 ${cls}">${eff}</div>
                            <div class="weed-eff-level-v11">${level}</div>
                        </div>
                    `;
                });
const cov = Math.max(0, Math.min(100, item.coveragePercentage || 0));
                const { counts, perc } = computeCounts(item);
                const bg = donutStyle(perc);

                html += `
                    <div class="eff-mobile-card-v11" id="eff-card-${id}">
                        <div class="eff-card-top-v11">
                            <div class="eff-titlewrap-v11">
                                <div class="eff-title-v11">${name}</div>
                                <div class="eff-subtitle-v11">
                                    <span class="pill-v11">HRAC: ${hrac}</span>
                                    <span class="pill-v11">ุฎุงููุงุฏู: ${family}</span>
                                    <span class="pill-v11 pill-scope-v11">${scope}</span>
                                </div>
                            </div>

                            <button class="eff-toggle-v11" type="button" aria-expanded="false" data-target="eff-detail-${id}">
                                <span>ุฌุฒุฆุงุช</span>
                                <span class="chev-v11" aria-hidden="true">โพ</span>
                            </button>
                        </div>

                        <div class="eff-kpi-row-v11">
                            <div class="donut-wrap-v11" aria-label="ูููุฏุงุฑ ฺฉุงุฑุง">
                                <div class="donut-v11" style="background:${bg}">
                                    <div class="donut-center-v11">
                                        <div class="donut-big-v11">${fmt2(cov)}%</div>
                                        <div class="donut-small-v11">ูพูุดุด</div>
                                    </div>
                                </div>
                            </div>

                            <div class="kpi-stack-v11">
                                <div class="kpi-box-v11">
                                    <div class="kpi-lbl-v11">ฺฉูุชุฑู</div>
                                    <div class="kpi-val-v11">${item.controlledCount || 0}/${selectedWeeds.length}</div>
                                </div>
                                <div class="kpi-box-v11">
                                    <div class="kpi-lbl-v11">ุงูุชุงุฒ</div>
                                    <div class="kpi-val-v11">${fmt2(item.score || 0)}</div>
                                </div>
                                <div class="kpi-box-v11">
                                    <div class="kpi-lbl-v11">*** / **</div>
                                    <div class="kpi-val-v11">${counts.exc} / ${counts.good}</div>
                                </div>
                            </div>
                        </div>

                        <div class="eff-detail-v11" id="eff-detail-${id}">
                            <div class="eff-detail-grid-v11">
                                <div class="eff-detail-panel-v11">
                                    <div class="panel-title-v11">ุฑุงูููุง ูููุฏุงุฑ</div>
                                    <div class="legend-v11">
                                        <div class="lg-it-v11"><span class="lg-dot-v11 lg-exc-v11"></span><span>*** ุนุงู</span><span class="lg-num-v11">${counts.exc}</span></div>
                                        <div class="lg-it-v11"><span class="lg-dot-v11 lg-good-v11"></span><span>** ุฎูุจ</span><span class="lg-num-v11">${counts.good}</span></div>
                                        <div class="lg-it-v11"><span class="lg-dot-v11 lg-poor-v11"></span><span>* ุถุนู</span><span class="lg-num-v11">${counts.poor}</span></div>
                                        <div class="lg-it-v11"><span class="lg-dot-v11 lg-none-v11"></span><span>- ุจุฏูู</span><span class="lg-num-v11">${counts.none}</span></div>
                                        <div class="lg-it-v11"><span class="lg-dot-v11 lg-unk-v11"></span><span>? ูุงูุดุฎุต</span><span class="lg-num-v11">${counts.unk}</span></div>
                                    </div>

                                    <div class="panel-title-v11" style="margin-top:12px;">ูุดุฎุตุงุช</div>
                                    <div class="meta-grid-v11">
                                        <div class="meta-row-v11"><span>ูุญุตูู:</span><b>${crops}</b></div>
                                        <div class="meta-row-v11"><span>ุทู:</span><b>${scope}</b></div>
                                        <div class="meta-row-v11"><span>HRAC:</span><b>${hrac}</b></div>
                                        <div class="meta-row-v11"><span>ุฎุงููุงุฏู:</span><b>${family}</b></div>
                                    </div>
                                </div>

                                <div class="eff-detail-panel-v11">
                                    <div class="panel-title-v11">ฺฉุงุฑุง ุฑู ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจ</div>
                                    <div class="weed-list-v11">
                                        ${weedsHtml}
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            });

            html += `</div>`;

            // ุชูุถุญ ุฑูฺฏโูุง (ุจุฑุง ุณุงุฒฺฏุงุฑ ุจุง ุฏุฑุฎูุงุณุช ูุจู)
            html += `
                <div class="eff-legend eff-legend-v11">
                    <div><span class="legend-box eff-exc"></span> *** ุนุงู</div>
                    <div><span class="legend-box eff-good"></span> ** ุฎูุจ</div>
                    <div><span class="legend-box eff-poor"></span> * ุถุนู</div>
                    <div><span class="legend-box eff-none"></span> - ุจุฏูู ุชุฃุซุฑ</div>
                    <div><span class="legend-box eff-unk"></span> ? ูุงูุดุฎุต</div>
                </div>
            `;

            container.innerHTML = html;

            const select = document.getElementById("eff-sort-select");
            if (select) {
                select.addEventListener("change", render, { once: true });
            }

            // Toggle handlers
            container.querySelectorAll(".eff-toggle-v11").forEach(btn => {
                btn.addEventListener("click", () => {
                    const targetId = btn.getAttribute("data-target");
                    const panel = targetId ? document.getElementById(targetId) : null;
                    const expanded = btn.getAttribute("aria-expanded") === "true";
                    btn.setAttribute("aria-expanded", expanded ? "false" : "true");
                    btn.classList.toggle("open", !expanded);
                    if (panel) panel.classList.toggle("open", !expanded);
                });
            });
        };

        container.innerHTML = `${sortBar}<div class="alert alert-info">ุฏุฑ ุญุงู ุจุงุฑฺฏุฐุงุฑ...</div>`;
        setTimeout(render, 0);
    } catch (error) {
        console.error(error);
        const container = document.getElementById('efficiency-details-container');
        if (container) container.innerHTML = `<div class="alert alert-danger">ุฎุทุง ุฏุฑ ููุงุด ุฌุฒุฆุงุช ฺฉุงุฑุง: ${error.message}</div>`;
    }
}
        
// ==================== ููุชุฑ ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท ====================
function loadFilteredMixtures(recommendedHerbicides) {
    const mixturesContainer = document.getElementById('mixtures-container');
    if (!mixturesContainer) return;
    
    // ุงุณุชุฎุฑุงุฌ ูุงู ุนููฺฉุดโูุง ุชูุตู ุดุฏู
    const recommendedNames = recommendedHerbicides.map(item => item.herbicide.trade_name);
    
    // ููุชุฑ ุชุฑฺฉุจุงุช ุชุฃุฏ ุดุฏู
    const filteredMixtures = COMPLETE_DATASET.approved_mixtures.filter(mixture => {
        // ุจุฑุฑุณ ูโฺฉูู ฺฉู ุขุง ุญุฏุงูู ฺฉ ุงุฒ ุนููฺฉุดโูุง ุชูุตู ุดุฏู ุฏุฑ ุชุฑฺฉุจ ูุฌูุฏ ุฏุงุฑุฏ
        return mixture.compatible_with.some(name => recommendedNames.includes(name));
    });
    
    if (filteredMixtures.length === 0) {
        mixturesContainer.innerHTML = `
            <div class="alert alert-info">
                <h4><i class="fas fa-info-circle"></i> ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท</h4>
                <p>ูฺ ุชุฑฺฉุจ ูุงุจู ุงุฎุชูุงุท ุจุฑุง ุนููฺฉุดโูุง ุงูุชุฎุงุจ ุดุฏู ุงูุช ูุดุฏ.</p>
                <p>ุนููฺฉุดโูุง ุงูุชุฎุงุจ ุดูุง ุจุง ุชุฑฺฉุจุงุช ุชุฃุฏ ุดุฏู ุฏุฑ ุฏุณุชูุฑุงูุนูู ุงุฌุฑุง ูุฏุฑุช ุดูุง ุนูููุง ูุฑุฒ ุฒุฑุงุนุช ฺฏูุฏู ู ุฌู ููุฑูุงู 1404 ุณุงุฒฺฏุงุฑ ูุณุชูุฏ.</p>
            </div>
        `;
        return;
    }
    
    let html = '<div class="mixture-recommendation">';
    html += '<h4><i class="fas fa-vials"></i> ุชุฑฺฉุจุงุช ูุงุจู ุงุฎุชูุงุท ุจุฑุง ุนููฺฉุดโูุง ุชูุตู ุดุฏู</h4>';
    
    // ฺฏุฑููโุจูุฏ ุชุฑฺฉุจุงุช ุจุฑ ุงุณุงุณ ุนููฺฉุดโูุง ุชูุตู ุดุฏู
    recommendedNames.forEach(herbName => {
        const mixturesForHerb = filteredMixtures.filter(mixture => 
            mixture.compatible_with.includes(herbName)
        );
        
        if (mixturesForHerb.length > 0) {
            html += `
                <div class="mixture-combination">
                    <h5>ุชุฑฺฉุจุงุช ุญุงู ${herbName}</h5>
                    ${mixturesForHerb.map(mixture => `
                        <div class="mixture-item">
                            <div style="display: flex; justify-content: space-between; align-items: start;">
                                <div>
                                    <strong>${mixture.name}</strong>
                                    <div class="compatibility-status compatibility-good">
                                        <i class="fas fa-check-circle"></i> ุชุฃุฏ ุดุฏู
                                    </div>
                                </div>
                            </div>
                            <p style="margin: 0.5rem 0;"><strong>ุชุฑฺฉุจ:</strong> ${mixture.combination}</p>
                            <p style="margin: 0.3rem 0;"><strong>ุนููโูุง ูุฑุฒ ูุฏู:</strong> ${mixture.target_weeds}</p>
                            <p style="margin: 0.3rem 0; color: #666;"><strong>ููุงุญุธุงุช:</strong> ${mixture.notes}</p>
                            <p style="margin: 0.3rem 0;"><strong>ูุญุฏูุฏุช ูุญุตูู:</strong> ${mixture.crop_restrictions.join('ุ ')}</p>
                        </div>
                    `).join('')}
                </div>
            `;
        }
    });
    
    html += '</div>';
    mixturesContainer.innerHTML = html;
}
        
        // ==================== ุณุณุชู ุจูููโุณุงุฒ ุชูุงูุจ ====================
        function optimizeRotation() {
            try {
                const product = document.getElementById('product').value;
                const herbicideHistory = document.getElementById('herbicide_history').value;
                const resistanceRegion = document.getElementById('resistance_report').value;
                const rotationYears = parseInt(document.getElementById('rotation_years').value);
                const rotationStrategy = document.getElementById('rotation_strategy').value;
                
                const selectedWeeds = getSelectedWeeds();
                
                if (selectedWeeds.length === 0) {
                    showError('ูุทูุงู ุญุฏุงูู ฺฉ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ฺฉูุฏ');
                    return;
                }
                
                document.getElementById('loading').style.display = 'block';
                document.getElementById('result-section').style.display = 'none';
                document.getElementById('default-content').style.display = 'none';
                document.getElementById('error-alert').style.display = 'none';
                
                setTimeout(() => {
                    try {
                        const analysis = analyzeHerbicidesForSelectedWeeds(selectedWeeds, product, resistanceRegion, herbicideHistory);
                        const optimizedPlan = generateOptimizedRotationPlan(analysis, selectedWeeds, rotationYears, rotationStrategy);
                        displayOptimizationResults(optimizedPlan, analysis);
                    } catch (error) {
                        showError('ุฎุทุง ุฏุฑ ุจูููโุณุงุฒ', error.message);
                        console.error(error);
                    }
                }, 800);
                
            } catch (error) {
                showError('ุฎุทุง ุฏุฑ ุจูููโุณุงุฒ', error.message);
                console.error(error);
            }
        }
        
        function generateOptimizedRotationPlan(analysis, selectedWeeds, rotationYears, strategy) {
            const plan = [];
            let totalScore = 0;
            let hracDiversity = 0;
            let riskScore = 0;
            let efficiencyScore = 0;
            
            // ูุญุงุณุจู ูุนุงุฑูุง ุจูููโุณุงุฒ
            const allHerbicides = [...analysis.recommended, ...analysis.dualPurpose];
            
            if (allHerbicides.length === 0) {
                return {
                    plan: [],
                    totalScore: 0,
                    hracDiversity: 0,
                    riskScore: 0,
                    efficiencyScore: 0,
                    metrics: {
                        averageEfficiency: 0,
                        riskReduction: 0,
                        costEffectiveness: 0,
                        sustainability: 0
                    }
                };
            }
            
            // ุงุณุชูุงุฏู ุงุฒ ุงูฺฏูุฑุชู ุงูุชุฎุงุจ ุจูุชุฑู ุชุฑฺฉุจ
            const hracGroupsUsed = new Set();
            const chemicalFamiliesUsed = new Set();
            const selectedHerbicides = [];
            
            for (let year = 1; year <= rotationYears; year++) {
                // ูพุฏุง ฺฉุฑุฏู ุจูุชุฑู ุนููฺฉุด ุจุฑุง ุงู ุณุงู
                let bestHerbicide = null;
                let bestScore = -1;
                
                allHerbicides.forEach(herbData => {
                    const herb = herbData.herbicide;
                    
                    // ูุญุงุณุจู ุงูุชุงุฒ ุจุฑุง ุงู ุนููฺฉุด
                    let score = herbData.score;
                    
                    // ุงูุชุงุฒ ูุซุจุช ุจุฑุง ุชููุน ฺฏุฑูู HRAC
                    if (!hracGroupsUsed.has(herb.hrac_group)) {
                        score *= 1.5;
                    }
                    
                    // ุงูุชุงุฒ ููู ุจุฑุง ุฎุทุฑ ููุงููุช ุจุงูุง
                    if (herb.resistance_level === "ุฎู ุฒุงุฏ") {
                        score *= 0.7;
                    } else if (herb.resistance_level === "ุฒุงุฏ") {
                        score *= 0.85;
                    }
                    
                    // ุงูุชุงุฒ ูุซุจุช ุจุฑุง ูพูุดุด ุจุงูุง
                    if (herbData.coveragePercentage >= 80) {
                        score *= 1.3;
                    }
                    
                    // ุจุฑุฑุณ ุงุณุชุฑุงุชฺ
                    if (strategy === "cost-effective") {
                        // ุงูุชุงุฒ ุจุฑุง ูุฒูู ฺฉูุชุฑ (ูุฑุถ: ุนููฺฉุดโูุง ูุฏูโุชุฑ ุงุฑุฒุงูโุชุฑ ูุณุชูุฏ)
                        if (herb.trade_name.includes("ู46") || herb.trade_name.includes("ุจุฑููุงุณุฏ")) {
                            score *= 1.2;
                        }
                    }
                    
                    if (score > bestScore) {
                        bestScore = score;
                        bestHerbicide = herbData;
                    }
                });
                
                if (bestHerbicide) {
                    selectedHerbicides.push(bestHerbicide);
                    hracGroupsUsed.add(bestHerbicide.herbicide.hrac_group);
                    chemicalFamiliesUsed.add(bestHerbicide.herbicide.chemical_family || "Unknown");
                    
                    totalScore += bestScore;
                    efficiencyScore += bestHerbicide.coveragePercentage;
                    
                    // ูุญุงุณุจู ุงูุชุงุฒ ุฎุทุฑ
                    let riskFactor = 1;
                    switch(bestHerbicide.herbicide.resistance_level) {
                        case "ุฎู ุฒุงุฏ": riskFactor = 0.4; break;
                        case "ุฒุงุฏ": riskFactor = 0.6; break;
                        case "ูุชูุณุท": riskFactor = 0.8; break;
                        case "ฺฉู": riskFactor = 1.0; break;
                        case "ุจุณุงุฑ ฺฉู": riskFactor = 1.2; break;
                    }
                    riskScore += riskFactor * 20;
                    
                    plan.push({
                        year: year,
                        herbicide: bestHerbicide,
                        score: bestScore,
                        reason: getSelectionReason(bestHerbicide, hracGroupsUsed.size, strategy)
                    });
                }
            }
            
            hracDiversity = (hracGroupsUsed.size / rotationYears) * 100;
            
            return {
                plan: plan,
                totalScore: totalScore,
                hracDiversity: hracDiversity,
                riskScore: riskScore / rotationYears,
                efficiencyScore: efficiencyScore / rotationYears,
                metrics: {
                    averageEfficiency: efficiencyScore / rotationYears,
                    riskReduction: 100 - (riskScore / rotationYears),
                    costEffectiveness: calculateCostEffectiveness(selectedHerbicides),
                    sustainability: (hracDiversity + (efficiencyScore / rotationYears)) / 2
                }
            };
        }
        
        function getSelectionReason(herbData, hracDiversityCount, strategy) {
            const herb = herbData.herbicide;
            const reasons = [];
            
            if (herbData.coveragePercentage >= 80) {
                reasons.push(`ูพูุดุด ุนุงู (${herbData.coveragePercentage.toFixed(1)}%)`);
            }
            
            if (herb.resistance_level === "ฺฉู" || herb.resistance_level === "ุจุณุงุฑ ฺฉู") {
                reasons.push(`ุฎุทุฑ ููุงููุช ${herb.resistance_level}`);
            }
            
            if (hracDiversityCount <= 2) {
                reasons.push(`ุงูุฒุงุด ุชููุน ฺฏุฑูู HRAC`);
            }
            
            if (strategy === "cost-effective" && (herb.trade_name.includes("ู46") || herb.trade_name.includes("ุจุฑููุงุณุฏ"))) {
                reasons.push(`ููุฑูู ุจู ุตุฑูู`);
            }
            
            return reasons.length > 0 ? reasons.join('ุ ') : 'ุงูุชุฎุงุจ ุจุฑ ุงุณุงุณ ฺฉุงุฑุง ฺฉู';
        }
        
        function calculateCostEffectiveness(herbicides) {
            let score = 0;
            
            herbicides.forEach(herbData => {
                const herb = herbData.herbicide;
                
                // ูุฑุถ: ุนููฺฉุดโูุง ูุฏูโุชุฑ ู ุชุฑฺฉุจุงุช ุณุงุฏู ุงุฑุฒุงูโุชุฑ ูุณุชูุฏ
                if (herb.trade_name.includes("ู46") || herb.trade_name.includes("ุจุฑููุงุณุฏ") || herb.trade_name.includes("ูพุงุฑุฏูุฑ")) {
                    score += 30;
                } else if (herb.trade_name.includes("ุขุชูุงูุชุณ") || herb.trade_name.includes("ุชูุชุงู")) {
                    score += 15;
                } else if (herb.trade_name.includes("ุขฺฉุณุงู") || herb.trade_name.includes("ฺฏุฑุงูุณุชุงุฑ")) {
                    score += 20;
                } else {
                    score += 25;
                }
            });
            
            return score / herbicides.length;
        }
        
        function displayOptimizationResults(optimizedPlan, analysis) {
            document.getElementById('loading').style.display = 'none';
            document.getElementById('result-section').style.display = 'block';
            
            // ูุนุงู ฺฉุฑุฏู ุชุจ ุจูููโุณุงุฒ
            document.querySelectorAll('.tab').forEach(tab => tab.classList.remove('active'));
            document.querySelectorAll('.tab-content').forEach(content => content.classList.remove('active'));
            
            const optimizationTab = document.querySelector('.tab[data-tab="optimization"]');
            const optimizationContent = document.getElementById('optimization-tab');
            
            if (optimizationTab && optimizationContent) {
                optimizationTab.classList.add('active');
                optimizationContent.classList.add('active');
            }
            
            const optimizationResult = document.getElementById('optimization-result');
            const optimizationMetrics = document.getElementById('optimization-metrics');
            const optimizedRotationPlan = document.getElementById('optimized-rotation-plan');
            
            optimizationResult.style.display = 'block';
            
            // ููุงุด ูุนุงุฑูุง
            let metricsHtml = '';
            
            if (optimizedPlan.metrics) {
                metricsHtml = `
                    <div class="metric-item">
                        <div class="metric-value">${optimizedPlan.metrics.averageEfficiency.toFixed(1)}%</div>
                        <div class="metric-label">ฺฉุงุฑุง ูุชูุณุท</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">${optimizedPlan.metrics.riskReduction.toFixed(1)}%</div>
                        <div class="metric-label">ฺฉุงูุด ุฎุทุฑ ููุงููุช</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">${optimizedPlan.metrics.costEffectiveness.toFixed(1)}</div>
                        <div class="metric-label">ุตุฑููโุงูุชุตุงุฏ</div>
                    </div>
                    <div class="metric-item">
                        <div class="metric-value">${optimizedPlan.metrics.sustainability.toFixed(1)}%</div>
                        <div class="metric-label">ูพุงุฏุงุฑ</div>
                    </div>
                `;
            }
            
            optimizationMetrics.innerHTML = metricsHtml;
			
            ```css
/* ==================== ุงุณุชุงูโูุง ูุฎุตูุต ููุจุงู ==================== */
@media (max-width: 768px) {
    body {
        padding: 8px !important;
        background: #f5f7fa !important;
    }
    
    .container {
        max-width: 100% !important;
        margin: 0 auto !important;
        border-radius: 12px !important;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1) !important;
        overflow-x: hidden !important;
    }
    
    .header {
        padding: 1.2rem !important;
    }
    
    .header h1 {
        font-size: 1.4rem !important;
        line-height: 1.5 !important;
    }
    
    .header .subtitle {
        font-size: 0.95rem !important;
    }
    
    .app-container {
        flex-direction: column !important;
        min-height: auto !important;
    }
    
    .sidebar {
        width: 100% !important;
        padding: 1rem !important;
        border-left: none !important;
        border-bottom: 3px solid var(--primary-green) !important;
        max-height: 70vh !important;
        overflow-y: auto !important;
    }
    
    .main-content {
        padding: 1rem !important;
    }
    
    .checkbox-grid {
        grid-template-columns: 1fr !important;
        max-height: 300px !important;
    }
    
    .checkbox-item {
        padding: 12px 10px !important;
        margin: 3px 0 !important;
    }
    
    .checkbox-item label {
        font-size: 0.92rem !important;
    }
    
    .btn {
        padding: 16px !important;
        font-size: 1.05rem !important;
        margin: 8px 0 !important;
    }
    
    .tab-container {
        display: flex !important;
        flex-wrap: nowrap !important;
        overflow-x: auto !important;
        -webkit-overflow-scrolling: touch !important;
        padding-bottom: 5px !important;
    }
    
    .tab {
        padding: 12px 16px !important;
        font-size: 0.9rem !important;
        white-space: nowrap !important;
        flex-shrink: 0 !important;
    }
    
    select, input[type="text"], input[type="number"] {
        font-size: 16px !important;
        padding: 14px 12px !important;
        min-height: 52px !important;
    }
    
    .result-grid {
        grid-template-columns: 1fr !important;
        gap: 1rem !important;
    }
    
    .result-card {
        margin-bottom: 1rem !important;
    }
    
    .herbicide-item {
        padding: 1rem !important;
        margin-bottom: 0.8rem !important;
    }
    
    .efficiency-table {
        font-size: 12px !important;
        display: block !important;
        overflow-x: auto !important;
    }
    
    .efficiency-table th,
    .efficiency-table td {
        padding: 8px 6px !important;
        min-width: 60px !important;
    }
    
    .rotation-years-container {
        grid-template-columns: 1fr !important;
    }
    
    /* ุจูุจูุฏ ููุณ ุจุฑุง ุฏฺฉููโูุง */
    button, .btn, .tab, .checkbox-item, select {
        cursor: pointer !important;
        -webkit-tap-highlight-color: rgba(0,0,0,0) !important;
    }
    
    /* ุจุฒุฑฺฏโุชุฑ ฺฉุฑุฏู ูุงุญู ฺฉูฺฉ ุจุฑุง ฺฺฉโุจุงฺฉุณโูุง */
    .checkbox-item input[type="checkbox"] {
        width: 22px !important;
        height: 22px !important;
        margin-left: 10px !important;
    }
}

/* ุจูุจูุฏ ุจุฑุง ุตูุญุงุช ฺฉูฺฺฉโุชุฑ (ููุจุงูโูุง ูุฏู) */
@media (max-width: 480px) {
    .header h1 {
        font-size: 1.2rem !important;
    }
    
    .tab {
        padding: 10px 12px !important;
        font-size: 0.85rem !important;
    }
    
    .btn {
        padding: 14px !important;
        font-size: 1rem !important;
    }
}

/* ุฌููฺฏุฑ ุงุฒ zoom ุฏุฑ iOS */
@media screen and (max-width: 768px) {
    input, select, textarea {
        font-size: 16px !important;
    }
}

/* ุจูุจูุฏ ุงุณฺฉุฑูู ุฑู ููุจุงู */
.checkbox-grid, .efficiency-details, .section-content {
    -webkit-overflow-scrolling: touch !important;
}

/* ุจูููโุณุงุฒ ุจุฑุง ููุณ */
@media (hover: none) and (pointer: coarse) {
    .btn:hover {
        transform: none !important;
        box-shadow: none !important;
    }
    
    .checkbox-item:hover {
        background: white !important;
        border-color: #e0e0e0 !important;
    }
    
    .checkbox-item:active {
        background: var(--primary-green-25) !important;
        border-color: var(--primary-green) !important;
    }
    
    .btn:active {
        background: linear-gradient(135deg, var(--primary-green-dark), #0d4720) !important;
        transform: scale(0.98) !important;
    }
}
```
		
            
            // ููุงุด ุจุฑูุงูู ุชูุงูุจ ุจูููโุดุฏู
            let rotationHtml = '<div class="rotation-years-container">';
            
            if (optimizedPlan.plan.length === 0) {
                rotationHtml += '<p style="text-align: center; color: #666; padding: 2rem;">ุจุฑูุงูู ุจูููโุณุงุฒ ุชููุฏ ูุดุฏ.</p>';
            } else {
                optimizedPlan.plan.forEach(yearPlan => {
                    const herb = yearPlan.herbicide.herbicide;
                    
                    rotationHtml += `
                        <div class="rotation-year-card">
                            <div class="rotation-year-card-header">ุณุงู ${yearPlan.year} - ุงูุชุงุฒ: ${yearPlan.score.toFixed(1)}</div>
                            <div class="rotation-year-card-content">
                                <div class="rotation-herbicide-card">
                                    <strong>${herb.trade_name}</strong>
                                    <p style="font-size: 0.9rem; margin: 0.3rem 0;"><strong>ุฏูู ุงูุชุฎุงุจ:</strong> ${yearPlan.reason}</p>
                                    <p style="font-size: 0.9rem; margin: 0.3rem 0;"><strong>ฺฏุฑูู HRAC:</strong> ${herb.hrac_group}</p>
                                    <p style="font-size: 0.9rem; margin: 0.3rem 0;"><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herb.dosage}</p>
                                    <p style="font-size: 0.9rem; margin: 0.3rem 0;"><strong>ูพูุดุด:</strong> ${yearPlan.herbicide.coveragePercentage.toFixed(1)}%</p>
                                    <p style="font-size: 0.85rem; color: #666; margin-top: 0.5rem;">${herb.notes.substring(0, 150)}...</p>
                                </div>
                            </div>
                        </div>
                    `;
                });
            }
            
            rotationHtml += '</div>';
            optimizedRotationPlan.innerHTML = rotationHtml;
        }
        
// ==================== ููุงุด ุชูุงูุจโูุง ุงุฎุชุตุงุต ====================
function displaySpecialRotations() {
    try {
        const container = document.getElementById('specific-rotation-container');
        if (!container) return;

        const product = document.getElementById('product').value;
        const selectedWeeds = getSelectedWeeds();

        if (selectedWeeds.length === 0) {
            container.innerHTML = `
                <div class="alert alert-warning">
                    <h4><i class="fas fa-exclamation-triangle"></i> ูฺ ุนูู ูุฑุฒ ุงูุชุฎุงุจ ูุดุฏู ุงุณุช</h4>
                    <p>ุจุฑุง ูุดุงูุฏู ุชูุงูุจโูุง ุงุฎุชุตุงุตุ ูุทูุงู ุญุฏุงูู ฺฉ ุนูู ูุฑุฒ ุงุฒ ุจุฎุด ุณูุช ฺูพ ุงูุชุฎุงุจ ฺฉูุฏ.</p>
                </div>
            `;
            return;
        }

        function getEfficiencySymbol(herbicide, weedName) {
            if (herbicide && herbicide.efficiency && typeof herbicide.efficiency === 'object') {
                const v = herbicide.efficiency[weedName];
                return (v === "***" || v === "**" || v === "*" || v === "-" || v === "?") ? v : "?";
            }
            return "?";
        }

        function rankSymbol(sym) {
            switch (sym) {
                case "***": return 3;
                case "**": return 2;
                case "*": return 1;
                default: return 0;
            }
        }

        let html = `
            <div class="alert alert-info">
                <h4><i class="fas fa-info-circle"></i> ุชูุงูุจโูุง ุงุฎุชุตุงุต ููุชุฑ ุดุฏู</h4>
                <p>
                    ุฏุฑ ุงู ุจุฎุดุ ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ููุท ุนููฺฉุดโูุง ุจุง ุงุซุฑ <strong>ุนุงู (***)</strong> ู <strong>ุฎูุจ (**)</strong> ููุงุด ุฏุงุฏู ูโุดููุฏ.
                    ููุท ุฏุฑ ุตูุฑุช ูุจูุฏ ฺฏุฒูู ุนุงู/ุฎูุจุ ฺฏุฒููโูุง <strong>ุถุนู (*)</strong> ููุงุด ุฏุงุฏู ูโุดููุฏ.
                    ุนููฺฉุดโูุง <strong>ุจุฏูู ุชุงุซุฑ (-)</strong> ุง <strong>ูุงูุดุฎุต (?)</strong> ูุฑฺฏุฒ ููุงุด ุฏุงุฏู ููโุดููุฏ.
                </p>
            </div>
        `;

        let hasAnyItem = false;

        selectedWeeds.forEach(weed => {
            const excellent = [];
            const good = [];
            const poor = [];

            COMPLETE_DATASET.herbicides.forEach(herb => {
                // ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู
                if (!herb || !herb.crop_compatibility || !herb.crop_compatibility.includes(product)) return;

                const sym = getEfficiencySymbol(herb, weed.name);

                if (sym === "***") {
                    excellent.push(herb);
                } else if (sym === "**") {
                    good.push(herb);
                } else if (sym === "*") {
                    poor.push(herb);
                } else {
                    // "-" ุง "?" ูุฑฺฏุฒ ุฏุฑ ุงู ุชุจ ููุงุด ุฏุงุฏู ููโุดูุฏ
                    return;
                }
            });

            let listToShow = [];
            let caption = '';

            if (excellent.length > 0 || good.length > 0) {
                // ููุงุด ุนุงู + ุฎูุจ
                listToShow = excellent.concat(good);
                caption = `ููุงุด ฺฏุฒููโูุง ุนุงู ู ุฎูุจ (${excellent.length} ุนุงูุ ${good.length} ุฎูุจ)`;
            } else if (poor.length > 0) {
                // ููุท ุงฺฏุฑ ุนุงู/ุฎูุจ ูุฌูุฏ ูุฏุงุดุช
                listToShow = poor;
                caption = `ูฺ ฺฏุฒูู ุนุงู/ุฎูุจ ุซุจุช ูุดุฏูุ ููุงุด ฺฏุฒููโูุง ุถุนู (${poor.length} ููุฑุฏ)`;
            } else {
                listToShow = [];
                caption = 'ูฺ ุนููฺฉุด ุจุง ุงุซุฑ ูุซุจุช ุจุฑุง ุงู ุนูู ูุฑุฒ ุซุจุช ูุดุฏู ุงุณุช.';
            }

            // ูุฑุชุจโุณุงุฒ: ุนุงูุ ุณูพุณ ุฎูุจุ ุณูพุณ ุถุนูุ ู ุฏุฑ ูุฑ ุฏุณุชู ุจุฑ ุงุณุงุณ ูุงู ุชุฌุงุฑ
            listToShow.sort((a, b) => {
                const sa = rankSymbol(getEfficiencySymbol(a, weed.name));
                const sb = rankSymbol(getEfficiencySymbol(b, weed.name));
                if (sb !== sa) return sb - sa;
                return (a.trade_name || '').localeCompare(b.trade_name || '', 'fa');
            });

            if (listToShow.length > 0) hasAnyItem = true;

            html += `
                <div class="rotation-scheme" style="margin-top: 1.25rem;">
                    <div class="rotation-scheme-header">
                        <span class="weed-name">${weed.fullName}</span>
                        <span class="crop-type">${weed.type === 'broadleaf' ? 'ูพููโุจุฑฺฏ' : 'ูุงุฒฺฉโุจุฑฺฏ'}</span>
                    </div>

                    <div style="padding: 1rem; border-top: 1px solid #eee;">
                        <p style="margin: 0 0 0.75rem 0; color: #666; font-size: 0.92rem;">
                            ${caption}
                        </p>

                        ${listToShow.length === 0 ? `
                            <div class="alert alert-warning" style="margin: 0;">
                                <p style="margin:0;">${caption}</p>
                            </div>
                        ` : `
                            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(260px, 1fr)); gap: 0.75rem;">
                                ${(() => {
  const famOrder = [];
  const groups = {};
  listToShow.forEach((herb) => {
    const fam = (herb.chemical_family || 'Unknown');
    if (!groups[fam]) { groups[fam] = []; famOrder.push(fam); }
    groups[fam].push(herb);
  });
  return famOrder.map((fam) => {
    const items = groups[fam] || [];
    return `
      <div class="specfam-v13">
        <div class="specfam-h-v13">${fam}</div>
        <div class="specfam-grid-v13">
          ${items.map(herb => {

                                    const sym = getEfficiencySymbol(herb, weed.name);
                                    let badgeClass = '';
                                    let badgeText = '';

                                    if (sym === '***') { badgeClass = 'efficiency-excellent-badge'; badgeText = 'ุนุงู (***)'; }
                                    else if (sym === '**') { badgeClass = 'efficiency-good-badge'; badgeText = 'ุฎูุจ (**)'; }
                                    else { badgeClass = 'efficiency-poor-badge'; badgeText = 'ุถุนู (*)'; }

                                    return `
                                        <div class="effective-herbicide-item" style="margin:0;">
                                            <div style="display:flex; justify-content: space-between; align-items:center;">
                                                <strong>${herb.trade_name}</strong>
                                                <span class="herbicide-efficiency-badge ${badgeClass}">${badgeText}</span>
                                            </div>
                                            <p style="margin: 0.35rem 0; font-size: 0.88rem;"><strong>ูุงู ุนููู:</strong> ${herb.common_name}</p>
                                            <p style="margin: 0.35rem 0; font-size: 0.88rem;"><strong>ฺฏุฑูู HRAC:</strong> ${herb.hrac_group}</p>
                                            <p style="margin: 0.35rem 0; font-size: 0.88rem;"><strong>ุฎุงููุงุฏู ุดูุง:</strong> ${herb.chemical_family || 'ูุงูุดุฎุต'}</p>
                                            <p style="margin: 0.35rem 0; font-size: 0.88rem;"><strong>ููุฏุงุฑ ูุตุฑู:</strong> ${herb.dosage}</p>
                                        </div>
                                    `;
                                
          }).join('')}
        </div>
      </div>
    `;
  }).join('');
})()}
                            </div>
                        `}
                    </div>
                </div>
            `;
        });

        if (!hasAnyItem) {
            container.innerHTML = `
                <div class="alert alert-warning">
                    <h4><i class="fas fa-exclamation-triangle"></i> ูฺ ุขุชู ุจุฑุง ููุงุด ุงูุช ูุดุฏ</h4>
                    <p>ุจุฑุง ุนููโูุง ูุฑุฒ ุงูุชุฎุงุจุ ูฺ ุนููฺฉุด ุจุง ุงุซุฑ ูุซุจุช (*ุ ** ุง ***) ู ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู ${product} ุงูุช ูุดุฏ.</p>
                </div>
            `;
            return;
        }

        container.innerHTML = html;

    } catch (error) {
        console.error('ุฎุทุง ุฏุฑ ุชููุฏ ุชูุงูุจโูุง ุงุฎุชุตุงุต:', error);
        const container = document.getElementById('specific-rotation-container');
        if (container) {
            container.innerHTML = `
                <div class="alert alert-danger">
                    <h4><i class="fas fa-times-circle"></i> ุฎุทุง ุฏุฑ ูพุฑุฏุงุฒุด</h4>
                    <p>${error.message}</p>
                </div>
            `;
        }
    }
}

// ==================== ุชููุฏ ุชูุงูุจ ุงุฎุชุตุงุต ุจุฑุง ูุฑ ุนูู ูุฑุฒ ====================
function generateSpecificRotationForWeed(weed, product, rotationYears, strategy) {
    try {
        const effectiveHerbicideIds = weed.effectiveHerbicides || [];
        
        if (effectiveHerbicideIds.length === 0) {
            return { plan: [], weedName: weed.fullName };
        }
        
        // ุฌูุนโุขูุฑ ุนููฺฉุดโูุง ูุคุซุฑ ู ุณุงุฒฺฏุงุฑ ุจุง ูุญุตูู
        let availableHerbicides = [];
        effectiveHerbicideIds.forEach(id => {
            const herbicide = COMPLETE_DATASET.herbicides.find(h => h.id === id);
            if (herbicide && herbicide.crop_compatibility.includes(product)) {
                const efficiency = herbicide.efficiency[weed.name] || "?";
                
                // ุงฺฏุฑ ฺฉุงุฑุง "ุจุฏูู ุชุงุซุฑ" ุง "ูุงูุดุฎุต" ุงุณุชุ ูุงุฏุฏู ุจฺฏุฑ
                if (efficiency === "-" || efficiency === "?") {
                    return;
                }
                
                let score = 0;
                switch(efficiency) {
                    case "***": score = 10; break;
                    case "**": score = 7; break;
                    case "*": score = 4; break;
                    default: score = 0;
                }
                
                if (score > 0) {
                    availableHerbicides.push({
                        herbicide: herbicide,
                        score: score,
                        family: getChemicalFamily(herbicide.trade_name),
                        controlledCount: 1,
                        excellentControlCount: efficiency === "***" ? 1 : 0,
                        efficiency: efficiency
                    });
                }
            }
        });
        
        if (availableHerbicides.length === 0) {
            return { plan: [], weedName: weed.fullName };
        }
        
        // ุชููุฏ ุชูุงูุจ
        let plan = [];
        let usedFamilies = [];
        let usedHerbicides = new Set();
        
        for (let year = 1; year <= rotationYears; year++) {
            let yearPlan = {
                year: year,
                herbicides: [],
                family: null
            };
            
            // ููุชุฑ ุนููฺฉุดโูุง ุงุณุชูุงุฏู ูุดุฏู
            const availableThisYear = availableHerbicides.filter(h => 
                !usedHerbicides.has(h.herbicide.id)
            );
            
            if (availableThisYear.length === 0) {
                // ุงฺฏุฑ ุนููฺฉุด ุฌุฏุฏ ููุงูุฏูุ ุงุฒ ูุจูโูุง ุงูุชุฎุงุจ ฺฉู (ุงูุง ุชุฑุฌุญุงู ุจุง ุฎุงููุงุฏู ูุชูุงูุช)
                const allHerbicides = availableHerbicides.filter(h => 
                    !usedFamilies.includes(h.family) || usedFamilies.length === 0
                );
                
                if (allHerbicides.length > 0) {
                    // ุงูููุชโุจูุฏ ุจุฑ ุงุณุงุณ ุงูุชุงุฒ
                    allHerbicides.sort((a, b) => b.score - a.score);
                    const selectedHerbicide = allHerbicides[0];
                    
                    yearPlan.herbicides.push({
                        type: selectedHerbicide.herbicide.control_scope.join(', '),
                        data: selectedHerbicide
                    });
                    yearPlan.family = selectedHerbicide.family;
                    usedHerbicides.add(selectedHerbicide.herbicide.id);
                }
            } else {
                // ุงูููุชโุจูุฏ ุฎุงููุงุฏูโูุง ูุฌุงุฒ
                let availableFamilies = getAvailableFamiliesForYear(
                    usedFamilies,
                    availableThisYear,
                    rotationYears,
                    year,
                    plan
                );
                
                if (availableFamilies.length === 0) {
                    // ุงุฒ ุฎุงููุงุฏูโูุง ููุฌูุฏ ุงูุชุฎุงุจ ฺฉู
                    availableFamilies = [...new Set(availableThisYear.map(h => h.family))];
                }
                
                if (availableFamilies.length > 0) {
                    // ุงูุชุฎุงุจ ุจูุชุฑู ุฎุงููุงุฏู ุจุฑ ุงุณุงุณ ุงุณุชุฑุงุชฺ
                    availableFamilies = prioritizeFamiliesByStrategy(availableFamilies, strategy, availableThisYear);
                    const selectedFamily = availableFamilies[0];
                    
                    // ุงูุชุฎุงุจ ุจูุชุฑู ุนููฺฉุด ุงุฒ ุงู ุฎุงููุงุฏู
                    const familyHerbicides = availableThisYear.filter(h => h.family === selectedFamily);
                    if (familyHerbicides.length > 0) {
                        familyHerbicides.sort((a, b) => b.score - a.score);
                        const selectedHerbicide = familyHerbicides[0];
                        
                        yearPlan.herbicides.push({
                            type: selectedHerbicide.herbicide.control_scope.join(', '),
                            data: selectedHerbicide
                        });
                        yearPlan.family = selectedFamily;
                        usedHerbicides.add(selectedHerbicide.herbicide.id);
                    }
                }
            }
            
            plan.push(yearPlan);
            if (yearPlan.family) {
                usedFamilies.push(yearPlan.family);
            }
        }
        
        return { plan: plan, weedName: weed.fullName };
        
    } catch (error) {
        console.error('ุฎุทุง ุฏุฑ ุชููุฏ ุชูุงูุจ ุงุฎุชุตุงุต:', error);
        return { plan: [], weedName: weed.fullName };
    }
}
        
        function generateSpecificWeedRotation(weed, effectiveHerbicides, years) {
            const rotation = [];
            
            if (effectiveHerbicides.length === 0) {
                return rotation;
            }
            
            // ุจุงุฑฺฏุฐุงุฑ ุชุงุฑุฎฺู ูุตุฑู ุจุฑุง ุงู ุนูู ูุฑุฒ
            const historyKey = `rotation_history_${weed.id}`;
            const history = JSON.parse(localStorage.getItem(historyKey)) || [];
            
            // ูุฑุชุจโุณุงุฒ ุนููฺฉุดโูุง ุจุฑ ุงุณุงุณ ฺฉุงุฑุง
            effectiveHerbicides.sort((a, b) => {
                const effA = a.efficiency[weed.name] || "?";
                const effB = b.efficiency[weed.name] || "?";
                
                const scoreA = getEfficiencyScore(effA);
                const scoreB = getEfficiencyScore(effB);
                
                return scoreB - scoreA;
            });
            
            // ุชููุฏ ุจุฑูุงูู ุชูุงูุจ
            for (let year = 1; year <= years; year++) {
                let selectedHerbicide = null;
                
                // ุงุจุชุฏุง ุณุน ูโฺฉูู ุงุฒ ุจูุชุฑู ุนููฺฉุดโูุง ุงุณุชูุงุฏู ฺฉูู
                // ุงูุง ุงุฒ ุชฺฉุฑุงุฑ ุนููฺฉุดโูุง ุงุณุชูุงุฏู ุดุฏู ุฏุฑ ุชุงุฑุฎฺู ุงุฌุชูุงุจ ูโฺฉูู
                const recentHerbicides = history.slice(-2).map(h => h.herbicide);
                
                for (const herb of effectiveHerbicides) {
                    if (!recentHerbicides.includes(herb.trade_name)) {
                        selectedHerbicide = herb;
                        break;
                    }
                }
                
                // ุงฺฏุฑ ููู ุนููฺฉุดโูุง ุฏุฑ ุชุงุฑุฎฺู ุงุฎุฑ ุจูุฏูุฏุ ุงุฒ ุจูุชุฑูโูุง ุงุณุชูุงุฏู ูโฺฉูู
                if (!selectedHerbicide && effectiveHerbicides.length > 0) {
                    selectedHerbicide = effectiveHerbicides[0];
                }
                
                if (selectedHerbicide) {
                    rotation.push({
                        year: year,
                        herbicide: selectedHerbicide,
                        efficiency: selectedHerbicide.efficiency[weed.name] || "?"
                    });
                    
                    // ุฐุฎุฑู ุฏุฑ ุชุงุฑุฎฺู
                    history.push({
                        year: new Date().getFullYear() + year - 1,
                        herbicide: selectedHerbicide.trade_name,
                        hrac_group: selectedHerbicide.hrac_group,
                        efficiency: selectedHerbicide.efficiency[weed.name] || "?"
                    });
                }
            }
            
            // ุฐุฎุฑู ุชุงุฑุฎฺู
            if (history.length > 5) {
                localStorage.setItem(historyKey, JSON.stringify(history.slice(-5)));
            } else {
                localStorage.setItem(historyKey, JSON.stringify(history));
            }
            
            return rotation;
        }
        
        function getEfficiencyScore(efficiency) {
            switch(efficiency) {
                case "***": return 10;
                case "**": return 7;
                case "*": return 4;
                case "-": return 0;
                case "?": return 2;
                default: return 0;
            }
        }
        
        function getEfficiencyText(efficiency) {
            switch(efficiency) {
                case "***": return "ฺฉูุชุฑู ุนุงู";
                case "**": return "ฺฉูุชุฑู ุฎูุจ";
                case "*": return "ฺฉูุชุฑู ุถุนู";
                case "-": return "ุจุฏูู ุชุงุซุฑ";
                case "?": return "ูุงูุดุฎุต";
                default: return "ูุงูุดุฎุต";
            }
        }
        
        // ==================== ุณุณุชู ูุญุงุณุจู ุณู ูุตุฑู ====================
        function updateCalculationType() {
            const type = document.getElementById('calculationType').value;
            const areaUnit = document.getElementById('areaUnit');
            const herbicideUnit = document.getElementById('herbicideUnit');
            const instructionType = document.getElementById('instructionType');
            
            if (type === 'farm') {
                areaUnit.textContent = 'ูฺฉุชุงุฑ';
                herbicideUnit.textContent = 'ูุชุฑ/ูฺฉุชุงุฑ';
                instructionType.textContent = 'ุจุฑุง ุฒุฑุงุน:';
            } else {
                areaUnit.textContent = 'ูุชุฑ ูุฑุจุน';
                herbicideUnit.textContent = 'ููโูุชุฑ/ูุชุฑ ูุฑุจุน';
                instructionType.textContent = 'ุจุฑุง ุจุงุบ:';
            }
        }
        
        function calculateSpraying() {
            const type = document.getElementById('calculationType').value;
            const area = parseFloat(document.getElementById('area').value) || 0;
            const herbicideRate = parseFloat(document.getElementById('herbicideRate').value) || 0;
            const waterRate = parseFloat(document.getElementById('waterRate').value) || 0;
            const tankCapacity = parseFloat(document.getElementById('tankCapacity').value) || 0;
            
            if (area <= 0 || herbicideRate <= 0 || waterRate <= 0 || tankCapacity <= 0) {
                showError('ูุทูุงู ููู ููุงุฏุฑ ุฑุง ุจู ุฏุฑุณุช ูุงุฑุฏ ฺฉูุฏ');
                return;
            }
            
            let totalHerbicide, totalWater;
            
            if (type === 'farm') {
                // ูุญุงุณุจุงุช ุจุฑุง ุฒุฑุงุน
                totalHerbicide = area * herbicideRate;
                totalWater = area * waterRate;
            } else {
                // ูุญุงุณุจุงุช ุจุฑุง ุจุงุบ (ุชุจุฏู ุจู ูฺฉุชุงุฑ)
                const areaInHectare = area / 10000;
                totalHerbicide = areaInHectare * herbicideRate * 1000; // ุชุจุฏู ุจู ููโูุชุฑ
                totalWater = areaInHectare * waterRate;
            }
            
            const tankFills = Math.ceil(totalWater / tankCapacity);
            const herbicidePerTank = totalHerbicide / tankFills;
            
            // ููุงุด ูุชุงุฌ
            document.getElementById('totalHerbicide').textContent = 
                type === 'farm' ? `${totalHerbicide.toFixed(2)} ูุชุฑ` : `${totalHerbicide.toFixed(0)} ููโูุชุฑ`;
            document.getElementById('totalWater').textContent = `${totalWater.toFixed(0)} ูุชุฑ`;
            document.getElementById('tankFills').textContent = `${tankFills} ุจุงุฑ`;
            document.getElementById('herbicidePerTank').textContent = 
                type === 'farm' ? `${herbicidePerTank.toFixed(2)} ูุชุฑ` : `${herbicidePerTank.toFixed(0)} ููโูุชุฑ`;
            
            // ุฏุณุชูุฑุงูุนูู
            document.getElementById('herbicideInstruction').textContent = 
                type === 'farm' ? herbicidePerTank.toFixed(2) : herbicidePerTank.toFixed(0);
            document.getElementById('instructionUnit').textContent = 
                type === 'farm' ? 'ูุชุฑ' : 'ููโูุชุฑ';
            document.getElementById('waterInstruction').textContent = tankCapacity.toFixed(0);
            
            document.getElementById('calculatorResult').style.display = 'block';
        }
        
        // ==================== ุจูุจูุฏ ุณุณุชู ุงูุชุฎุงุจ ุนูู ูุฑุฒ ุฎุงุต ====================
        // ุงู ุชุงุจุน ูุจูุงู ุฏุฑ populateWeeds ูพุงุฏูโุณุงุฒ ุดุฏู ุจูุฏ
        // ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ฺฺฉโุจุงฺฉุณ ุจุง ุงุทูุงุนุงุช ฺฉุงูู ุงุฌุงุฏ ูโุดูุฏ
        // ู ููฺฏุงู ุงูุชุฎุงุจุ ููุท ุนููฺฉุดโูุง ููุซุฑ ููุงุด ุฏุงุฏู ูโุดููุฏ
        
        // ==================== ุจูุจูุฏ ุณุณุชู ุชูุงูุจ ุงุฎุชุตุงุต ====================
        // ุชุงุจุน generateSpecificWeedRotation ุจุฑุง ูุฑ ุนูู ูุฑุฒ ุฎุงุตุ
        // ููุท ุนููฺฉุดโูุง ููุซุฑ ุฑุง ุฏุฑ ูุธุฑ ูโฺฏุฑุฏ ู ุชูุงูุจ ุจู ุขููุง ุงุฌุงุฏ ูโฺฉูุฏ
        
        // ==================== ุจูุจูุฏ ููุงุด ุจุฑุง ุฌู ====================
        // ุฏุฑ ุชุงุจุน analyzeHerbicidesForSelectedWeedsุ
        // ุจุฑุฑุณ ูโุดูุฏ ฺฉู ุนููฺฉุด ุจุฑุง ูุญุตูู ุฌู ูุฌุงุฒ ุจุงุดุฏ
        // ู ุนููฺฉุดโูุง ุบุฑูุฌุงุฒ ุญุฐู ูโุดููุฏ
        
        // ==================== ุงูููุชโุจูุฏ ุจุฑ ุงุณุงุณ ฺฉุงุฑุง ====================
        // ุฏุฑ ุชุงุจุน analyzeHerbicidesForSelectedWeedsุ
        // ุนููฺฉุดโูุง ุจุฑ ุงุณุงุณ ุงูุชุงุฒ ฺฉุงุฑุง ูุฑุชุจ ูโุดููุฏ
        // ู ุนููฺฉุดโูุง ฺฉู ุจุดุชุฑู ุชุงุซุฑ ุฑุง ุฏุงุฑูุฏ ุงูู ููุงุด ุฏุงุฏู ูโุดููุฏ
        
        // ==================== ุจูุจูุฏ ููุทู ุชูุงูุจ ุจุฑุง ุนููโูุง ูุฑุฒ ุฎุงุต ====================
        // ุจุฑุง ุนูู ูุฑุฒ "ุฌู ุฏุฑู" ฺฉู ููุท ุฏู ุนููฺฉุด ููุซุฑ ุฏุงุฑุฏ (ุขูพุฑูุณ ู ุชูุชุงู)
        // ุณุณุชู ุจู ุทูุฑ ุฎูุฏฺฉุงุฑ ุชูุงูุจ ุจู ุงู ุฏู ุฑุง ุฑุนุงุช ูโฺฉูุฏ
        // ู ุงุฒ ุชฺฉุฑุงุฑ ฺฉ ุนููฺฉุด ุฏุฑ ุณุงูโูุง ูุชูุงู ุฌููฺฏุฑ ูโฺฉูุฏ
        
        // ุจุฑุง ุนูู ูุฑุฒ "ุงุฑุดุชู ุฎุทุง"
        // ููุท ุนููฺฉุดโูุง ููุซุฑ ููุงุด ุฏุงุฏู ูโุดููุฏ
        // ู ุนููฺฉุดโูุง ุบุฑููุซุฑ (ูุซู ุขุชูุงูุชุณ) ููุงุด ุฏุงุฏู ููโุดููุฏ
        
        // ==================== ุจูุจูุฏ ุณุณุชู ููุงุด ====================
        // ููฺฏุงู ุงูุชุฎุงุจ ฺฉ ุนูู ูุฑุฒ ุฎุงุตุ
        // ุฏุฑ ุชุจ "ุชูุงูุจโูุง ุงุฎุชุตุงุต"ุ ุจุฑูุงูู ุชูุงูุจ ุงุฎุชุตุงุต ุจุฑุง ุขู ุนูู ูุฑุฒ ููุงุด ุฏุงุฏู ูโุดูุฏ
        // ู ุฏุฑ ุณุงุฑ ุชุจโูุง ูุฒ ููุท ุนููฺฉุดโูุง ููุซุฑ ููุงุด ุฏุงุฏู ูโุดููุฏ
        
        // ==================== ุฐุฎุฑู ู ุจุงุฒุงุจ ุชุงุฑุฎฺู ====================
        // ุจุฑุง ูุฑ ุนูู ูุฑุฒุ ุชุงุฑุฎฺู ูุตุฑู ุฌุฏุงฺฏุงูู ุฐุฎุฑู ูโุดูุฏ
        // ู ุฏุฑ ูุญุงุณุจุงุช ุชูุงูุจ ููุฑุฏ ุงุณุชูุงุฏู ูุฑุงุฑ ูโฺฏุฑุฏ
        
        console.log('ุณุณุชู ุชูุงูุจ ููุดููุฏ ุจุง ููููุช ุจุงุฑฺฏุฐุงุฑ ุดุฏ.');
    </script>
	<script>
// ==================== ฺฉุฏูุง ูุฎุตูุต PWA ู ููุจุงู ====================

// 1. ุซุจุช Service Worker ุจุฑุง ุญุงูุช ุขููุงู
if ('serviceWorker' in navigator) {
    window.addEventListener('load', function() {
        navigator.serviceWorker.register('./sw.js')
            .then(function(registration) {
                console.log('ServiceWorker ุจุง ููููุช ุซุจุช ุดุฏ: ', registration.scope);
            })
            .catch(function(error) {
                console.log('ุฎุทุง ุฏุฑ ุซุจุช ServiceWorker: ', error);
            });
    });
}

// 2. ุชุดุฎุต ุฏุณุชฺฏุงู ููุจุงู
function isMobileDevice() {
    return (typeof window.orientation !== "undefined") || 
           (navigator.userAgent.indexOf('IEMobile') !== -1) ||
           (navigator.userAgent.match(/Android/i)) ||
           (navigator.userAgent.match(/webOS/i)) ||
           (navigator.userAgent.match(/iPhone/i)) ||
           (navigator.userAgent.match(/iPad/i)) ||
           (navigator.userAgent.match(/iPod/i)) ||
           (navigator.userAgent.match(/BlackBerry/i)) ||
           (navigator.userAgent.match(/Windows Phone/i));
}

// 3. ุงุนูุงู ุชูุธูุงุช ุจุฑุง ููุจุงู
if (isMobileDevice()) {
    document.addEventListener('DOMContentLoaded', function() {
        // ุฌููฺฏุฑ ุงุฒ zoom ุจุง ุฏุงุจูโุชูพ
        document.addEventListener('touchstart', function(event) {
            if (event.touches.length > 1) {
                event.preventDefault();
            }
        }, { passive: false });
        
        // ุชูุธู minimum height ุจุฑุง ุนูุงุตุฑ ููุณ
        const touchElements = document.querySelectorAll(
            'button, .btn, select, input, .checkbox-item, .tab'
        );
        
        touchElements.forEach(function(element) {
            element.style.minHeight = '44px';
            element.style.cursor = 'pointer';
        });
        
        // ููุงุด ูพุงู ูุตุจ ุงูพ
        if (window.matchMedia('(display-mode: standalone)').matches) {
            console.log('ุงูพ ุฏุฑ ุญุงูุช standalone ุงุฌุฑุง ูโุดูุฏ');
        } else {
            // ุงฺฏุฑ ุงุฒ ูุฑูุฑฺฏุฑ ุจุงุฒ ุดุฏูุ ูพุงู ูุตุจ ูุดุงู ุจุฏู
            if (navigator.userAgent.match(/Android|iPhone|iPad|iPod/i)) {
                setTimeout(function() {
                    const installMsg = document.createElement('div');
                    installMsg.style.cssText = `
                        position: fixed;
                        bottom: 20px;
                        right: 20px;
                        left: 20px;
                        background: var(--primary-green);
                        color: white;
                        padding: 15px;
                        border-radius: 10px;
                        text-align: center;
                        z-index: 1000;
                        box-shadow: 0 4px 12px rgba(0,0,0,0.2);
                        font-size: 14px;
                    `;
                    installMsg.innerHTML = `
                        <div style="display: flex; align-items: center; justify-content: center; gap: 10px;">
                            <i class="fas fa-mobile-alt" style="font-size: 18px;"></i>
                            <div>
                                <strong>ุจุฑุง ูุตุจ ุงูพ:</strong> ููู ูุฑูุฑฺฏุฑ โฎ โ "Add to Home screen"
                            </div>
                        </div>
                    `;
                    document.body.appendChild(installMsg);
                    
                    // ุญุฐู ูพุงู ุจุนุฏ ุงุฒ 10 ุซุงูู
                    setTimeout(function() {
                        installMsg.style.transition = 'opacity 0.5s';
                        installMsg.style.opacity = '0';
                        setTimeout(function() {
                            document.body.removeChild(installMsg);
                        }, 500);
                    }, 10000);
                }, 3000);
            }
        }
    });
}

// 4. ูุฏุฑุช ุญุงูุธู ู performance ุฏุฑ ููุจุงู
window.addEventListener('load', function() {
    // ุจูููโุณุงุฒ ุจุฑุง ููุจุงูโูุง ุถุนูโุชุฑ
    const heavyElements = document.querySelectorAll('.checkbox-grid, .efficiency-table');
    
    let observer;
    if ('IntersectionObserver' in window) {
        observer = new IntersectionObserver(function(entries) {
            entries.forEach(function(entry) {
                if (entry.isIntersecting) {
                    entry.target.style.willChange = 'transform';
                }
            });
        });
        
        heavyElements.forEach(function(el) {
            observer.observe(el);
        });
    }
    
    // ุฌููฺฏุฑ ุงุฒ ููุฏ ูุฌุฏุฏ ุชุตุงูุฑ
    const images = document.querySelectorAll('img');
    images.forEach(function(img) {
        img.loading = 'lazy';
    });
});

// 5. ูุฏุฑุช ูุถุนุช ุขููุงู
window.addEventListener('online', function() {
    console.log('ุขููุงู ุดุฏุฏ');
});

window.addEventListener('offline', function() {
    console.log('ุขููุงู ุดุฏุฏ - ุงูพ ููฺูุงู ฺฉุงุฑ ูโฺฉูุฏ');
    if (isMobileDevice()) {
        alert('โ๏ธ ุงุชุตุงู ุงูุชุฑูุช ูุทุน ุดุฏ. ุงูพ ุฏุฑ ุญุงูุช ุขููุงู ฺฉุงุฑ ูโฺฉูุฏ.');
    }
});
</script>
```
</body>
</html>


<script>
// ==================== ูพุงฺฉุณุงุฒ ูุชุงุฌ ููฺฏุงู ุชุบุฑ ุงูุชุฎุงุจ ุนูู ูุฑุฒ (v27) ====================
document.querySelectorAll('.checkbox-grid input[type="checkbox"]').forEach(cb => {
    cb.addEventListener('change', () => {
        if (typeof resetAnalysisState === 'function') {
            resetAnalysisState();
        }
    });
});
</script>
